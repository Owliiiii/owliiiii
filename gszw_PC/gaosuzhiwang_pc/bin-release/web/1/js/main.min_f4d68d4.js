function createBitmapByName(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t}function createBitmapFromSheet(e,t){void 0===t&&(t="gameRes");var n=RES.getRes(t),i=n.getTexture(e),o=new egret.Bitmap;return o.texture=i,o}function getTextureFromSheet(e,t){void 0===t&&(t="gameRes");var n=RES.getRes(t),i=n.getTexture(e);return i}var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{h(i.next(e))}catch(t){r(t)}}function s(e){try{h(i["throw"](e))}catch(t){r(t)}}function h(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}h((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,r=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){h.label=n[1];break}if(6===n[0]&&h.label<a[1]){h.label=a[1],a=n;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(n);break}a[2]&&h.ops.pop(),h.trys.pop();continue}n=t.call(e,h)}catch(i){n=[6,i],r=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},core;!function(e){var t=function(){function e(e,t){this.callback=e,this.thisObj=t}return e}();e.Callback=t,__reflect(t.prototype,"core.Callback")}(core||(core={}));var core;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.EventDispatcher);e.BaseModel=t,__reflect(t.prototype,"core.BaseModel")}(core||(core={}));var BaseTips=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t}return __extends(t,e),t}(eui.Component);__reflect(BaseTips.prototype,"BaseTips");var core;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.eventPool=[],e.initSize(),e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdd,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemove,e),egret.MainContext.instance.stage.addEventListener(egret.StageOrientationEvent.ORIENTATION_CHANGE,e.onOChange,e),e}return __extends(n,t),n.prototype.onOChange=function(){},n.prototype.initSize=function(){this.top=0,this.left=0,this.bottom=0,this.right=0},n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.onAdd=function(){this.isShow=!0,this.initListener()},n.prototype.onRemove=function(){this.clearEvent(),e.NotifyManager.getInstance().removeRegister(this)},n.prototype.registerEvent=function(e,t,n,i){e.addEventListener(t,n,i),this.eventPool.push({target:e,type:t,callback:n,callbackobj:i})},n.prototype.clearEvent=function(){if(this.eventPool.length>0)for(var e=0;e<this.eventPool.length;e++){var t=this.eventPool[e].target,n=this.eventPool[e].type,i=this.eventPool[e].callback,o=this.eventPool[e].callbackobj;t.removeEventListener(n,i,o)}},n.prototype.initListener=function(){this.addRegister(e.NotifyConst.RESIZE,this.onResize,this)},n.prototype.onResize=function(){},n.prototype.addRegister=function(t,n,i){e.NotifyManager.getInstance().registerNotify(t,n,i)},n.prototype.removeRegister=function(t){e.NotifyManager.getInstance().removeRegister(t)},n.prototype.close=function(){this.isShow=!1,this.parent&&this.parent.removeChild(this)},n}(eui.Component);e.BaseUI=t,__reflect(t.prototype,"core.BaseUI");var n=function(){function e(){}return e}();e.EventObj=n,__reflect(n.prototype,"core.EventObj")}(core||(core={}));var MosueCheckBox=function(e){function t(){var t=e.call(this)||this;return mouse.setButtonMode(t,!0),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRollOver,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this)},t.prototype.onRemove=function(){this.onRollOut(),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRollOver,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this)},t.prototype.onRollOver=function(){0==this.enabled&&(this.currentState=this.selected?"rollOverAndDisabled":"disabled"),this.selected?this.currentState="rollOverAndSelected":this.currentState="rollOver",this.dispatchEventWith(egret.Event.CHANGE)},t.prototype.onRollOut=function(){this.currentState="",this.dispatchEventWith(egret.Event.CHANGE)},t.prototype.onClick=function(){},t}(eui.CheckBox);__reflect(MosueCheckBox.prototype,"MosueCheckBox");var MouseButton=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),mouse.setButtonMode(t,!0),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRollOut,this)},t.prototype.onRemove=function(){this.onRollOut(),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRollOut,this)},t.prototype.onRollOver=function(){0!=this.enabled&&(this.currentState="rollOver",this.dispatchEventWith(egret.Event.CHANGE))},t.prototype.onRollOut=function(){this.currentState="",this.dispatchEventWith(egret.Event.CHANGE)},t.prototype.onClick=function(){},t}(eui.Button);__reflect(MouseButton.prototype,"MouseButton");var MyCompoment=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAdd=function(){},t.prototype.onRemove=function(){},t}(eui.Component);__reflect(MyCompoment.prototype,"MyCompoment");var Utils=function(){function e(){}return e.rang=function(e,t){return Math.round(Math.random()*(t-e)+e)},e.setAnchorCenter=function(e){e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2},e.distance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.lineIntersectSide=function(e,t,n,i){var o=(n.y-e.y)*(e.x-t.x)-(n.x-e.x)*(e.y-t.y),r=(i.y-e.y)*(e.x-t.x)-(i.x-e.x)*(e.y-t.y);return o*r>0?!1:!0},e.sideIntersectSide=function(t,n,i,o){return e.lineIntersectSide(t,n,i,o)&&e.lineIntersectSide(i,o,t,n)?!0:!1},e.getAngleBySide=function(e,t){return Math.atan(e/t)*(180/Math.PI)},e.setRichText=function(e,t){if(e)if(t){var n=new egret.HtmlTextParser;e.textFlow=n.parse(t)}else e.text=t},e.hitTest=function(e,t){if(null!=e.getBounds&&null!=t.getBounds){var n=e.getBounds(),i=t.getBounds();return n.x=e.x,n.y=e.y,i.x=t.x,i.y=t.y,n.intersects(i)}},e.checkLength=function(e){var t=new egret.ByteArray;return t.writeUTF(e),t.length},e.pointAmongAngle=function(e,t,n,i){var o=n-e,r=i-t,a=0;return 0==o&&0==r?0:(o>=0&&r>=0?a=180*Math.atan(r/o)/Math.PI:0>=o&&r>=0?a=180*Math.atan(Math.abs(o)/r)/Math.PI+90:0>=o&&0>=r?a=180*Math.atan(Math.abs(r)/Math.abs(o))/Math.PI+180:o>=0&&0>=r&&(a=180*Math.atan(o/Math.abs(r))/Math.PI+270),a)},e.arrToArr2=function(e,t){var n=[];if(e)for(var i=void 0,o=0,r=e.length;r>o;o++)o%t===0&&(i=[],n.push(i)),i.push(e[o]);return n},e.getUrlPara=function(e){for(var t=location.search.replace(/^\?/,"").split("&"),n={},i=0,o=t.length;o>i;i++){var r=t[i].split("=");n[r[0]]=r[1]}return e?n[e]||"":n},e.limit=function(e,t,n){return t>e?t:e>t?n:e},e.limit1=function(e,t,n){return Math.max(t,Math.min(n,e))},e.showTimeFormat=function(e){e=Math.floor(e/1e3);var t=Math.floor(e/86400);e%=86400;var n=Math.floor(e/3600);e%=3600;var i=Math.floor(e/60);e%=60;var o=Math.floor(e);return 0>=t&&0>=n&&0>=i?o+"秒":0>=t&&0>=n?i+"分"+(o>9?o:"0"+o)+"秒":0>=t?n+"时"+(i>0?i:"0"+i)+"分"+(o>9?o:"0"+o)+"秒":t+"天"+(n>0?n:"0"+n)+"时"+(i>0?i:"0"+i)+"分"+(o>9?o:"0"+o)+"秒"},e.getTime1=function(){var e=new Date,t=(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours()),n=e.getMinutes(),i=e.getSeconds(),o="";return 10>t&&(o+="0"),o+=t+":",10>n&&(o+="0"),o+=n+":",10>i&&(o+="0"),o+=i},e.getBigNumberShow=function(e){return 1e4>e?e+"":(e/=1e3,e.toFixed(1)+"K")},e.isElinArr=function(e,t){return t.indexOf(e)>-1},e.isArrCrossing=function(t,n){for(var i=0;i<t.length;i++)if(e.isElinArr(t[i],n))return!0;return!1},e.getURLQueryString=function(e){if(egret.Capabilities.runtimeType==egret.RuntimeType.WEB){var t=decodeURIComponent(window.location.href);t=t.replace(/&quot/g,'"');var n;return t.indexOf("#?")>0?(t=t.replace("#?","&"),n=t.match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"))):n=window.location.search.substr(1).match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)")),n?n[2]:null}},e.isSameDay=function(e,t){var n=new Date(e),i=new Date(t);return n.setHours(0,0,0,0)==i.setHours(0,0,0,0)},e.getMaxStr=function(e){return e.length<=5?e:e.substr(0,5)+"..."},e.removeArrayItem=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},e.mtaChainSdk=function(e){var t=window.MtaH5;if(t&&t.clickStat){var n={};n[e.toLocaleLowerCase()]="true",t.clickStat("yemianshendu",n)}},e.isCollsionRect2=function(e,t,n,i,o,r,a,s){return e>=o&&e>=o+a||o>=e&&o>=e+n||t>=r&&t>=r+s||r>=t&&r>=t+i?!1:!0},e.rect1CollsionRect2=function(t,n){return e.isCollsionRect2(t.x,t.y,t.width,t.height,n.x,n.y,n.width,n.height)},e.BigNumTostring=function(t){var n=t.toString();return t>=e.MAXK&&t<e.MAXM?n=(t/1e3).toFixed(2)+"K":t>=1e6&&(n=(t/e.MAXM).toFixed(2)+"M"),n.toString()},e.BigNumTostring1=function(t){var n=t.toString();if(t>=e.MAXK1&&t<e.MAXM){n=t/1e3+"";var i=n.split(".")[0],o=n.split(".")[1];n=i+"."+(o?o.substr(0,2):"00")+"k"}else if(t>=1e6){n=t/e.MAXM+"";var i=n.split(".")[0],o=n.split(".")[1];n=i+"."+(o?o.substr(0,2):"00")+"M"}return n+""},e.getOrientationType=function(){return 180===window.orientation||0===window.orientation?0:90===window.orientation||-90===window.orientation?1:void 0},e.ArrConvert=function(e,t){for(var n=e.length%t==0?e.length/t:e.length/t+1,i=new Array,o=0;n>o;o++){for(var r=o*t,a=new Array,s=0;t>s&&r<e.length;)a.push(e[r++]),s++;i.push(a)}return i},e.timerOver=function(e,t){var n=e.replace(/-/g,"/"),i=t.replace(/-/g,"/"),o=Date.parse(n),r=Date.parse(i),a=o-r,s=Math.floor(a/864e5),h=a%864e5,l=Math.floor(h/36e5),c=h%36e5,u=Math.floor(c/6e4),p=c%6e4,g=Math.round(p/1e3),d=s+"天"+l+"时"+u+"分"+g;return d},e.playTweenAnimation=function(e,t){if(t)for(var n in e.items)e.items[n].props={loop:!0};e.play()},e.PlayBgSound=function(e,t){var n=RES.getRes(e);return n.play(0,t),n},e.isWeiXin=function(){var e=window.navigator.userAgent.toLowerCase(),t=""+e.match(/MicroMessenger/i);return"null"==t?!1:"micromessenger"==t?!0:void 0},e.getRandom=function(t,n){n=n||1,t=t||0,e.seed=(9301*e.seed+49297)%233280;var i=e.seed/233280;return t+i*(n-t)},e.MAXK=1e5,e.MAXM=1e6,e.MAXK1=1e3,e.seed=5,e}();__reflect(Utils.prototype,"Utils");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?i(o):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Dictionary=function(){function e(){this.m_keys=[],this.m_values=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.m_keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this.m_values.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this.m_keys.concat()},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.m_keys.indexOf(e)},e.prototype.add=function(e,t){var n=this.indexOf(e);n>=0?this.m_values[n]=t:(this.m_keys.push(e),this.m_values.push(t))},e.prototype.get=function(e){var t=this.indexOf(e);return t>=0?this.m_values[t]:null},e.prototype.remove=function(e){var t=this.indexOf(e);return t>=0?(this.m_keys.splice(t,1),this.m_values.splice(t,1)[0]):null},e.prototype.clear=function(){this.m_keys.length=0,this.m_values.length=0},e.prototype.getRandomData=function(){var e=Math.random()*this.keys.length<<0;return this.m_values[e]},e}();__reflect(Dictionary.prototype,"Dictionary");var core;!function(e){var t=function(){function e(e){this.data=e}return e}();e.Node=t,__reflect(t.prototype,"core.Node")}(core||(core={}));var core;!function(e){var t=function(){function t(t,n){if(void 0===n&&(n=!1),this.m_list=[],t)for(var i=0,o=t.length;o>i;i++){var r=new e.Node(t[i]);this.m_list.push(r)}for(var a=this.m_list,i=0,o=a.length;o>i;i++){var r=a[i];i+1==o?r.nextNode=n?a[0]:null:r.nextNode=a[i+1],0==i?r.preNode=n?a[o-1]:null:r.preNode=a[i-1]}}return t.prototype.getLen=function(){return this.m_list.length},t.prototype.getFirst=function(){return this.m_list[0]},t.prototype.getEnd=function(){return this.m_list[this.m_list.length-1]},t.prototype.getNode=function(e){return this.m_list[e]},t.prototype.clear=function(){this.m_list.length=0},t}();e.NodeList=t,__reflect(t.prototype,"core.NodeList")}(core||(core={}));var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){egret.sys.screenAdapter=new MyScreenAdapter;var t=window.innerWidth/window.innerHeight-GameConfig.DES_WIDTH/GameConfig.DES_HEIGHT,n=window.innerWidth/window.innerHeight*GameConfig.DES_HEIGHT;t>0?n>GameConfig.MAX_WIDTH?egret.MainContext.instance.stage.setContentSize(GameConfig.MAX_WIDTH,GameConfig.DES_HEIGHT):egret.MainContext.instance.stage.setContentSize(n,GameConfig.DES_HEIGHT):egret.MainContext.instance.stage.setContentSize(GameConfig.DES_WIDTH,GameConfig.DES_HEIGHT)}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[4,platform.login()];case 2:return t.sent(),[4,platform.getUserInfo()];case 3:return e=t.sent(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return t.sent(),[4,this.loadTheme()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),console.error(e),[3,4];case 4:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var i=new eui.Theme("resource/default.thm.json",e.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){this.textfield=new egret.TextField,this.textfield.fontFamily="ttt",GameModleManger.getInstance().init(this.stage),GameManager.getInstance().init(),window.onresize=function(){var e=window.innerWidth/window.innerHeight-GameConfig.DES_WIDTH/GameConfig.DES_HEIGHT,t=window.innerWidth/window.innerHeight*GameConfig.DES_HEIGHT;e>0?t>GameConfig.MAX_WIDTH?egret.MainContext.instance.stage.setContentSize(GameConfig.MAX_WIDTH,GameConfig.DES_HEIGHT):egret.MainContext.instance.stage.setContentSize(t,GameConfig.DES_HEIGHT):egret.MainContext.instance.stage.setContentSize(GameConfig.DES_WIDTH,GameConfig.DES_HEIGHT),core.NotifyManager.getInstance().sendNotify(core.NotifyConst.RESIZE)}},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ComonModelManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(core.BaseModel);__reflect(ComonModelManager.prototype,"ComonModelManager");var core;!function(e){var t=function(){function e(){if(this._deltaTime=0,e._instance)throw new Error("DateTimer使用单例")}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.run=function(){this._deltaTime=0},Object.defineProperty(e,"deltatime",{get:function(){return e.instance._deltaTime},enumerable:!0,configurable:!0}),e.prototype.updateServerTime=function(e){this._deltaTime=egret.getTimer()-1e3*e},Object.defineProperty(e.prototype,"now",{get:function(){return Math.floor((egret.getTimer()-this._deltaTime)/1e3)},enumerable:!0,configurable:!0}),e}();e.DateTimer=t,__reflect(t.prototype,"core.DateTimer")}(core||(core={}));var core;!function(e){var t=function(){function e(){this.m_callbacks=[]}return e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},e.prototype.init=function(e){this.m_stage=e,this.m_stage?(this.m_preTick=Date.now(),this.m_stage.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)):egret.log("Stage为null不能开启帧循环监听")},e.prototype.onEnterFrame=function(e){var t=Date.now(),n=this.m_callbacks;if(n){for(var i=n.length;i>0;i--){var o=n[i-1];o.isValid||n.splice(i-1,1)}for(var i=0,r=n.length;r>i;i++){var o=n[i];o.isValid&&o.callback&&o.callback.call(o.thisObj,t-this.m_preTick)}}this.m_preTick=t},e.prototype.addFrameEventListener=function(e,t){if(e&&t){var i=new n(e,t);this.m_callbacks.push(i)}},e.prototype.removeFrameEventListener=function(e,t){var n=this.m_callbacks;if(n)for(var i=0,o=n.length;o>i;i++){var r=n[i];r.callback===e&&r.thisObj===t&&(r.isValid=!1)}},e}();e.FrameEventCenter=t,__reflect(t.prototype,"core.FrameEventCenter");var n=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.isValid=!0,i}return __extends(t,e),t.prototype.clone=function(){var e=new t(this.callback,this.thisObj);return e.index=this.index,e.isValid=this.isValid,e},t}(e.Callback);__reflect(n.prototype,"FrameCallBack")}(core||(core={}));var GameModleManger=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(e){KeyBoardManager.getInstance().init(),mouse.enable(e);var t=new eui.UILayer;e.addChild(t),core.LayerManager.getInstance().initLayer(t),core.FrameEventCenter.getInstance().init(e),core.DateTimer.instance.run(),this.moduleMap=new Dictionary,SoundManager.getInstance().loadLocalData(),this.startCheckHashCount(),GameConfig.CasinoGame=window.CasinoGame},t.prototype.startCheckHashCount=function(){var e=egret.$hashCount;setInterval(function(){var t=egret.$hashCount,n=t-e;e=t,n>100&&console.log("性能消耗过大->"+n)},1e3)},t.prototype.getModle=function(e){if(void 0===e&&(e=core.ModleConst.COMMON_MODLE),!this.moduleMap[e]){var t=egret.getDefinitionByName(e);this.moduleMap[e]=new t}return this.moduleMap[e]},t}(egret.EventDispatcher);__reflect(GameModleManger.prototype,"GameModleManger");var KeyBoardManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){this.kb=new KeyBoard,this.kb.addEventListener(KeyBoard.onkeyup,this.onkeydown,this)},t.prototype.onkeydown=function(e){var t=core.UIManager.getUI(core.UIConst.MainScenceUI);if(t&&this.kb.isContain(e.data,KeyBoard.SPACE)){var n=core.UIManager.getUI(core.UIConst.StipsUI),i=core.UIManager.getUI(core.UIConst.SetUI),o=core.UIManager.getUI(core.UIConst.HelpUI),r=core.UIManager.getUI(core.UIConst.HelpDesUI);if(n&&n.parent)return;if(i&&i.parent)return;if(o&&o.parent)return;if(r&&r.parent)return;1==t.startBtn.visible&&t.startBtn.enabled&&(t.hideWin(),GameManager.getInstance().startGame()),1==t.stopBtn.visible&&t.stopBtn.enabled&&GameManager.getInstance().stopGame()}},t}(egret.EventDispatcher);__reflect(KeyBoardManager.prototype,"KeyBoardManager");var core;!function(e){var t=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.initLayer=function(e){this.scenceLayer=new eui.UILayer,this.uiLayer=new eui.UILayer,this.topLayer=new eui.UILayer,this.tipLayer=new eui.UILayer,this.scenceLayer.touchThrough=!0,this.uiLayer.touchThrough=!0,this.topLayer.touchThrough=!0,this.tipLayer.touchThrough=!0,this.tipLayer.touchEnabled=!1,e.addChild(this.scenceLayer),e.addChild(this.uiLayer),e.addChild(this.topLayer),e.addChild(this.tipLayer)},t.prototype.addUI=function(e,n){void 0===n&&(n=1);switch(n){case t.Layer_Scence:this.scenceLayer.addChild(e);break;case t.Layer_UI:this.uiLayer.addChild(e);break;case t.Layer_Top:this.topLayer.addChild(e);break;case t.Layer_Tip:this.tipLayer.addChild(e)}},t.prototype.deleteUI=function(e,n){void 0===n&&(n=1);switch(n){case t.Layer_Scence:this.scenceLayer.removeChild(e);break;case t.Layer_UI:this.uiLayer.removeChild(e);break;case t.Layer_Top:this.topLayer.removeChild(e);break;case t.Layer_Tip:this.tipLayer.removeChild(e)}},t.prototype.getLayer=function(t){return t==e.LayerManager.Layer_Scence?this.scenceLayer:t==e.LayerManager.Layer_UI?this.uiLayer:t==e.LayerManager.Layer_Top?this.topLayer:t==e.LayerManager.Layer_Tip?this.tipLayer:void 0},t.Layer_Scence=0,t.Layer_UI=1,t.Layer_Top=2,t.Layer_Tip=3,t}();e.LayerManager=t,__reflect(t.prototype,"core.LayerManager")}(core||(core={}));var core;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.getInstance=function(){return this.instance||(this.instance=new n),this.instance},n.prototype.loadGroup=function(t,n,i,o){void 0===t&&(t=e.UIConst.NomalLoadingUI),RES.isGroupLoaded(n)?i.call(o):(e.UIManager.openUI(t,e.LayerManager.Layer_Top),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,function(n){var i=e.UIManager.getUI(t);i.setPross(n.itemsLoaded,n.itemsTotal),console.log(n.itemsLoaded+"/"+n.itemsTotal)},this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,function(r){if(r.groupName==n){i.call(o);e.UIManager.getUI(t);e.UIManager.closeUI(t)}},this),RES.loadGroup(n))},n}(egret.EventDispatcher);e.LoadManger=t,__reflect(t.prototype,"core.LoadManger")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.COMMON_MODLE="ComonModelManager",e}();e.ModleConst=t,__reflect(t.prototype,"core.ModleConst")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.HEART_CHECK="HEART_CHECK",e.RECONETING="RECONETING",e.RECONET_SUC="RECONET_SUC",e.WX_JSSDK_CONFIG="WX_JSSDK_CONFIG",e.LOGIC_XIAOCHU="LOGIC_XIAOCHU",e.LOGIC_DROP="LOGIC_DROP",e.LOGIC_DATACHANGE="LOGIC_DATACHANGE",e.LOGIC_BALANCE="LOGIC_BALANCE",e.LOGIC_ROUNDOVER="LOGIC_ROUNDOVER",e.LOGIC_ROUNDSTART="LOGIC_ROUNDSTART",e.NET_INIT="Initial",e.NET_PLAY="Play",e.NET_TOUCHTOKEN="TouchToken",e.RESIZE="RESIZE",e}();e.NotifyConst=t,__reflect(t.prototype,"core.NotifyConst")}(core||(core={}));var core;!function(e){var t=function(){function e(){this.notifyPool={}}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.registerNotify=function(e,t,n){this.notifyPool[e]||(this.notifyPool[e]=[]),this.notifyPool[e].push({callback:t,callbackobj:n})},e.prototype.sendNotify=function(e,t){void 0===t&&(t=null);var n=this.notifyPool[e];if(n&&n.length>0)for(var i=0;i<n.length;i++)n[i].callback.apply(n[i].callbackobj,[t])},e.prototype.removeRegister=function(e){for(var t in this.notifyPool){var n=this.notifyPool[t];if(n&&n.length>0){for(var i=0;i<n.length;i++)n[i].callbackobj==e&&n.splice(i--,1);0==n.length&&delete this.notifyPool[t]}}},e}();e.NotifyManager=t,__reflect(t.prototype,"core.NotifyManager")}(core||(core={}));var core;!function(e){var t=function(){function e(){if(e.s_instance)throw new Error("单例类不可实例化");egret.startTick(this.onTick,this),this.m_tickList=[]}return e.prototype.onTick=function(e){for(var t=this.m_tickList,n=t.length;n>0;n--){var i=t[n-1];i.isValid||t.splice(n-1,1)}for(var n=0,o=t.length;o>n;n++){var i=t[n];if(e-i.timestamp>i.delay){if(i.timestamp=e,i.count++,i.callback){egret.getTimer();i.callback.call(i.thisObj,i.clone());egret.getTimer()}i.count==i.maxCount&&(i.isValid=!1)}}return!1},e.prototype.addTick=function(e,t,i,o){for(var r=[],a=4;a<arguments.length;a++)r[a-4]=arguments[a];var s=this.m_tickList;if(s)for(var h=0,l=s.length;l>h;h++){var c=s[h];if(c.callback==i&&c.thisObj==o&&c.delay==e&&c.maxCount==t)return void(c.isValid||(c.isValid=!0,c.delay=e,c.count=0,c.maxCount=0>=t?Number.MAX_VALUE:t,c.callback=i,c.thisObj=o,c.args=r,c.timestamp=egret.getTimer()))}else s=[],this.m_tickList=s;var u=new n;u.delay=e,u.count=0,u.maxCount=0>=t?Number.MAX_VALUE:t,u.callback=i,u.thisObj=o,u.args=r,u.timestamp=egret.getTimer(),u.isValid=!0,s.push(u)},e.prototype.removeTick=function(e,t){var n=this.m_tickList;if(n)for(var i=0,o=n.length;o>i;i++){var r=n[i];if(r.callback==e&&r.thisObj==t)return void(r.isValid=!1)}},e.prototype.removeTicks=function(e){var t=this.m_tickList;if(t)for(var n=0,i=t.length;i>n;n++){var o=t[n];o.thisObj==e&&(o.isValid=!1)}},e.prototype.removeAllTicks=function(){this.m_tickList.length=0},Object.defineProperty(e,"instance",{get:function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e}();e.TimerManager=t,__reflect(t.prototype,"core.TimerManager");var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.clone=function(){var e=new t;return e.delay=this.delay,e.count=this.count,e.maxCount=this.maxCount,e.callback=this.callback,e.thisObj=this.thisObj,e.args=this.args,e.isValid=this.isValid,e},t}(egret.HashObject);__reflect(n.prototype,"TickData")}(core||(core={}));var core;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.WEIXIN_DEBUG=!0,e.init(),e}return __extends(n,t),n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.init=function(){e.NotifyManager.getInstance().registerNotify(e.NotifyConst.WX_JSSDK_CONFIG,this.onNotifyJSSDK,this)},n.prototype.config=function(){if(Utils.isWeiXin()&&Utils.getURLQueryString("openid")){this.wx=window.wx;encodeURIComponent(window.location.href)}},n.prototype.onNotifyJSSDK=function(e){console.log("微信配置1",e);var t=this;this.wx.config({debug:e.data.debug,appId:e.data.appId,timestamp:e.data.timestamp,nonceStr:e.data.nonceStr,signature:e.data.signature,jsApiList:e.data.jsApiList}),this.wx.ready(function(){t.shareNomal(e.data.url)}),this.wx.error(function(e){})},n.prototype.shareNomal=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=""),this.shareURL=e,t="生态农场开始种植";window.wx},n}(egret.EventDispatcher);e.WeiXinManager=t,__reflect(t.prototype,"core.WeiXinManager")}(core||(core={}));var Commond=function(){function e(){}return e.sendHeartCheck=function(){},e.checkPlayer=function(){var t=e.initData();t.Parameter={Action:"Status",Type:"list_redis",PartnerId:t.PartnerId,McDebug:1},sockets.SocketMananger.getInstance().sendMessage(t)},e.sendInitGame=function(){var t=e.initData();t.Action="Initial",t.Parameter={Action:"Initial",Type:null,PartnerId:t.PartnerId,McDebug:1},GameConfig.gameModle==GameType.GameModule.falseModle?GameManager.getInstance().onNetgGmeInit({}):sockets.SocketMananger.getInstance().sendMessage(t)},e.sendPlay=function(t){void 0===t&&(t=!1);var n=e.initData();n.Action="Play",n.Parameter={Action:"Play",Type:t?"freeslot":"slot",Line:vo.GameData.line,Bet:1,Denom:1e4*vo.GameData.betScoreArr[vo.GameData.betIndex],PlayerId:GameConfig.CasinoGame.PlayerId,BetSetup:{Line:vo.GameData.line,Bet:vo.GameData.betScoreArr[vo.GameData.betIndex],Multiply:1},SessionData:{Bet:1,Multiply:10},DebugMode:"None"},GameConfig.gameModle==GameType.GameModule.falseModle?GameManager.getInstance().onNetGamePlay({}):sockets.SocketMananger.getInstance().sendMessage(n)},e.initData=function(){var e={};return e.Link_auth=GameConfig.CasinoGame.Link_auth,e.GameCode=GameConfig.CasinoGame.GameCode,e.Game_id=GameConfig.CasinoGame.Game_id,e.PlayerId=GameConfig.CasinoGame.PlayerId,e.Skin=GameConfig.CasinoGame.Skin,e.PartnerId=GameConfig.CasinoGame.PartnerId,e.UrlBase=GameConfig.CasinoGame.UrlBase,e.Token=GameConfig.CasinoGame.Token,e.IP=GameConfig.CasinoGame.IP,e.Language=GameConfig.CasinoGame.Language,e.GameCanvas=GameConfig.CasinoGame.GameCanvas,e.vtoken_interval=GameConfig.CasinoGame.vtoken_interval,e.guset=GameConfig.CasinoGame.guest,e.udf1=GameConfig.CasinoGame.udf1,e.udf2=GameConfig.CasinoGame.udf2,e.udf3=GameConfig.CasinoGame.udf3,e.udf4=GameConfig.CasinoGame.udf4,e.udf5=GameConfig.CasinoGame.udf5,e.NjsHost=GameConfig.CasinoGame.NjsHost,e.Denom=GameConfig.CasinoGame.Denom,e.crnex=GameConfig.CasinoGame.crnex,e.UrlRes=GameConfig.CasinoGame.UrlRes,e.isTodayFirstLogin=GameConfig.CasinoGame.isTodayFirstLogin,e},e.index=0,e}();__reflect(Commond.prototype,"Commond");var GameController=function(){function e(){this.sequence=0,this.key="a95c530a7af5f492a74499e70578d150",this.serverAddress="http://54.95.43.201/80101/99"}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getSeq=function(){return this.sequence++,this.sequence},e.prototype.sendHttp=function(e,t,n,i){var o=new XMLHttpRequest;o.open(t,n,!0),o.setRequestHeader("Content-Type","application/json"),o.onload=function(e){switch(o.status){case 200:var t=JSON.parse(o.responseText);t.status>0&&TipsManager.getInstance().showTips(ErrorCode.codeArr[t.status]),void 0!=t.server_time&&core.DateTimer.instance.updateServerTime(t.server_time),TipsManager.getInstance().showLog("receive---",t),i.call(this,t)}},o.send(JSON.stringify(e)),TipsManager.getInstance().showLog("send---",JSON.stringify(e))},e.prototype.clearRedis=function(){},e}();__reflect(GameController.prototype,"GameController");var sockets;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.url=GameConfig.CasinoGame.UrlBase,t.netState=-1,t.reconetCount=0,t.reconetMaxCount=3,t.nett=0,t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){this.heart=new n(this),this.sock.on("connect",this.onSocketOpen.bind(this)),this.sock.on("disconnect",this.onSocketClose.bind(this)),this.sock.on("connect_error",function(){core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top);var e=core.UIManager.getUI(core.UIConst.StipsUI);e.showNetclose("连接断开,正在重新连接.",function(){window.location.href=window.location.href})}),this.sock.on("error",this.onSocketError.bind(this)),this.sock.on("ResponseResult",this.onReceiveMessage.bind(this))},t.prototype.connectServer=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.callFunction=e,this.callObj=t,this.sock=io.connect(this.url),this.init()
},t.prototype.onSocketClose=function(){console.log("连接关闭"),this.netState=-1,core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top);var e=core.UIManager.getUI(core.UIConst.StipsUI);e.showNetclose("连接断开,正在重新连接.",function(){window.location.href=window.location.href})},t.prototype.onSocketError=function(){console.log("连接异常"),this.netState=-1,core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top);var e=core.UIManager.getUI(core.UIConst.StipsUI);e.showNetclose("连接断开,正在重新连接.",function(){window.location.href=window.location.href})},t.prototype.onSocketOpen=function(e){console.log(0==this.reconetCount?"连接成功":"reconect连接",e),this.heart.reset(),this.netState=0,this.callFunction&&this.callObj&&0==this.reconetCount&&this.callFunction.call(this.callObj),this.reconetCount+=1},t.prototype.onReceiveMessage=function(e){var t=JSON.parse(e);console.log("返回obj",t),core.NotifyManager.getInstance().sendNotify(t.Action,t),egret.clearTimeout(this.nett);var n=core.UIManager.getUI(core.UIConst.StipsUI);n&&n.hide()},t.prototype.sendMessage=function(e){console.log("发送",e),this.sock.emit("Action",JSON.stringify(e)),this.nett=egret.setTimeout(function(){core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top);var e=core.UIManager.getUI(core.UIConst.StipsUI);e.showNetclose("连接断开,正在重新连接.",function(){window.location.href=window.location.href})},this,8e3)},t.prototype.reconet=function(){var e=this;this.netState=0,this.connectServer(function(){e.netState=1,Commond.index=0,core.NotifyManager.getInstance().sendNotify(core.NotifyConst.RECONET_SUC)},this)},t}(egret.EventDispatcher);e.SocketMananger=t,__reflect(t.prototype,"sockets.SocketMananger");var n=function(){function e(e){this.timeout=GameConfig.CasinoGame.vtoken_interval,this.timeoutObj=null,this.serverTimeoutObj=null,this.manager=e}return e.prototype.reset=function(){egret.clearInterval(this.inter),this.start()},e.prototype.start=function(){this.inter=egret.setInterval(function(){Commond.sendHeartCheck()},this,1e3*this.timeout)},e}();__reflect(n.prototype,"HeartCheck")}(sockets||(sockets={}));var qr;!function(e){var t=function(){function t(t){this.mode=e.QRMode.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var n=0,i=this.data.length;i>n;n++){var o=[],r=this.data.charCodeAt(n);r>65536?(o[0]=240|(1835008&r)>>>18,o[1]=128|(258048&r)>>>12,o[2]=128|(4032&r)>>>6,o[3]=128|63&r):r>2048?(o[0]=224|(61440&r)>>>12,o[1]=128|(4032&r)>>>6,o[2]=128|63&r):r>128?(o[0]=192|(1984&r)>>>6,o[1]=128|63&r):o[0]=r,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return t.prototype.getLength=function(e){return this.parsedData.length},t.prototype.write=function(e){for(var t=0,n=this.parsedData.length;n>t;t++)e.put(this.parsedData[t],8)},t}();e.QR8bitByte=t,__reflect(t.prototype,"qr.QR8bitByte")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){this.buffer=[],this.length=0}return e.prototype.get=function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},e.prototype.put=function(e,t){for(var n=0;t>n;n++)this.putBit(1==(e>>>t-n-1&1))},e.prototype.getLengthInBits=function(){return this.length},e.prototype.putBit=function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++},e}();e.QRBitBuffer=t,__reflect(t.prototype,"qr.QRBitBuffer")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(){}return t.create=function(n,i,o,r,a,s){void 0===i&&(i=200),void 0===o&&(o=200),void 0===r&&(r=e.QRErrorCorrectLevel.M),void 0===a&&(a=4),void 0===s&&(s=0);var h={color:s,width:i,height:o,correctLevel:r,typeNumer:a},l=new e.QRCodeModel(h.typeNumer,h.correctLevel);return l.addData(n),l.make(),t.draw(l,h)},t.draw=function(e,t){var n=new egret.Sprite,t=t,i=e.getModuleCount(),o=t.width/i,r=t.height/i,a=10;n.graphics.moveTo(-a,-a),n.graphics.beginFill(16777215),n.graphics.drawRect(-a,-a,t.width+2*a,t.height+2*a),n.graphics.endFill();for(var s=0;i>s;s++)for(var h=0;i>h;h++){var l=e.isDark(s,h);l&&(n.graphics.moveTo(h*o,s*r),n.graphics.beginFill(t.color),n.graphics.drawRect(h*o,s*r,o,r),n.graphics.endFill())}return n},t}();e.QRCode=t,__reflect(t.prototype,"qr.QRCode")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(e,t){this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[],this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}return t.prototype.addData=function(t){var n=new e.QR8bitByte(t);this.dataList.push(n),this.dataCache=null},t.prototype.isDark=function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},t.prototype.getModuleCount=function(){return this.moduleCount},t.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},t.prototype.makeImpl=function(e,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[i][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},t.prototype.setupPositionProbePattern=function(e,t){for(var n=-1;7>=n;n++)if(!(-1>=e+n||this.moduleCount<=e+n))for(var i=-1;7>=i;i++)-1>=t+i||this.moduleCount<=t+i||(n>=0&&6>=n&&(0==i||6==i)||i>=0&&6>=i&&(0==n||6==n)||n>=2&&4>=n&&i>=2&&4>=i?this.modules[e+n][t+i]=!0:this.modules[e+n][t+i]=!1)},t.prototype.getBestMaskPattern=function(){for(var t=0,n=0,i=0;8>i;i++){this.makeImpl(!0,i);var o=e.QRUtil.getLostPoint(this);(0==i||t>o)&&(t=o,n=i)}return n},t.prototype.createMovieClip=function(e,t,n){var i=e.createEmptyMovieClip(t,n),o=1;this.make();for(var r=0;r<this.modules.length;r++)for(var a=r*o,s=0;s<this.modules[r].length;s++){var h=s*o,l=this.modules[r][s];l&&(i.beginFill(0,100),i.moveTo(h,a),i.lineTo(h+o,a),i.lineTo(h+o,a+o),i.lineTo(h,a+o),i.endFill())}return i},t.prototype.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},t.prototype.setupPositionAdjustPattern=function(){for(var t=e.QRUtil.getPatternPosition(this.typeNumber),n=0;n<t.length;n++)for(var i=0;i<t.length;i++){var o=t[n],r=t[i];if(null==this.modules[o][r])for(var a=-2;2>=a;a++)for(var s=-2;2>=s;s++)-2==a||2==a||-2==s||2==s||0==a&&0==s?this.modules[o+a][r+s]=!0:this.modules[o+a][r+s]=!1}},t.prototype.setupTypeNumber=function(t){for(var n=e.QRUtil.getBCHTypeNumber(this.typeNumber),i=0;18>i;i++){var o=!t&&1==(n>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=o}for(var i=0;18>i;i++){var o=!t&&1==(n>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=o}},t.prototype.setupTypeInfo=function(t,n){for(var i=this.errorCorrectLevel<<3|n,o=e.QRUtil.getBCHTypeInfo(i),r=0;15>r;r++){var a=!t&&1==(o>>r&1);6>r?this.modules[r][8]=a:8>r?this.modules[r+1][8]=a:this.modules[this.moduleCount-15+r][8]=a}for(var r=0;15>r;r++){var a=!t&&1==(o>>r&1);8>r?this.modules[8][this.moduleCount-r-1]=a:9>r?this.modules[8][15-r-1+1]=a:this.modules[8][15-r-1]=a}this.modules[this.moduleCount-8][8]=!t},t.prototype.mapData=function(t,n){for(var i=-1,o=this.moduleCount-1,r=7,a=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var h=0;2>h;h++)if(null==this.modules[o][s-h]){var l=!1;a<t.length&&(l=1==(t[a]>>>r&1));var c=e.QRUtil.getMask(n,o,s-h);c&&(l=!l),this.modules[o][s-h]=l,r--,-1==r&&(a++,r=7)}if(o+=i,0>o||this.moduleCount<=o){o-=i,i=-i;break}}},t.createData=function(n,i,o){for(var r=e.QRRSBlock.getRSBlocks(n,i),a=new e.QRBitBuffer,s=0;s<o.length;s++){var h=o[s];a.put(h.mode,4),a.put(h.getLength(),e.QRUtil.getLengthInBits(h.mode,n)),h.write(a)}for(var l=0,s=0;s<r.length;s++)l+=r[s].dataCount;if(a.getLengthInBits()>8*l)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*l+")");for(a.getLengthInBits()+4<=8*l&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=8*l)&&(a.put(t.PAD0,8),!(a.getLengthInBits()>=8*l));)a.put(t.PAD1,8);return t.createBytes(a,r)},t.createBytes=function(t,n){for(var i=0,o=0,r=0,a=new Array(n.length),s=new Array(n.length),h=0;h<n.length;h++){var l=n[h].dataCount,c=n[h].totalCount-l;o=Math.max(o,l),r=Math.max(r,c),a[h]=new Array(l);for(var u=0;u<a[h].length;u++)a[h][u]=255&t.buffer[u+i];i+=l;var p=e.QRUtil.getErrorCorrectPolynomial(c),g=new e.QRPolynomial(a[h],p.getLength()-1),d=g.mod(p);s[h]=new Array(p.getLength()-1);for(var u=0;u<s[h].length;u++){var f=u+d.getLength()-s[h].length;s[h][u]=f>=0?d.get(f):0}}for(var v=0,u=0;u<n.length;u++)v+=n[u].totalCount;for(var m=new Array(v),y=0,u=0;o>u;u++)for(var h=0;h<n.length;h++)u<a[h].length&&(m[y++]=a[h][u]);for(var u=0;r>u;u++)for(var h=0;h<n.length;h++)u<s[h].length&&(m[y++]=s[h][u]);return m},t.PAD0=236,t.PAD1=17,t}();e.QRCodeModel=t,__reflect(t.prototype,"qr.QRCodeModel")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){}return e.L=1,e.M=0,e.Q=3,e.H=2,e}();e.QRErrorCorrectLevel=t,__reflect(t.prototype,"qr.QRErrorCorrectLevel")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){}return e.PATTERN000=0,e.PATTERN001=1,e.PATTERN010=2,e.PATTERN011=3,e.PATTERN100=4,e.PATTERN101=5,e.PATTERN110=6,e.PATTERN111=7,e}();e.QRMaskPattern=t,__reflect(t.prototype,"qr.QRMaskPattern")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){}return e.glog=function(t){return e.isInit||e.init(),1>t&&console.log("错误:n="+t),e.LOG_TABLE[t]},e.gexp=function(t){for(e.isInit||e.init();0>t;)t+=255;for(;t>=256;)t-=255;return e.EXP_TABLE[t]},e.init=function(){e.isInit=!0;for(var t=0;8>t;t++)e.EXP_TABLE[t]=1<<t;for(var t=8;256>t;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(var t=0;255>t;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t},e.EXP_TABLE=new Array(256),e.LOG_TABLE=new Array(256),e}();e.QRMath=t,__reflect(t.prototype,"qr.QRMath")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){}return e.MODE_NUMBER=1,e.MODE_ALPHA_NUM=2,e.MODE_8BIT_BYTE=4,e.MODE_KANJI=8,e}();e.QRMode=t,__reflect(t.prototype,"qr.QRMode")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var i=0;i<e.length-n;i++)this.num[i]=e[i+n]}return t.prototype.get=function(e){return this.num[e]},t.prototype.getLength=function(){return this.num.length},t.prototype.multiply=function(n){for(var i=new Array(this.getLength()+n.getLength()-1),o=0;o<this.getLength();o++)for(var r=0;r<n.getLength();r++)i[o+r]^=e.QRMath.gexp(e.QRMath.glog(this.get(o))+e.QRMath.glog(n.get(r)));return new t(i,0)},t.prototype.mod=function(n){if(this.getLength()-n.getLength()<0)return this;for(var i=e.QRMath.glog(this.get(0))-e.QRMath.glog(n.get(0)),o=new Array(this.getLength()),r=0;r<this.getLength();r++)o[r]=this.get(r);for(var r=0;r<n.getLength();r++)o[r]^=e.QRMath.gexp(e.QRMath.glog(n.get(r))+i);return new t(o,0).mod(n)},t}();e.QRPolynomial=t,__reflect(t.prototype,"qr.QRPolynomial")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(e,t){this.totalCount=e,this.dataCount=t}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(e,n){var i=t.getRsBlockTable(e,n);if(void 0==i)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+n);for(var o=i.length/3,r=[],a=0;o>a;a++)for(var s=i[3*a+0],h=i[3*a+1],l=i[3*a+2],c=0;s>c;c++)r.push(new t(h,l));return r},t.getRsBlockTable=function(n,i){switch(i){case e.QRErrorCorrectLevel.L:return t.RS_BLOCK_TABLE[4*(n-1)+0];case e.QRErrorCorrectLevel.M:return t.RS_BLOCK_TABLE[4*(n-1)+1];case e.QRErrorCorrectLevel.Q:return t.RS_BLOCK_TABLE[4*(n-1)+2];case e.QRErrorCorrectLevel.H:return t.RS_BLOCK_TABLE[4*(n-1)+3];default:return}},t}();e.QRRSBlock=t,__reflect(t.prototype,"qr.QRRSBlock")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(){}return t.getBCHTypeInfo=function(e){for(var n=e<<10;t.getBCHDigit(n)-t.getBCHDigit(t.G15)>=0;)n^=t.G15<<t.getBCHDigit(n)-t.getBCHDigit(t.G15);return(e<<10|n)^t.G15_MASK},t.getBCHTypeNumber=function(e){for(var n=e<<12;t.getBCHDigit(n)-t.getBCHDigit(t.G18)>=0;)n^=t.G18<<t.getBCHDigit(n)-t.getBCHDigit(t.G18);return e<<12|n},t.getBCHDigit=function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},t.getPatternPosition=function(e){return t.PATTERN_POSITION_TABLE[e-1]},t.getMask=function(t,n,i){switch(t){case e.QRMaskPattern.PATTERN000:return(n+i)%2==0;case e.QRMaskPattern.PATTERN001:return n%2==0;case e.QRMaskPattern.PATTERN010:return i%3==0;case e.QRMaskPattern.PATTERN011:return(n+i)%3==0;case e.QRMaskPattern.PATTERN100:return(Math.floor(n/2)+Math.floor(i/3))%2==0;case e.QRMaskPattern.PATTERN101:return n*i%2+n*i%3==0;case e.QRMaskPattern.PATTERN110:return(n*i%2+n*i%3)%2==0;case e.QRMaskPattern.PATTERN111:return(n*i%3+(n+i)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},t.getErrorCorrectPolynomial=function(t){for(var n=new e.QRPolynomial([1],0),i=0;t>i;i++)n=n.multiply(new e.QRPolynomial([1,e.QRMath.gexp(i)],0));return n},t.getLengthInBits=function(t,n){if(n>=1&&10>n)switch(t){case e.QRMode.MODE_NUMBER:return 10;case e.QRMode.MODE_ALPHA_NUM:return 9;case e.QRMode.MODE_8BIT_BYTE:return 8;case e.QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>n)switch(t){case e.QRMode.MODE_NUMBER:return 12;case e.QRMode.MODE_ALPHA_NUM:return 11;case e.QRMode.MODE_8BIT_BYTE:return 16;case e.QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>n))throw new Error("type:"+n);switch(t){case e.QRMode.MODE_NUMBER:return 14;case e.QRMode.MODE_ALPHA_NUM:return 13;case e.QRMode.MODE_8BIT_BYTE:return 16;case e.QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},t.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,i=0;t>i;i++)for(var o=0;t>o;o++){for(var r=0,a=e.isDark(i,o),s=-1;1>=s;s++)if(!(0>i+s||i+s>=t))for(var h=-1;1>=h;h++)0>o+h||o+h>=t||(0!=s||0!=h)&&a==e.isDark(i+s,o+h)&&r++;r>5&&(n+=3+r-5)}for(var i=0;t-1>i;i++)for(var o=0;t-1>o;o++){var l=0;e.isDark(i,o)&&l++,e.isDark(i+1,o)&&l++,e.isDark(i,o+1)&&l++,e.isDark(i+1,o+1)&&l++,(0==l||4==l)&&(n+=3)}for(var i=0;t>i;i++)for(var o=0;t-6>o;o++)e.isDark(i,o)&&!e.isDark(i,o+1)&&e.isDark(i,o+2)&&e.isDark(i,o+3)&&e.isDark(i,o+4)&&!e.isDark(i,o+5)&&e.isDark(i,o+6)&&(n+=40);for(var o=0;t>o;o++)for(var i=0;t-6>i;i++)e.isDark(i,o)&&!e.isDark(i+1,o)&&e.isDark(i+2,o)&&e.isDark(i+3,o)&&e.isDark(i+4,o)&&!e.isDark(i+5,o)&&e.isDark(i+6,o)&&(n+=40);for(var c=0,o=0;t>o;o++)for(var i=0;t>i;i++)e.isDark(i,o)&&c++;var u=Math.abs(100*c/t/t-50)/5;return n+=10*u},t.prototype.static_isSupportCanvas=function(){return"undefined"!=typeof CanvasRenderingContext2D},t._getTypeNumber=function(n,i){for(var o=1,r=t._getUTF8Length(n),a=0,s=t.QRCodeLimitLength.length;s>=a;a++){var h=0;switch(i){case e.QRErrorCorrectLevel.L:h=t.QRCodeLimitLength[a][0];break;case e.QRErrorCorrectLevel.M:h=t.QRCodeLimitLength[a][1];break;case e.QRErrorCorrectLevel.Q:h=t.QRCodeLimitLength[a][2];break;case e.QRErrorCorrectLevel.H:h=t.QRCodeLimitLength[a][3]}if(h>=r)break;o++}if(o>t.QRCodeLimitLength.length)throw new Error("Too long data");return o},t._getUTF8Length=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)},t.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],t.G15=1335,t.G18=7973,t.G15_MASK=21522,t.QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],t}();e.QRUtil=t,__reflect(t.prototype,"qr.QRUtil")}(qr||(qr={}));var core;!function(e){var t=function(){function e(){}return e.playBGMusic=function(){1==this.isBgSoundOn?playAudio("music_mp3"):stopAudio("music_mp3")},e.stopBgMusic=function(){stopAudio("music_mp3")},e.registerPageActive=function(){if(!this.haveRegistered){this.haveRegistered=!0;var e="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,t=e.replace(/hidden/i,"visibilitychange"),n=function(){!document[e]};document.addEventListener(t,n)}},e.isBgSoundOn=1,e.isEffectSoundOn=1,e.haveRegistered=!1,e}();e.MusicManager=t,__reflect(t.prototype,"core.MusicManager")}(core||(core={}));var SoundConst=function(){function e(){}return e.START="start_mp3",e.STOP="stop_mp3",e.ADD="add_mp3",e.SUB="sub_mp3",e.SPEED_ON="speedon_mp3",e.SPEED_OFF="speedoff_mp3",e.SINGLEREWARD="singlereward_mp3",e.REWARD="reward_mp3",e.REELEND="reelend_mp3",e.AUTOSTART1="autostart1_mp3",e.AUTOSTOP1="autostop1_mp3",e.AUTOSTART="autostart_mp3",e.AUTOSTOP="autostop_mp3",e.FIVE_SOUND="bigreward2_mp3",e.BIG_REWARD="bigreward_mp3",e}();__reflect(SoundConst.prototype,"SoundConst");var SoundManager=function(){function e(){this.effectOn=!1,this.bgOn=!1,this.bgOn=!1,this.effectOn=!1,this.bgVolume=1,this.effectVolume=1,this.lastVolume=1,this.dic=new Dictionary}return e.prototype.saveVolue=function(){this.lastVolume=this.effectVolume},e.prototype.loadLocalData=function(){var e=egret.localStorage.getItem("bgOn"),t=egret.localStorage.getItem("effectOn"),n=egret.localStorage.getItem("volume"),i=egret.localStorage.getItem("lastVolume");null!=e?this.bgOn=0==e?!1:!0:(egret.localStorage.setItem("bgOn","1"),this.bgOn=!0),null!=t?this.effectOn=0==t?!1:!0:(egret.localStorage.setItem("effectOn","1"),this.effectOn=!0),null!=n?(this.bgVolume=n,this.effectVolume=n):egret.localStorage.setItem("volume",""+this.bgVolume),null!=i?this.lastVolume=i:egret.localStorage.setItem("lastVolume",""+this.lastVolume)},e.prototype.playEffect=function(e,t){var n=this;if(void 0===t&&(t=-1),this.effectOn){var i,o=RES.getRes(e);if(o)i=o.play(0,1),this.dic.add(e,i),i.once(egret.Event.SOUND_COMPLETE,function(t){n.dic.remove(e)},this),i.volume=this.effectVolume;else{var r=function(t,o){i=t.play(0,1),n.dic.add(e,i),i.once(egret.Event.SOUND_COMPLETE,function(t){n.dic.remove(e)},n),i.volume=n.effectVolume};RES.getResAsync(e,r,this)}}},e.prototype.close=function(){for(var e=0;e<this.dic.values.length;e++){var t=this.dic.values[e];t&&(t.volume=0)}},e.prototype.open=function(){for(var e=0;e<this.dic.values.length;e++){var t=this.dic.values[e];t&&(t.volume=this.effectVolume)}},e.prototype.playBg=function(e){var t=this;this.currBg=e,this.bgOn&&this.playMusic(e).then(function(e){t.bgchanel&&(t.bgchanel.stop(),t.bgchanel=null),t.bgchanel=e,t.bgchanel.volume=t.bgVolume})},e.prototype.stopBg=function(){this.bgchanel&&(this.bgchanel.stop(),this.bgchanel=null)},e.prototype.setEffectOn=function(e){this.effectOn=e,egret.localStorage.setItem("effectOn",1==this.effectOn?"1":"0"),this.effectOn?this.open():this.close()},e.prototype.setBgOn=function(e){this.bgOn=e,egret.localStorage.setItem("bgOn",1==this.bgOn?"1":"0"),this.bgOn?this.playBg(this.currBg):this.stopBg()},e.prototype.setBgVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),egret.localStorage.setItem("lastVolume",this.bgVolume+""),this.bgVolume=e,egret.localStorage.setItem("volume",e+""),this.bgchanel&&(this.bgchanel.volume=this.bgVolume)},e.prototype.getBgVolume=function(){return this.bgVolume},e.prototype.setEffectVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),egret.localStorage.setItem("lastVolume",this.effectVolume+""),this.effectVolume=e,egret.localStorage.setItem("volume",e+"")},e.prototype.getEffectVolume=function(){return this.effectVolume},e.getInstance=function(){return null==this.ins&&(this.ins=new e),this.ins},e.prototype.playMusic=function(e,t){var n=this;return void 0===e&&(e=""),void 0===t&&(t=-1),new Promise(function(i,o){var r,a=RES.getRes(e);if(a)r=a.play(e,t),n.dic.add(e,r),r.once(egret.Event.SOUND_COMPLETE,function(t){n.dic.remove(e)},n),r.volume=n.effectVolume,i(r);else{var s=function(a,s){null==a?(console.log(e+"->不存在的资源"),o()):(r=a.play(e,t),n.dic.add(e,r),r.once(egret.Event.SOUND_COMPLETE,function(t){n.dic.remove(e)},n),r.volume=n.effectVolume,i(r))};RES.getResAsync(e,s,n)}})},e}();__reflect(SoundManager.prototype,"SoundManager");var game;!function(e){var t=function(){function e(){}return e.getMc=function(e,t,n){function i(t){var n=RES.getRes(e+"_png"),i=RES.getRes(e+"_json"),o=new egret.MovieClipDataFactory(i,n),r=new egret.MovieClip(o.generateMovieClipData(t));return r.fac=o,r.touchEnabled=!1,r}var o=this;void 0===t&&(t=null),void 0===n&&(n="");var r=RES.getRes(e+"_png");if(r){var a=i(n);return t&&t(a),a}return RES.getResAsync(e+"_png",function(){RES.getResAsync(e+"_json",function(){t&&t(i(n))},o)},this),null},e.changeAction=function(e,t){var n=e.fac;e.movieClipData=n.generateMovieClipData(t)},e}();e.MCUtils=t,__reflect(t.prototype,"game.MCUtils")}(game||(game={}));var core;!function(e){var t=function(){function e(){}return e.addLongTouch=function(t,n,i,o){void 0===o&&(o=null),t.startLongouch=n,t.endLongTouch=i,t.thisObj=o,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.longTouchBegin,t)},e.longTouchBegin=function(t){egret.clearTimeout(e.timeout),e.isLong=!1;var n=t.currentTarget;e.curx=t.stageX,e.cury=t.stageY,egret.MainContext.instance.stage.once(egret.TouchEvent.TOUCH_END,e.longTouchEnd,this),e.timeout=egret.setTimeout(function(){e.isLong=!0,null==n.thisObj?n.startLongouch&&n.startLongouch(t):n.startLongouch&&n.startLongouch.call(n.thisObj,t)},this,350)},e.longTouchEnd=function(t){egret.clearTimeout(e.timeout);var n=this;1==e.isLong&&(e.isLong=!1,(n.thisObj=null)?n.endLongTouch&&n.endLongTouch(t):n.endLongTouch&&n.endLongTouch.call(n.thisObj,t))},e.deleteLongtouch=function(t){t.startLongouch=null,t.endLongTouch=null,t.thisObj=null,t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.longTouchBegin,t)},e.removeDisplayObject=function(e){e.parent&&e.parent.removeChild(e)},e.removeDisplayObjectForAni=function(t,n){var i=this;return void 0===n&&(n=500),new Promise(function(o,r){egret.Tween.get(t).to({alpha:0},n).call(function(){e.removeDisplayObject(t),o()},i)})},e.setAnchorMiddle=function(e,t){void 0===t&&(t=!1),egret.callLater(function(){e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,t&&(e.x=e.x+e.width/2,e.y=e.y+e.height/2)},this)},e.addButtonScaleEffects=function(t,n){if(void 0===n&&(n=!1),t)if(n)t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t);else if(egret.is(t,egret.getQualifiedClassName(eui.Button)))t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t);else for(var i=t.numChildren,o=0;i>o;o++){var r=t.getChildAt(o);e.addButtonScaleEffects(r)}},e.onButtonTouchBegan=function(e){var t=e.currentTarget;egret.Tween.get(t).to({scaleX:.9,scaleY:.9},50).to({scaleX:1,scaleY:1},50)},e.isLong=!1,e}();e.MyUIUtils=t,__reflect(t.prototype,"core.MyUIUtils")}(core||(core={}));var RegUtils;!function(e){function t(e){var t=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return t.test(e)?!0:!1}function n(e){if(r(e))return!1;var t=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return t.test(e)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}function i(e){var t=/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return t.test(e)?!0:!1}function o(e){var t=/^[0][1-9]{2,3}-[0-9]{5,10}$/,n=/^[1-9]{1}[0-9]{5,8}$/;return e.length>9?t.test(e)?!0:!1:n.test(e)?!0:!1}function r(e){if(""==e)return!0;var t="^[ ]+$",n=new RegExp(t);return n.test(e)}function a(e){var t=/^[-]{0,1}[0-9]{1,}$/;return t.test(e)}function s(e){var t="^[0-9]+$",n=new RegExp(t);return-1!=e.search(n)?!0:!1}function h(e){var t="^[0-9]+[.][0-9]{0,3}$",n=new RegExp(t);return n.test(e)?!0:!1}function l(e){if(r(e))return!1;var t=/^[\u4E00-\u9FA5]{2,4}$/;return t.test(e)}function c(e){var t=/^[\u4E00-\u9FA5]/;return t.test(e)}function u(e,t){var n=" ",i=-1;if(0==t||1==t){for(;" "==n;)++i,n=e.substr(i,1);e=e.substring(i)}if(0==t||2==t){for(n=" ",i=e.length;" "==n;)--i,n=e.substr(i,1);e=e.substring(0,i+1)}return e}function p(e){var t=/^[a-z0-9]+$/;return t.test(e)}function g(e){var t=/^[a-z]+$/;return t.test(e)}function d(e){var t=/^[0-9]+$/;return t.test(e)}function f(e){var t=/^[0-9]+(.[0-9]{1})?$/,n=/^[0-9]*$/;return t.test(e)||n.test(e)}e.checkEmail=t,e.isIP=n,e.checkMobile=i,e.checkPhone=o,e.isNull=r,e.isInteger=a,e.isNumber=s,e.isMoney=h,e.isRealName=l,e.checkIsChinese=c,e.cTrim=u,e.isAccount=p,e.isAccountaz=g,e.isAccount09=d,e.isOneNumber=f}(RegUtils||(RegUtils={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var core;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.rect=new eui.Rect,e.rect.alpha=0,e.rect.width=GameConfig.WIDTH,e.rect.height=GameConfig.HEIGHT,e}return __extends(n,t),n.prototype.show=function(){var t=e.LayerManager.getInstance().getLayer(e.LayerManager.Layer_Top);t.addChild(this.rect)},n.prototype.hide=function(){if(this.parent&&this.parent.removeChild(this),this.rect.parent){var t=e.LayerManager.getInstance().getLayer(e.LayerManager.Layer_Top);t.removeChild(this.rect)}},n}(eui.Component);e.BaseTops=t,__reflect(t.prototype,"core.BaseTops")}(core||(core={}));var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,i){function o(e){t.call(i,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(i))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(i,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(i,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var h=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(i,generateJSON.paths[e])},this):RES.getResByUrl(h,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(i,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(i,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var CheckBanner=function(e){function t(){var t=e.call(this)||this;return t.betArr=[],t.btnArr=[],t.leftIndex=0,t.curIndex=0,t}return __extends(t,e),t.prototype.onAdd=function(){e.prototype.onAdd.call(this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSubIndex,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddIndex,this)},t.prototype.onRemoved=function(){e.prototype.onRemove.call(this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSubIndex,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddIndex,this)
},t.prototype.initArr=function(e,t){if(this.betArr=e,this.bGroup||(this.bGroup=new eui.RadioButtonGroup,this.bGroup.addEventListener(egret.Event.CHANGE,this.onChange,this)),0==this.btnArr.length)for(var n=0;10>n;n++){var i=this["btn"+n];i&&(this.btnArr.push(i),i.group=this.bGroup,i.value=n)}this.setIndex(t)},t.prototype.onChange=function(){var e=this.bGroup.selectedValue;this.curIndex=e,this.updata(),this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},t.prototype.setIndex=function(e){this.curIndex=1,this.leftIndex=e-1,this.updata(),this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},t.prototype.getIndex=function(){return this.curIndex+this.leftIndex},t.prototype.onSubIndex=function(){this.curIndex>0?this.curIndex--:this.leftIndex>0&&this.leftIndex--,this.updata(),this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},t.prototype.onAddIndex=function(){this.curIndex<this.btnArr.length-1?this.curIndex++:this.leftIndex<this.betArr.length-this.btnArr.length&&this.leftIndex++,this.updata(),this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},t.prototype.updata=function(){0==this.leftIndex&&0==this.curIndex?this.leftBtn.enabled=!1:this.leftBtn.enabled=!0,this.leftIndex==this.betArr.length-this.btnArr.length?this.rightBtn.enabled=!1:this.rightBtn.enabled=!0,this.btnArr[this.curIndex].selected=!0;for(var e=0;e<this.btnArr.length;e++)this.btnArr[e].label=this.betArr[this.leftIndex+e].toFixed(2)},t.prototype.setTouchEnable=function(e){this.leftBtn.enabled=this.rightBtn.enabled=e;for(var t=0;t<this.btnArr.length;t++)this.btnArr[t].enabled=e},t.prototype.setEnable=function(e){for(var t=0;t<this.btnArr.length;t++)this.btnArr[t].enabled=e;this.leftBtn.enabled=e,this.rightBtn.enabled=e},t}(MyCompoment);__reflect(CheckBanner.prototype,"CheckBanner");var DesButton=function(e){function t(){var t=e.call(this)||this;return t.skinName=DesButtonSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){},this)},Object.defineProperty(t.prototype,"enable",{get:function(){return this.btn.enabled},set:function(e){this.btn.enabled=e,this.updataText(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.tLabel.text},set:function(e){this.tLabel.text=e},enumerable:!0,configurable:!0}),t.prototype.updataText=function(e){this.tLabel.textColor=e?9738398:6711920},t}(eui.Component);__reflect(DesButton.prototype,"DesButton");var GameConfig=function(){function e(){}return e.loadLocalData=function(){},Object.defineProperty(e,"WIDTH",{get:function(){return egret.MainContext.instance.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HEIGHT",{get:function(){return egret.MainContext.instance.stage.stageHeight},enumerable:!0,configurable:!0}),e.bili=1e4,e.autoChangeBet=!0,e.autoPlay=!1,e.speedPlay=!1,e.J_HEIGHT=935,e.MAX_WIDTH=1600,e.DES_WIDTH=1266,e.DES_HEIGHT=990,e.ITEM_W=64,e.ITEM_H=64,e.DISTANCE=5,e.LANG="cn",e.USER_ID="18996802289",e.NICK_NAME="大西瓜",e.ACOUNT=5001,e.biliArr=[1,10,20,30,40,50,60,70,80,90,100],e.autoPlayArr=[10,20,50,75,100],e.langObj={1:{cn:"不知道干什么",tw:"不知道幹什麼",en:"nothing to do"},2:{cn:"背景音乐",tw:"背景音樂",en:"bg music"},3:{cn:"背景音效",tw:"背景音效",en:"effect music"},4:{cn:"历史下注记录",tw:"歷史下注記錄",en:"history"},5:{cn:"规则",tw:"規則",en:"rule"},6:{cn:"离开",tw:"離開",en:"leave"},7:{cn:"网络断线，请重新开始游戏或检查连线状态!",tw:"網絡斷線，請重新開始遊戲或檢查連線狀態！",en:"Network disconnection, please restart the game or check the connection status!"},8:{cn:"继续加油",tw:"繼續加油",en:"go on"},9:{cn:"不要气馁，好运气快来了",tw:"不要氣餒，好運氣快來了",en:"Don't be discouraged. Good luck is coming"},10:{cn:"好样的",tw:"好樣的",en:"Good job"}},e.CasinoGame={Game_id:"80101001001",GameCode:".",Skin:"normal",Link_auth:"cdd523674989adc72c92eb0cd2b2fb28",UrlBase:"ws://172.104.44.114:8086",PartnerId:"pts",PlayerId:"user_522",Token:"000486584F58066F6100FD17D0F04163",IP:":",Language:"chs",GameCanvas:"game_block",vtoken_interval:10,Denom:"32767",guest:"0",crnex:"",udf1:"BigWin",udf2:":",udf3:"",udf4:"",udf5:"",UrlRes:":",NjsHost:"172.104.44.114",isTodayFirstLogin:""},e}();__reflect(GameConfig.prototype,"GameConfig");var MosueRadioButton=function(e){function t(){var t=e.call(this)||this;return t.initFiter(),mouse.setButtonMode(t,!0),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRollOver,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this),this.group.addEventListener(egret.Event.CHANGE,this.onChange,this),this.updataUI()},t.prototype.onRemove=function(){this.removeEventListener(mouse.MouseEvent.ROLL_OVER,this.onRollOver,this),this.removeEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRollOver,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this)},t.prototype.onRollOver=function(e){0!=this.enabled&&(e.type==egret.TouchEvent.TOUCH_TAP&&this.onClick(),this.selected?this.currentState="rollOverAndSelected":this.currentState="rollOver",this.updataUI(),this.dispatchEventWith(egret.Event.CHANGE))},t.prototype.onRollOut=function(){this.currentState="",this.updataUI(),this.dispatchEventWith(egret.Event.CHANGE)},t.prototype.onChange=function(){this.group.selectedValue!=this.value&&this.onRollOut()},t.prototype.onClick=function(){},t.prototype.updataUI=function(){"up"==this.currentState?this.updataText(!1):this.updataText(!0)},t.prototype.updataText=function(e){this.labelDisplay.textColor=e?16777215:7896451,this.labelDisplay.filters=e?[this.colorFlilter,this.glowFilter]:[]},t.prototype.initFiter=function(){if(!this.glowFilter){var e=16777215,t=.1,n=3,i=3,o=10,r=3,a=!1,s=!1;this.glowFilter=new egret.GlowFilter(e,t,n,i,o,r,a,s)}var h=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this.colorFlilter||(this.colorFlilter=new egret.ColorMatrixFilter(h))},t}(eui.RadioButton);__reflect(MosueRadioButton.prototype,"MosueRadioButton");var MyScreenAdapter=function(){function e(){}return e.prototype.calculateStageSize=function(e,t,n,i,o){var r=t,a=n,s=i,h=o,l=t/s||0,c=n/h||0;switch(e){case egret.StageScaleMode.EXACT_FIT:break;case egret.StageScaleMode.FIXED_HEIGHT:s=Math.round(t/c);break;case egret.StageScaleMode.FIXED_WIDTH:h=Math.round(n/l);break;case egret.StageScaleMode.NO_BORDER:l>c?a=Math.round(h*l):r=Math.round(s*c);break;case egret.StageScaleMode.SHOW_ALL:l>c?r=Math.round(s*c):window.innerWidth/window.innerHeight>GameConfig.DES_WIDTH/GameConfig.DES_HEIGHT?r=Math.round(s*c):a=Math.round(h*l);break;case egret.StageScaleMode.FIXED_NARROW:l>c?s=Math.round(t/c):h=Math.round(n/l);break;case egret.StageScaleMode.FIXED_WIDE:l>c?h=Math.round(n/l):s=Math.round(t/c);break;default:s=t,h=n}return egret.Capabilities.runtimeType!=egret.RuntimeType.WXGAME&&(s%2!=0&&(s+=1),h%2!=0&&(h+=1),r%2!=0&&(r+=1),a%2!=0&&(a+=1)),{stageWidth:s,stageHeight:h,displayWidth:r,displayHeight:a}},e}();__reflect(MyScreenAdapter.prototype,"MyScreenAdapter",["egret.sys.IScreenAdapter"]);var MouseButton2=function(e){function t(){var t=e.call(this)||this;return mouse.setButtonMode(t,!0),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this),this.iconDisplay=new eui.Image,this.iconDisplay.visible=!1,this.addChild(this.iconDisplay)},t.prototype.onRemove=function(){this.onRollOut(),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this)},t.prototype.onRollOver=function(){0!=this.enabled&&(this.currentState="rollOver",this.rollover.call(this.callobj,this),this.dispatchEventWith(egret.Event.CHANGE))},t.prototype.onRollOut=function(){this.currentState="",this.rollout.call(this.callobj,this),this.dispatchEventWith(egret.Event.CHANGE)},t.prototype.setF=function(e,t,n){this.rollover=e,this.rollout=t,this.callobj=n},t.prototype.setEnable=function(e){var t=this;this.enabled=e,this.iconDisplay.visible=!e;var n=this.name.charAt(2);e?(egret.Tween.removeTweens(this),this.icon="line"+n+"_icon_png"):egret.Tween.get(this,{loop:!0}).wait(500).call(function(){t.icon="line"+n+"_aicon_png"},this).wait(500).call(function(){t.icon="line"+n+"_icon_png"},this).wait(500).call(function(){t.icon="line"+n+"_aicon_png"},this)},t}(eui.Button);__reflect(MouseButton2.prototype,"MouseButton2");var MouseButton3=function(e){function t(){var t=e.call(this)||this;return t.l=100,t.initFiter(),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.updataUI()},t.prototype.onRollOver=function(){0!=this.enabled&&(this.currentState="rollOver",this.updataUI())},t.prototype.onRollOut=function(){this.currentState="",this.updataUI()},t.prototype.updataUI=function(){"rollOver"==this.currentState?this.updataText(!0):this.updataText(!1)},t.prototype.updataText=function(e){this.labelDisplay.textColor=e?7130252:16777215},t.prototype.initFiter=function(){if(!this.glowFilter){var e=16777215,t=.01,n=1,i=1,o=.01,r=1,a=!1,s=!1;this.glowFilter=new egret.GlowFilter(e,t,n,i,o,r,a,s)}var h=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this.colorFlilter||(this.colorFlilter=new egret.ColorMatrixFilter(h))},t}(MouseButton);__reflect(MouseButton3.prototype,"MouseButton3");var TipsManager=function(e){function t(){var t=e.call(this)||this;return t.showY=800,t.isDebug=!0,t.tipsArr=[],core.FrameEventCenter.getInstance().addFrameEventListener(t.onEnterFrame,t),t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.showLog=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.isDebug&&console.log.apply(console,[e].concat(t))},t.prototype.showTips=function(e,t){var n=this;void 0===t&&(t=1);var i=function(){var i;switch(t){case 0:i=new NormalErrorTips;break;case 1:i=new NormalOkTips}if(i.textTips.text=e,n.tipsArr.push(i),i.x=GameConfig.WIDTH/2-i.width/2+80,n.tipsArr.length>1){var o=n.tipsArr[n.tipsArr.length-2];if(o.y<n.showY-o.height)i.y=n.showY;else if(o.y<GameConfig.HEIGHT-o.height-i.height)i.y=o.y+o.height;else{i.y=o.y+o.height;for(var r=0;r<n.tipsArr.length;r++)n.tipsArr[r].y-=i.height}}else 1==n.tipsArr.length&&(i.y=n.showY);core.LayerManager.getInstance().addUI(i,core.LayerManager.Layer_Tip)};i()},t.prototype.onEnterFrame=function(e){this.tipsArr.length>0&&this.tipsArr[0].alpha<=0&&(this.tipsArr[0].parent.removeChild(this.tipsArr[0]),this.tipsArr.shift());for(var t=0;t<this.tipsArr.length;t++)this.tipsArr[t].y-=4,this.tipsArr[t].alpha-=.004},t}(egret.EventDispatcher);__reflect(TipsManager.prototype,"TipsManager");var MyHslider=function(e){function t(){var t=e.call(this)||this;return t.isPlaying=!1,t.$SliderBase[6]=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.CHANGE,this.onChange,this),this.maximum=100,this.minimum=0,this.value=100*SoundManager.getInstance().getEffectVolume(),this.barl=this.tsbar.width,this.tsbar.width=this.barl*this.value/this.maximum},t.prototype.onChange=function(e){this.tsbar.width=this.barl*this.value/this.maximum},t.prototype.setVolues=function(e){this.value=e,this.tsbar.width=this.barl*this.value/this.maximum},t.prototype.onTrackTouchBegin=function(t){e.prototype.onTrackTouchBegin.call(this,t),this.isPlaying=!0,this.l1x=t.stageX,this.l1y=t.stageY,this.svalue=this.value,egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchEnd=function(e){egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.isPlaying=!1,e.target.parent!=this&&this.dispatchEventWith("MyHslider_STOP")},t.prototype.onTouchMove=function(e){this.l2x=e.stageX,this.l2y=e.stageY;var t=this.pointToValue(this.l2x-this.l1x,this.l2y-this.l1y);t+=this.svalue,t=this.nearestValidValue(t,this.snapInterval),this.updateWhenTouchMove(t)},t}(eui.HSlider);__reflect(MyHslider.prototype,"MyHslider");var MyScrollBar=function(e){function t(){var t=e.call(this)||this;return t.islong=!1,t.moveState=0,t.skinName=MyScrollBarSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=this;this.maximum=100,this.minimum=0,this.value=100,core.MyUIUtils.addLongTouch(this.subtn,function(){e.moveState=1,e.islong=!0},function(){e.moveState=0},this),core.MyUIUtils.addLongTouch(this.addBtn,function(){e.moveState=-1,e.islong=!0},function(){e.moveState=0},this),this.addEventListener(egret.Event.ENTER_FRAME,this.onFrame,this),this.subtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this)},t.prototype.onFrame=function(){-1==this.moveState&&(this.value-=1,this.dispatchEventWith(egret.Event.CHANGE)),1==this.moveState&&(this.value+=1,this.dispatchEventWith(egret.Event.CHANGE))},t.prototype.onTab=function(e){if(this.islong)return void(this.islong=!1);switch(e.currentTarget){case this.subtn:this.value+=10,this.dispatchEventWith(egret.Event.CHANGE);break;case this.addBtn:this.value-=10,this.dispatchEventWith(egret.Event.CHANGE)}},t}(eui.VSlider);__reflect(MyScrollBar.prototype,"MyScrollBar");var core;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName=NomalLoadingUISkin,t}return __extends(t,e),t.prototype.onAdd=function(){e.prototype.onAdd.call(this),this.bar.mask=this.masks},t.prototype.setPross=function(e,t){var n=e/t;this.bar.x=this.lgroup.width*(n-1)},t}(e.BaseUI);e.NomalLoadingUI=t,__reflect(t.prototype,"core.NomalLoadingUI")}(core||(core={}));var NormalErrorTips=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(BaseTips);__reflect(NormalErrorTips.prototype,"NormalErrorTips");var NormalOkTips=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t.skinName=NormalOkTipsSkin,t}return __extends(t,e),t}(BaseTips);__reflect(NormalOkTips.prototype,"NormalOkTips");var SScroll=function(e){function t(){var t=e.call(this)||this;return t.isScroll=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,this.onWhell,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMove,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMove,this),this.bounces=!1},t.prototype.onWhell=function(e){if(this.isScroll){var t=e.data;t>0?this.viewport.scrollV>=30?this.viewport.scrollV-=30:this.viewport.scrollV=0:this.viewport.scrollV<=this.viewport.contentHeight-this.viewport.height-30?this.viewport.scrollV+=30:this.viewport.scrollV=this.viewport.contentHeight-this.viewport.height,this.dispatchEventWith(egret.Event.CHANGE)}},t.prototype.setPerCent=function(e){var t=e/100;this.viewport.scrollV=(this.viewport.contentHeight-this.viewport.height)*t},t.prototype.getPerCent=function(){return Math.floor(this.viewport.scrollV/(this.viewport.contentHeight-this.viewport.height)*100)},t.prototype.onMove=function(e){this.hitTestPoint(e.stageX,e.stageY)?this.isScroll=!0:this.isScroll=!1},t}(eui.Scroller);__reflect(SScroll.prototype,"SScroll");var STogleButton=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(){},t}(eui.ToggleButton);__reflect(STogleButton.prototype,"STogleButton");var core;!function(e){var t=function(){function e(){}return e.NomalLoadingUI="core.NomalLoadingUI",e.LoginUI="LoginUI",e.MainScenceUI="MainScenceUI",e.NetUI="NetUI",e.NetCloseUI="NetCloseUI",e.SetUI="SetUI",e.AutoPlayUI="AutoPlayUI",e.StipsUI="StipsUI",e.HelpUI="HelpUI",e.HelpDesUI="HelpDesUI",e}();e.UIConst=t,__reflect(t.prototype,"core.UIConst")}(core||(core={}));var core;!function(e){var t=function(){function t(){}return t.openUI=function(n,i,o){void 0===i&&(i=e.LayerManager.Layer_UI),void 0===o&&(o=0),i==e.LayerManager.Layer_UI&&this.checkLastUI();var r;if(this.pool[n])r=this.pool[n],t.showUI(r,i,o);else{var a=egret.getDefinitionByName(n);r=new a,r.layer=i,this.pool[n]=r,t.showUI(r,i,o),e.LayerManager.getInstance().addUI(r,i)}},t.checkLastUI=function(){for(var t in this.pool){var n=this.pool[t];n.layer==e.LayerManager.Layer_UI&&n.isShow&&n.close()}},t.isUIOpen=function(e){return this.pool[e]?this.pool[e].isShow:!1},t.getUI=function(e){return this.pool[e]?t.pool[e]:null},t.closeUI=function(e){this.pool[e]&&this.pool[e].close()},t.showUI=function(t,n,i){void 0===i&&(i=0),e.LayerManager.getInstance().addUI(t,n),t.validateNow(),t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;var o=GameConfig.WIDTH/2,r=GameConfig.HEIGHT/2;switch(t.x=o,t.y=r,i){case 0:t.scaleX=1,t.scaleY=1;break;case 1:egret.Tween.get(t).to({scaleX:1,scaleY:1},500);break;case 2:}t.x=0,t.y=0},t.pool={},t}();e.UIManager=t,__reflect(t.prototype,"core.UIManager")}(core||(core={}));var WebImage=function(e){function t(t){var n=e.call(this)||this;n._x=0,n._y=0,n._width=0,n._height=0,n._src="",n._scaleMode=egret.MainContext.instance.stage.scaleMode,n._imgWrapper=null,n._img=null;var i=document.getElementById("StageDelegateDiv"),o=i.parentElement,r=document.getElementById("img-wrapper");r||(r=document.createElement("div"),r.style.display="none",r.attributes.style.value+="position:absolute;",r.id="img-wrapper",i.appendChild(r)),n._imgWrapper=r,n._imgWrapper.style.display="none",n._imgWrapper.style.opacity="0";var a=document.createElement("img"),s=(new Date).getTime();a.src=t,a.id="img-"+s,a.name="img-"+s,a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.opacity="0",a.style.display="none",a.border="0",a.style.width="100%",a.style.height="100%",n._imgWrapper.appendChild(a),n._img=document.getElementById("img-"+s);var h=n;n._img.onload=function(){h._imgWrapper.style.opacity="1",h._img.style.opacity="1"},n._stageW=egret.MainContext.instance.stage.stageWidth,n._stageH=egret.MainContext.instance.stage.stageHeight,n._windowW=window.innerWidth,n._windowH=window.innerHeight,n._designH=parseInt(o.attributes["data-content-height"].value),n._designW=parseInt(o.attributes["data-content-width"].value);var l=egret.sys.screenAdapter.calculateStageSize(egret.MainContext.instance.stage.scaleMode,n._windowW,n._windowH,n._designW,n._designH);return n._displayH=l.displayHeight,n._displayW=l.displayWidth,console.log("windowW:"+n._windowW),console.log("stageW:"+n._stageW),console.log("disPlayW:"+n._displayW),console.log("windowH:"+n._windowH),console.log("stageH:"+n._stageH),console.log("displayH:"+n._displayH),n}return __extends(t,e),t.prototype.show=function(){this._img.style.display="block",this._imgWrapper.style.display="block"},t.prototype.destroy=function(){this._img&&(this._imgWrapper.style.display="none",this._imgWrapper.removeChild(this._img))},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._imgWrapper.style.width=this._width/this._stageW*this._windowW+"px"),(this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER)&&(this._windowW==this._displayW?this._imgWrapper.style.width=this._width/this._stageW*this._windowW+"px":this._imgWrapper.style.width=this._width/this._stageW*this._displayW+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._imgWrapper.style.height=this._height/this._stageH*this._windowH+"px"),(this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER)&&(this._windowH==this._displayH?this._imgWrapper.style.height=this._height/this._stageH*this._windowH+"px":this._imgWrapper.style.height=this._height/this._stageH*this._displayH+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._imgWrapper.style.left=this._x/this._stageW*this._windowW+"px"),(this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER)&&(this._windowW==this._displayW?this._imgWrapper.style.left=this._x/this._stageW*this._windowW+"px":this._imgWrapper.style.left=this._x/this._stageW*this._displayW+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._imgWrapper.style.top=this._y/this._stageH*this._windowH+"px"),(this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER)&&(this._windowH==this._displayH?this._imgWrapper.style.top=this._y/this._stageH*this._windowH+"px":this._imgWrapper.style.top=this._y/this._stageH*this._displayH+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"src",{get:function(){return this._src},set:function(e){this._src=e},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);__reflect(WebImage.prototype,"WebImage");var WebView=function(e){function t(t){var n=e.call(this)||this;n._x=0,n._y=0,n._width=0,n._height=0,n._src="",n._scaleMode=egret.MainContext.instance.stage.scaleMode,n.scale=1,n._iframeWrapper=null,n._iframe=null;var i=document.getElementById("StageDelegateDiv"),o=i.parentElement,r=document.getElementById("iframe-wrapper");r||(r=document.createElement("div"),r.style.display="none",r.attributes.style.value+="position:absolute;-webkit-overflow-scrolling: touch;",r.id="iframe-wrapper",i.appendChild(r)),n._iframeWrapper=r,n._iframeWrapper.style.display="none",n._iframeWrapper.style.opacity="0";var a=document.createElement("iframe"),s=(new Date).getTime();a.src=t,a.id="webview-iframe-"+s,a.name="webview-iframe-"+s,a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.opacity="0",a.style.display="none",a.frameBorder="0",a.border="0",n._iframeWrapper.appendChild(a),n._iframe=document.getElementById("webview-iframe-"+s);var h=n;n._iframe.onload=function(){h._iframeWrapper.style.opacity="1",h._iframe.style.opacity="1"},n._stageW=egret.MainContext.instance.stage.stageWidth,n._stageH=egret.MainContext.instance.stage.stageHeight,n._windowW=window.innerWidth,n._windowH=window.innerHeight,n._designH=parseInt(o.attributes["data-content-height"].value),n._designW=parseInt(o.attributes["data-content-width"].value);var l=egret.sys.screenAdapter.calculateStageSize(egret.MainContext.instance.stage.scaleMode,n._windowW,n._windowH,n._designW,n._designH);return n._displayH=l.displayHeight,n._displayW=l.displayWidth,egret.log("windowW:"+n._windowW),egret.log("stageW:"+n._stageW),egret.log("disPlayW:"+n._displayW),egret.log("windowH:"+n._windowH),egret.log("stageH:"+n._stageH),egret.log("displayH:"+n._displayH),n}return __extends(t,e),t.prototype.show=function(){this._iframe.style.display="block",this._iframeWrapper.style.display="block"},t.prototype.destroy=function(){this._iframe&&(this._iframeWrapper.style.display="none",this._iframe.style.display="none")},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._iframe.style.width=this.scale*this._width/this._stageW*this._windowW+"px",this._iframeWrapper.style.width=this.scale*this._width/this._stageW*this._windowW+"px"),this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER?this._windowW==this._displayW?(this._iframe.style.width=this.scale*this._width/this._stageW*this._windowW+"px",this._iframeWrapper.style.width=this.scale*this._width/this._stageW*this._windowW+"px"):(this._iframe.style.width=this.scale*this._width/this._stageW*this._displayW+"px",this._iframeWrapper.style.width=this.scale*this._width/this._stageW*this._displayW+"px"):(this._iframe.style.width=this.scale*e/window.devicePixelRatio+"px",this._iframeWrapper.style.width=this.scale*e/window.devicePixelRatio+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._iframe.style.height=this.scale*this._height/this._stageH*this._windowH+"px",this._iframeWrapper.style.height=this.scale*this._height/this._stageH*this._windowH+"px"),this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER?this._windowH==this._displayH?(this._iframe.style.height=this.scale*this._height/this._stageH*this._windowH+"px",this._iframeWrapper.style.height=this.scale*this._height/this._stageH*this._windowH+"px"):(this._iframe.style.height=this.scale*this._height/this._stageH*this._displayH+"px",this._iframeWrapper.style.height=this.scale*this._height/this._stageH*this._displayH+"px"):(this._iframe.style.height=this.scale*e/window.devicePixelRatio+"px",this._iframeWrapper.style.height=this.scale*e/window.devicePixelRatio+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._iframeWrapper.style.left=this.scale*this._x/this._stageW*this._windowW+"px"),this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER?this._windowW==this._displayW?this._iframeWrapper.style.left=this.scale*this._x/this._stageW*this._windowW+"px":this._iframeWrapper.style.left=this.scale*this._x/this._stageW*this._displayW+"px":(this._iframe.style.left="0px",this._iframeWrapper.style.left=this.scale*e/window.devicePixelRatio+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._iframeWrapper.style.top=this.scale*this._y/this._stageH*this._windowH+"px"),this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER?this._windowH==this._displayH?this._iframeWrapper.style.top=this.scale*this._y/this._stageH*this._windowH+"px":this._iframeWrapper.style.top=this.scale*this._y/this._stageH*this._displayH+"px":(this._iframe.style.top="0px",this._iframeWrapper.style.top=this.scale*e/window.devicePixelRatio+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"src",{get:function(){return this._src},set:function(e){this._src=e},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);__reflect(WebView.prototype,"WebView");var ErrorCode=function(){function e(){}return e.codeArr={9000:"短信发送时间间隔太短"},e}();__reflect(ErrorCode.prototype,"ErrorCode");var vo;!function(e){var t=function(){function e(){}return e.balance=549.88,e.autoPlayCount=0,e.payData=[],e.betScoreArr=[.05,.1,.5,1,2.5,3.75,5,10,20,25,50,100],e.betIndex=0,e.line=9,e.lineObj={1:[1,1,1,1,1],2:[0,0,0,0,0],3:[2,2,2,2,2],4:[0,1,2,1,0],5:[2,1,0,1,2],6:[0,0,1,0,0],7:[2,2,1,2,2],8:[1,0,0,0,1],9:[1,2,2,2,1]},e.reelArr=[["M4","WW","M3","M5","M0","M3","M2","M3","M4","M1","M1","M2","WW","M1"],["M4","M1","M3","M1","M1","M2","M6","M4","M1","M2","M3","M4","M4","M2"],["M4","WW","M2","M3","M1","M0","M3","M2","WW","WW","M3","M1","WW","M3"]],e}();e.GameData=t,__reflect(t.prototype,"vo.GameData");var n=function(){function e(){}return e.prototype.readData=function(e){},e}();e.BaseInfo=n,__reflect(n.prototype,"vo.BaseInfo");var i=function(e){function t(){var t=e.call(this)||this;return t.resultArr=[],t.indexArr=[],t.allwin=0,t}return __extends(t,e),t.prototype.readData=function(e){},t.prototype.readPlayAction=function(e){},t}(n);e.SlotInfo=i,__reflect(i.prototype,"vo.SlotInfo")}(vo||(vo={}));var GameType;!function(e){var t=function(){function e(){}return e}();e.ItemType=t,__reflect(t.prototype,"GameType.ItemType");var n=function(){function e(){}return e.trueModle=0,e.falseModle=1,e}();e.GameModule=n,__reflect(n.prototype,"GameType.GameModule");var i=function(){function e(){}return e.PLAYING=1,e.STOP=0,e}();e.GameState=i,__reflect(i.prototype,"GameType.GameState");var o=function(){function e(){}return e.CN="cn",e.TW="tw",e.EN="en",e}();e.LangType=o,__reflect(o.prototype,"GameType.LangType");var r=function(){function e(){}return e.NOMAL_REWARD=1,e.NO_REWARD=0,e.BIG_REWARD=2,e.FREE_REWARD=3,e.BIG_AND_FREE=4,e}();e.RewardType=r,__reflect(r.prototype,"GameType.RewardType")}(GameType||(GameType={}));var LoginUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=LoginSkin,t}return __extends(t,e),t.prototype.onAdd=function(){e.prototype.onAdd.call(this),this.registerEvent(this,egret.TouchEvent.TOUCH_TAP,this.onGo,this)},t.prototype.onGo=function(){core.UIManager.openUI(core.UIConst.MainScenceUI)},t}(core.BaseUI);__reflect(LoginUI.prototype,"LoginUI");var NetCloseUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=netcloseSkin,t}return __extends(t,e),t.prototype.onAdd=function(){e.prototype.onAdd.call(this),this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this)},t.prototype.onTab=function(){window.close()},t}(core.BaseUI);__reflect(NetCloseUI.prototype,"NetCloseUI");var NetUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=NetSkin,t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.childrenCreated=function(){},t.prototype.showNetting=function(){var e=this,t=core.LayerManager.getInstance().getLayer(core.LayerManager.Layer_Tip);t.addChild(this),this.netingIcon.rotation=0,egret.Tween.get(this.netingIcon,{loop:!0}).to({rotation:12e3},6e4).call(function(){e.netingIcon.rotation=0})},t.prototype.hideNetting=function(){egret.Tween.removeTweens(this.netingIcon),this.parent&&this.parent.removeChild(this)},t}(core.BaseUI);__reflect(NetUI.prototype,"NetUI");var SetUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=SetSkin,t}return __extends(t,e),t.prototype.initDes=function(){this.desbtn0.text="跳过介绍视频",this.desbtn1.text="不再显示启动画面",this.desbtn2.text="游戏声音"},t.prototype.onAdd=function(){e.prototype.onAdd.call(this),this.initDes(),this.registerEvent(this.volueSlider,egret.Event.CHANGE,this.onVolueChange,this),this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.desbtn0.btn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.desbtn1.btn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.desbtn2.btn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.volueSlider.setVolues(100*SoundManager.getInstance().getEffectVolume()),this.desbtn2.btn.selected=SoundManager.getInstance().getEffectVolume()>0,this.alpha=0,this.show()
},t.prototype.show=function(){egret.Tween.removeTweens(this),this.alpha=0,this.mainGroup.scaleX=1,this.mainGroup.scaleY=1,egret.Tween.get(this).to({alpha:1},200)},t.prototype.hide=function(){egret.Tween.removeTweens(this),egret.Tween.get(this.mainGroup).to({scaleX:0,scaleY:0},100).call(function(){core.UIManager.closeUI(core.UIConst.SetUI)})},t.prototype.onVolueChange=function(){var e=this.volueSlider.value/this.volueSlider.maximum;SoundManager.getInstance().setBgVolume(e),SoundManager.getInstance().setEffectVolume(e);var t=core.UIManager.getUI(core.UIConst.MainScenceUI);t.setBar.musicCheckBox.valume=e,this.desbtn2.btn.selected=e>0},t.prototype.onTab=function(e){core.UIManager.getUI(core.UIConst.MainScenceUI);switch(e.currentTarget){case this.closeBtn:this.hide();break;case this.desbtn0.btn:break;case this.desbtn1.btn:break;case this.desbtn2.btn:var t=core.UIManager.getUI(core.UIConst.MainScenceUI);if(this.desbtn2.btn.selected){t.setBar.musicCheckBox.valume=SoundManager.getInstance().lastVolume,SoundManager.getInstance().setBgVolume(SoundManager.getInstance().lastVolume),SoundManager.getInstance().setEffectVolume(SoundManager.getInstance().lastVolume);var n=SoundManager.getInstance().lastVolume*this.volueSlider.maximum;this.volueSlider.setVolues(n),SoundManager.getInstance().open()}else SoundManager.getInstance().saveVolue(),this.volueSlider.setVolues(0),SoundManager.getInstance().setBgVolume(0),SoundManager.getInstance().setEffectVolume(0),t.setBar.musicCheckBox.valume=this.volueSlider.value,SoundManager.getInstance().close()}},t}(core.BaseUI);__reflect(SetUI.prototype,"SetUI");var StipsUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=StipSkin,t}return __extends(t,e),t.prototype.onAdd=function(){var t=this;e.prototype.onAdd.call(this),this.registerEvent(this.okBtn,egret.TouchEvent.TOUCH_TAP,function(){core.UIManager.closeUI(core.UIConst.StipsUI),t.okcallfun&&t.okcallfun()},this),this.registerEvent(this.confirBtn,egret.TouchEvent.TOUCH_TAP,function(){t.okcallfun&&t.okcallfun()},this),this.registerEvent(this.cancleBtn,egret.TouchEvent.TOUCH_TAP,function(){core.UIManager.closeUI(core.UIConst.StipsUI),t.canclecallfun&&t.canclecallfun()},this)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this)},t.prototype.shows=function(e,t,n,i){void 0===t&&(t=""),void 0===n&&(n=""),void 0===i&&(i=null),this.titleLabel.text=t,this.desLabel.text=n,this.callfun=i,this.okBtn.visible=this.cancleBtn.visible=!1},t.prototype.showAutoBtn=function(e,t,n,i){void 0===t&&(t=""),void 0===n&&(n=null),void 0===i&&(i=null),this.autoGroup.visible=!0,this.allGroup.visible=!1,this.titleLabel.text=t,this.okcallfun=n,this.canclecallfun=i,this.okBtn.visible=this.cancleBtn.visible=!0,this.confirBtn.visible=!1,egret.Tween.removeTweens(this.bg),egret.Tween.removeTweens(this.autoGroup),egret.Tween.get(this.autoGroup).to({scaleX:1,scaleY:1},100),egret.Tween.get(this.bg).to({alpha:.6},100)},t.prototype.showNotmoney=function(e,t,n,i){void 0===t&&(t=""),void 0===n&&(n=null),void 0===i&&(i=null),this.autoGroup.visible=!0,this.allGroup.visible=!1,this.titleLabel.text=t,this.okcallfun=n,this.canclecallfun=i,this.okBtn.visible=this.cancleBtn.visible=!0,this.confirBtn.visible=!1,egret.Tween.removeTweens(this.bg),egret.Tween.removeTweens(this.autoGroup),egret.Tween.get(this.autoGroup).to({scaleX:1,scaleY:1},100),egret.Tween.get(this.bg).to({alpha:.6},100)},t.prototype.showConfirBtn=function(e,t){this.autoGroup.visible=!1,this.allGroup.visible=!0,this.desLabel.text=e,this.okcallfun=t,this.okBtn.visible=this.cancleBtn.visible=!1,this.confirBtn.visible=!0,this.img.height=70+this.desLabel.textHeight+150,egret.Tween.removeTweens(this.bg),egret.Tween.removeTweens(this.allGroup),egret.Tween.get(this.allGroup).to({scaleX:1,scaleY:1},100),egret.Tween.get(this.bg).to({alpha:.6},100)},t.prototype.showNetclose=function(e,t){this.autoGroup.visible=!1,this.allGroup.visible=!0,this.desLabel.text=e,this.okcallfun=t,this.okBtn.visible=this.cancleBtn.visible=!1,this.confirBtn.visible=!0,this.img.height=70+this.desLabel.textHeight+150,egret.Tween.removeTweens(this.bg),egret.Tween.removeTweens(this.allGroup),egret.Tween.get(this.allGroup).to({scaleX:1,scaleY:1},100),egret.Tween.get(this.bg).to({alpha:.92},100)},t.prototype.hide=function(){egret.Tween.removeTweens(this.bg),egret.Tween.removeTweens(this.allGroup),egret.Tween.removeTweens(this.autoGroup),egret.Tween.get(this.allGroup).to({scaleX:0,scaleY:0},100),egret.Tween.get(this.autoGroup).to({scaleX:0,scaleY:0},100),egret.Tween.get(this.bg).to({alpha:0},100).call(function(){core.UIManager.closeUI(core.UIConst.StipsUI)})},t}(core.BaseUI);__reflect(StipsUI.prototype,"StipsUI");var MusicBtn=function(e){function t(){var t=e.call(this)||this;return t._valume=1,t}return __extends(t,e),t.prototype.onAdd=function(){e.prototype.onAdd.call(this),this.valume=SoundManager.getInstance().getBgVolume(),this.updataImg()},Object.defineProperty(t.prototype,"valume",{get:function(){return this._valume},set:function(e){this._valume=e,this.updataImg()},enumerable:!0,configurable:!0}),t.prototype.onRollOver=function(){var t=this;e.prototype.onRollOver.call(this),egret.callLater(function(){t.updataImg()},this)},t.prototype.onRollOut=function(){var t=this;e.prototype.onRollOut.call(this),egret.callLater(function(){t.updataImg()},this)},t.prototype.updataImg=function(){if(this.selected){if(0==this.valume)return this.selected=!1,this.currentState="",void(this.volueImg.source="");var e=Math.ceil(this.valume/.334);this.volueImg.source="rollOverAndSelected"==this.currentState?this.volueImg.source="open_liang"+e+"_png":this.volueImg.source="open_an"+e+"_png"}else{if(this.valume>0){this.selected=!0,this.currentState="";var e=Math.ceil(this.valume/.334);return void(this.volueImg.source="rollOverAndSelected"==this.currentState?this.volueImg.source="open_liang"+e+"_png":this.volueImg.source="open_an"+e+"_png")}this.volueImg.source=""}},t}(MosueCheckBox);__reflect(MusicBtn.prototype,"MusicBtn");var AutoItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);for(var t=0;4>t;t++){var n=this["btn"+t];n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this)}this.autoBtn.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this),this.sGroup.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this),this.autoBtn.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOut,this),this.sGroup.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOut,this),this.sopAutoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStop,this)},t.prototype.hideItem=function(){egret.Tween.removeTweens(this.sGroup),this.sGroup.y=317},t.prototype.onOver=function(e){console.log("over"),egret.Tween.removeTweens(this.sGroup),this.sMainGroup.visible=!0,egret.Tween.get(this.sGroup).to({y:0},300)},t.prototype.onOut=function(e){console.log("out"),egret.Tween.removeTweens(this.sGroup),egret.Tween.get(this.sGroup).to({y:317},300)},t.prototype.onTab=function(e){if(vo.GameData.balance<vo.GameData.betScoreArr[vo.GameData.betIndex]*vo.GameData.line)return egret.Tween.get(this.sGroup).to({y:317},300),void GameManager.getInstance().noMoney();switch(e.currentTarget){case this.btn0:vo.GameData.autoPlayCount=99,GameConfig.autoPlay=!0,this.lastCount=99;break;case this.btn1:vo.GameData.autoPlayCount=50,GameConfig.autoPlay=!0,this.lastCount=50;break;case this.btn2:vo.GameData.autoPlayCount=25,GameConfig.autoPlay=!0,this.lastCount=25;break;case this.btn3:vo.GameData.autoPlayCount=10,GameConfig.autoPlay=!0,this.lastCount=10}this.autoBtn.visible=!1,this.autoStopGroup.visible=!0,this.sMainGroup.visible=!1,egret.Tween.removeTweens(this.sGroup),this.sGroup.y=317,GameManager.getInstance().startGame(),SoundManager.getInstance().playEffect(SoundConst.AUTOSTART1)},t.prototype.onStop=function(){this.autoStopGroup.visible=!1,this.autoBtn.visible=!0,vo.GameData.autoPlayCount=0,GameConfig.autoPlay=!1,SoundManager.getInstance().playEffect(SoundConst.AUTOSTOP1)},t.prototype.resetDo=function(){return vo.GameData.balance<vo.GameData.betScoreArr[vo.GameData.betIndex]*vo.GameData.line?(egret.Tween.get(this.sGroup).to({y:317},300),void GameManager.getInstance().noMoney()):(vo.GameData.autoPlayCount=this.lastCount,GameConfig.autoPlay=!0,this.autoBtn.visible=!1,this.autoStopGroup.visible=!0,this.sMainGroup.visible=!1,SoundManager.getInstance().playEffect(SoundConst.AUTOSTART1),GameManager.getInstance().startGame(),void(this.sGroup.y=317))},t}(eui.Component);__reflect(AutoItem.prototype,"AutoItem");var CheckList=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.Component);__reflect(CheckList.prototype,"CheckList");var GamePentCompoment=function(e){function t(){var t=e.call(this)||this;return t.skinName=GamePentSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.clear()},t.prototype.clear=function(){this.kuangGroup.visible=!1,this.tipGroup.visible=!1,this.lineGroup.visible=!1},t.prototype.showTipLine=function(e){this.tipGroup.visible=!0,this["gr"+e].visible=!0,this["gl"+e].visible=!0},t.prototype.clearTip=function(){this.tipGroup.visible=!1;for(var e=1;10>e;e++)this["gr"+e].visible=!1,this["gl"+e].visible=!1},t.prototype.drallall=function(){var e=[0,10066329,16768426,8943513];this.gGroup.removeChildren(),this.lineGroup.visible=!0,this.gGroup.visible=!0;for(var t=0;5>t;t++)for(var n=0;3>n;n++){var i=new eui.Rect;i.fillColor=e[Math.floor(4*Math.random())],i.x=210*t+69,i.y=198*n,i.width=213,i.height=210,i.ellipseWidth=30,i.ellipseHeight=30,this.gGroup.addChild(i)}},t.prototype.showLine=function(e,t){void 0===t&&(t=null),this.lineGroup.visible=!0,this.gGroup.removeChildren();var n;if(null!=t)for(var i=1;10>i;i++)if(n=this["line"+i],e==i){n.visible=!0;for(var o=0;o<t.length;o++){var r=new eui.Rect;r.fillColor=0;var a=this.kuangGroup.getChildAt(t[o].X),s=a.getChildAt(t[o].Y);r.x=s.x+a.x,r.y=s.y,r.width=s.width,r.height=s.height,this.gGroup.addChild(r)}n.mask=this.gGroup}else n.mask=null,n.visible=!1},t.prototype.cleaAllLine=function(){for(var e=1;10>e;e++){var t=this["line"+e];t.visible=!1,t.mask=null}this.lineGroup.visible=!1},t.prototype.showLines=function(e){this.lineGroup.visible=!0;var t=this["line"+e];t.visible=!0},t.prototype.showLineArr=function(e){var t=this;this.cleaAllLine();for(var n=1;e>=n;n++)this.showLines(n);egret.Tween.removeTweens(this.lineGroup),this.lineGroup.alpha=1,egret.Tween.get(this.lineGroup).wait(2e3).to({alpha:0},1e3).call(function(){t.lineGroup.visible=!1,t.lineGroup.alpha=1})},t.prototype.showKuang=function(e,t){this.kuangGroup.visible=!0;for(var n=0;n<this.kuangGroup.numChildren;n++)for(var i=this.kuangGroup.getChildAt(n),o=0;o<i.numChildren;o++){var r=i.getChildAt(o);r.visible=!1}for(var a=0;a<t.length;a++)for(var n=0;n<this.kuangGroup.numChildren;n++)for(var i=this.kuangGroup.getChildAt(n),o=0;o<i.numChildren;o++){var r=i.getChildAt(o);n==t[a].X&&o==t[a].Y&&(r.visible=!0,r.source="box_"+e+"_png",console.log("aaaaaaaa"))}},t.prototype.showkuang2=function(e){this.kuangGroup.visible=!0;for(var t=0;t<this.kuangGroup.numChildren;t++)for(var n=this.kuangGroup.getChildAt(t),i=0;i<n.numChildren;i++){var o=n.getChildAt(i);o.visible=!1}for(var r=0;r<e.length;r++)for(var t=0;t<this.kuangGroup.numChildren;t++)for(var n=this.kuangGroup.getChildAt(t),i=0;i<n.numChildren;i++){var o=n.getChildAt(i);t==e[r].X&&i==e[r].Y&&(o.visible=!0,o.source="box_1_png")}},t.prototype.getLineArrForKuang=function(e,t){for(var n=[],i=vo.GameData.lineObj[e+""],o=0;o<i.length;o++){for(var r=i[o],a=0,s=0;s<t.length&&t[s].X!=o;s++)a++;a==t.length&&n.push({X:o,Y:r})}return n},t.prototype.clearAll=function(){this.cleaAllLine(),this.clearTip(),this.gGroup.removeChildren(),this.kuangGroup.visible=!1},t}(eui.Component);__reflect(GamePentCompoment.prototype,"GamePentCompoment");var GameScence=function(e){function t(){var t=e.call(this)||this;return t.reelArr=[],t.skinName=GameScenceSkin,t}return __extends(t,e),t.prototype.init=function(){for(var e=0;5>e;e++){var t=this["reel"+e];this.reelArr.push(this["reel"+e]),t.index=e}},t.prototype.reset=function(){for(var e=0;5>e;e++){var t=this["reel"+e];t.curReelData=vo.GameData.initData.Value.Geninit.Main.ReelSymbols[e],t.initData()}},t.prototype.startReel=function(){for(var e=0;5>e;e++){var t=this["reel"+e];t.start()}},t.prototype.stopReel=function(){for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e];t.stop()}},t.prototype.canStop=function(){for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e];t.curTime=egret.getTimer(),t.curReelData=vo.GameData.resultData.Value.SpinResult.Main.ReelSymbols[e],console.log("-----------------1-"+t.index+"--"+t.curTime)}console.log("-----------------2")},t.prototype.showAnimation=function(e){for(var t=0;t<this.reelArr.length;t++)if(t==e.X){var n=this.reelArr[t];n.showAnimation(e.Y)}},t.prototype.hideAnimation=function(e){for(var t=0;t<this.reelArr.length;t++){this.reelArr[t];if(t==e.X){var n=this.reelArr[t];n.hideAnimation(e.Y)}}},t.prototype.hideAllAnimation=function(){for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e];t.clearAllAnimation()}},t.prototype.resumeAllAnimation=function(){for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e];t.resumeAllAnimation()}},t.prototype.pauseAllAniation=function(){for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e];t.pauseAllAnimation()}},t}(eui.Component);__reflect(GameScence.prototype,"GameScence");var HelpDesUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=HelpDesSkin,window.addEventListener("message",function(e){"closedesui"==e.data&&(core.UIManager.closeUI(core.UIConst.HelpDesUI),t.webview&&t.webview.destroy())}),t}return __extends(t,e),t.prototype.onAdd=function(){var t=this;e.prototype.onAdd.call(this),this.onResize(),this.webview||popstr("loadshow"),this.webview||(this.webview=new WebView("./help.html")),this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this,egret.Event.ENTER_FRAME,this.onFrame,this),NetUI.getInstance().showNetting(),egret.setTimeout(function(){NetUI.getInstance().hideNetting(),t.visible=!0},this,1e3),this.onResize(),this.webview.show()},t.prototype.onFrame=function(){this.webview&&(this.webview.width=window.innerWidth<GameConfig.MAX_WIDTH?window.innerWidth*window.devicePixelRatio:GameConfig.MAX_WIDTH,this.webview.x=this.mainGroup.x*window.devicePixelRatio,this.webview.height=this.bg.height*this.bg.scaleY*window.devicePixelRatio,this.webview.y=this.bg.y*window.devicePixelRatio,window.innerWidth<768&&(this.webview.x=0,this.webview.width=768*window.devicePixelRatio))},t.prototype.onResize=function(){var e=window.innerWidth/GameConfig.DES_WIDTH||0,t=(window.innerHeight>GameConfig.J_HEIGHT?GameConfig.J_HEIGHT/GameConfig.DES_HEIGHT:window.innerHeight/GameConfig.DES_HEIGHT)||0,n=(window.innerHeight-GameConfig.J_HEIGHT,e>t?t:e);if(this.bg.scaleX=n,window.innerHeight>GameConfig.J_HEIGHT){var i=(GameConfig.J_HEIGHT-55)/GameConfig.J_HEIGHT;this.bg.scaleY=i}else{var o=(window.innerHeight-55)/GameConfig.J_HEIGHT;this.bg.scaleY=o}GameConfig.WIDTH/GameConfig.HEIGHT>GameConfig.MAX_WIDTH/GameConfig.DES_HEIGHT?GameConfig.MAX_WIDTH*n:GameConfig.WIDTH;this.mainGroup.width=window.innerWidth<GameConfig.MAX_WIDTH?window.innerWidth:GameConfig.MAX_WIDTH,this.mainGroup.height=this.bg.scaleY*this.bg.height,this.contentBg.scaleX=this.contentBg.scaleY=this.mainGroup.width/GameConfig.MAX_WIDTH,this.webview&&(this.webview.width=window.innerWidth<GameConfig.MAX_WIDTH?window.innerWidth*window.devicePixelRatio:GameConfig.MAX_WIDTH,this.webview.x=this.mainGroup.x*window.devicePixelRatio,this.webview.height=this.bg.height*this.bg.scaleY*window.devicePixelRatio,this.webview.y=this.bg.y*window.devicePixelRatio),window.innerHeight<=500/window.devicePixelRatio&&(this.bg.scaleY=window.innerHeight/this.bg.height+.2),egret.updateAllScreens()},t.prototype.onTab=function(){core.UIManager.closeUI(core.UIConst.HelpDesUI)},t}(core.BaseUI);__reflect(HelpDesUI.prototype,"HelpDesUI");var HelpUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=HelpSkin,t}return __extends(t,e),t.prototype.onAdd=function(){var t=this;e.prototype.onAdd.call(this),this.onResize(),this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.myScrollBar,egret.Event.CHANGE,this.onScrollBarChange,this),this.registerEvent(this.scroll,egret.Event.CHANGE,this.onScrollChange,this),this.visible=!1,NetUI.getInstance().showNetting(),egret.setTimeout(function(){NetUI.getInstance().hideNetting(),t.visible=!0},this,400)},t.prototype.onResize=function(){var e=window.innerWidth/GameConfig.DES_WIDTH||0,t=(window.innerHeight>GameConfig.J_HEIGHT?GameConfig.J_HEIGHT/GameConfig.DES_HEIGHT:window.innerHeight/GameConfig.DES_HEIGHT)||0,n=(window.innerHeight-GameConfig.J_HEIGHT,e>t?t:e);if(this.bg.scaleX=1,this.bg.scaleX=1,window.innerHeight>GameConfig.J_HEIGHT){var i=(GameConfig.J_HEIGHT-55)/GameConfig.J_HEIGHT;this.bg.scaleY=i}else{var o=(window.innerHeight-55)/GameConfig.J_HEIGHT;this.bg.scaleY=o}GameConfig.WIDTH/GameConfig.HEIGHT>GameConfig.MAX_WIDTH/GameConfig.DES_HEIGHT?GameConfig.MAX_WIDTH*n:GameConfig.WIDTH;this.mainGroup.width=window.innerWidth<GameConfig.MAX_WIDTH?window.innerWidth:GameConfig.MAX_WIDTH,window.innerWidth<768?(this.mainGroup.width=768,this.mainGroup.horizontalCenter=void 0,this.mainGroup.left=0):(this.mainGroup.horizontalCenter=0,this.mainGroup.left=void 0),this.mainGroup.height=this.bg.scaleY*this.bg.height,this.contentBg.scaleX=this.contentBg.scaleY=this.mainGroup.width/GameConfig.MAX_WIDTH-.06,this.onScrollBarChange(),egret.updateAllScreens(),window.innerHeight<=500/window.devicePixelRatio&&(this.bg.scaleY=window.innerHeight/this.bg.height+.2)},t.prototype.onTab=function(){core.UIManager.closeUI(core.UIConst.HelpUI)},t.prototype.onScrollBarChange=function(){var e=this.myScrollBar.value;this.scroll.setPerCent(100-e),this.scroll.viewport.scrollV=(this.contentBg.scaleY*this.contentBg.height-this.scroll.viewport.height)/100*(100-e)},t.prototype.onScrollChange=function(){var e=100-this.scroll.getPerCent();this.myScrollBar.value=e>0?e:0},t}(core.BaseUI);__reflect(HelpUI.prototype,"HelpUI");var MainScenceUI=function(e){function t(){var t=e.call(this)||this;return t.labelArr=["新游戏","经典老虎机","电动吃角子老虎","桌面游戏","累积游戏"],t.lineState=0,t.betState=0,t.longTouch=!1,t.index=-1,t.screenScale=0,t.curtime=0,t.winIndex=0,t.isPlay=!0,t.isCanPlay=!1,t._rewardNum=0,t.skinName=MainScenceUISkin,t}return __extends(t,e),t.prototype.onAdd=function(){var t=this;e.prototype.onAdd.call(this),this.onResize(),this.gameScence.init(),this.gameScence.reset(),this.updataUI(),this.registerEvent(this.stage,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.topListGroup,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.setBar,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.topGroup,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.infoBtn,egret.TouchEvent.TOUCH_TAP,this.onControllTab,this),this.registerEvent(this.lineSubBtn,egret.TouchEvent.TOUCH_TAP,this.onControllTab,this),this.registerEvent(this.lineAddBtn,egret.TouchEvent.TOUCH_TAP,this.onControllTab,this),this.registerEvent(this.betSubBtn,egret.TouchEvent.TOUCH_TAP,this.onControllTab,this),this.registerEvent(this.betAddBtn,egret.TouchEvent.TOUCH_TAP,this.onControllTab,this),this.registerEvent(this.speedOffBtn,egret.TouchEvent.TOUCH_TAP,this.onControllTab,this),this.registerEvent(this.speedOnBtn,egret.TouchEvent.TOUCH_TAP,this.onControllTab,this),this.registerEvent(this.startBtn,egret.TouchEvent.TOUCH_TAP,this.onControllTab,this),this.registerEvent(this.stopBtn,egret.TouchEvent.TOUCH_TAP,this.onControllTab,this),this.registerEvent(this.moneyBtn,egret.TouchEvent.TOUCH_TAP,this.onControllTab,this),this.registerEvent(this.touchRect,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.balanceLabel.text="￥"+GameManager.numberToCommonStr(vo.GameData.balance),core.MyUIUtils.addLongTouch(this.lineSubBtn,function(){t.lineState=-1,t.hideWin(),t.longTouch=!0},function(){t.lineState=0},this),core.MyUIUtils.addLongTouch(this.lineAddBtn,function(){t.lineState=1,t.hideWin(),t.longTouch=!0},function(){t.lineState=0},this),core.MyUIUtils.addLongTouch(this.betSubBtn,function(){t.betState=-1,t.hideWin(),t.longTouch=!0},function(){t.betState=0},this),core.MyUIUtils.addLongTouch(this.betAddBtn,function(){t.betState=1,t.hideWin(),t.longTouch=!0},function(){t.betState=0},this),this.updataBtn(),this.updataText(!1),this.setReward(0,!1),core.TimerManager.instance.addTick(1e3,-1,this.onFrame,this),core.TimerManager.instance.addTick(200,-1,this.onFrame1,this);for(var n=0;5>n;n++){var i=this["t"+n];i.label0.text=this.labelArr[n],i.label1.text=this.labelArr[n],this.registerEvent(i,egret.TouchEvent.TOUCH_TAP,this.onSetTab,this)}this.registerEvent(this.tGameBtn,egret.TouchEvent.TOUCH_TAP,this.onSetTab,this),this.tGameBtn.label0.text="游戏",this.tGameBtn.label1.text="游戏",this.onResize();var o=egret.localStorage.getItem("today");if(o){var r=(new Date).getTime();if(!Utils.isSameDay(parseInt(o),r)){core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top);var a=core.UIManager.getUI(core.UIConst.StipsUI);a.showConfirBtn("您的存款已被通过.我们希望您在我们的赌城玩得愉快.祝您好运！",function(){a.hide(),egret.setTimeout(function(){core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top),a.showConfirBtn("您的要求的 CNY"+GameManager.numberToCommonStr(vo.GameData.balance)+" 提款已被通过.",function(){a.hide()})},t,100)})}}else{core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top);var s=core.UIManager.getUI(core.UIConst.StipsUI);s.showConfirBtn("您的存款已被通过.我们希望您在我们的赌城玩得愉快.祝您好运！",function(){s.hide(),egret.setTimeout(function(){core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top),s.showConfirBtn("您的要求的 CNY"+GameManager.numberToCommonStr(vo.GameData.balance)+" 提款已被通过.",function(){s.hide()})},t,100)})}egret.localStorage.setItem("today",(new Date).getTime()+"")},t.prototype.updataText=function(e){void 0===e&&(e=!0),this.lineLabel.text=vo.GameData.line+"",this.betLabel.text="x"+GameManager.numberToCommonStr(vo.GameData.betScoreArr[vo.GameData.betIndex]),this.allBetLabel.text="x"+GameManager.numberToCommonStr(vo.GameData.line*vo.GameData.betScoreArr[vo.GameData.betIndex]),e&&this.gameScence.pent.showLineArr(vo.GameData.line)},t.prototype.updataBtn=function(){this.lineSubBtn.enabled=vo.GameData.line>1,this.lineAddBtn.enabled=vo.GameData.line<9,this.betSubBtn.enabled=vo.GameData.betIndex>0,this.betAddBtn.enabled=vo.GameData.betIndex<vo.GameData.betScoreArr.length-1},t.prototype.setdataArr=function(){var e=RES.getRes("config_json")[this.index+""];this.topList.setArr(e)},t.prototype.setSelected=function(e){void 0===e&&(e=-1);for(var t=0;5>t;t++){var n=this["t"+t];e==t?n.setSelected(!0):n.setSelected(!1)}},t.prototype.onSetTab=function(e){switch(e.currentTarget){case this.t0:this.topList.isShow?0!=this.index&&(this.index=0,this.setdataArr(),this.setSelected(0)):(this.index=0,this.setdataArr(),this.topList.show(),this.setSelected(0));break;case this.t1:this.topList.isShow?1!=this.index&&(this.index=1,this.setdataArr(),this.setSelected(1)):(this.index=1,this.setdataArr(),this.topList.show(),this.setSelected(1));break;case this.t2:this.topList.isShow?2!=this.index&&(this.index=2,this.setdataArr(),this.setSelected(2)):(this.index=2,this.setdataArr(),this.topList.show(),this.setSelected(2));break;case this.t3:this.topList.isShow?3!=this.index&&(this.index=3,this.setdataArr(),this.setSelected(3)):(this.index=3,this.setdataArr(),this.topList.show(),this.setSelected(3));break;case this.t4:this.topList.isShow?4!=this.index&&(this.index=4,this.setdataArr(),this.setSelected(4)):(this.index=4,this.setdataArr(),this.topList.show(),this.setSelected(4));break;case this.tGameBtn:this.topList.isShow?this.topList.hide():(this.index=0,this.setdataArr(),this.topList.show(),this.setSelected(0))}},t.prototype.onControllTab=function(e){switch(e.currentTarget){case this.infoBtn:core.UIManager.openUI(core.UIConst.HelpUI,core.LayerManager.Layer_Top);break;case this.lineSubBtn:if(this.longTouch)return;this.hideWin(),vo.GameData.line>1&&(vo.GameData.line-=1,SoundManager.getInstance().playEffect(SoundConst.SUB)),this.lineSubBtn.enabled=vo.GameData.line>1,this.lineAddBtn.enabled=vo.GameData.line<9,this.updataText(),this.longTouch=!1;break;case this.lineAddBtn:if(this.longTouch)return;this.hideWin(),vo.GameData.line<9&&(vo.GameData.line+=1,SoundManager.getInstance().playEffect(SoundConst.ADD)),this.lineSubBtn.enabled=vo.GameData.line>1,this.lineAddBtn.enabled=vo.GameData.line<9,this.updataText(),this.longTouch=!1;break;case this.betSubBtn:if(this.longTouch)return;this.hideWin(),vo.GameData.betIndex>0&&(vo.GameData.betIndex-=1,SoundManager.getInstance().playEffect(SoundConst.SUB)),this.betSubBtn.enabled=vo.GameData.betIndex>0,this.betAddBtn.enabled=vo.GameData.betIndex<vo.GameData.betScoreArr.length-1,this.updataText(!1),this.longTouch=!1;break;case this.betAddBtn:if(this.longTouch)return;this.hideWin(),vo.GameData.betIndex<vo.GameData.betScoreArr.length-1&&(vo.GameData.betIndex+=1,SoundManager.getInstance().playEffect(SoundConst.ADD)),this.betSubBtn.enabled=vo.GameData.betIndex>0,this.betAddBtn.enabled=vo.GameData.betIndex<vo.GameData.betScoreArr.length-1,this.updataText(!1),this.longTouch=!1;break;case this.startBtn:GameManager.getInstance().startGame();break;case this.stopBtn:GameManager.getInstance().stopGame();break;case this.speedOnBtn:this.speedOnBtn.visible=!1,this.speedOffBtn.visible=!0,GameConfig.speedPlay=!1,SoundManager.getInstance().playEffect(SoundConst.SPEED_ON);break;case this.speedOffBtn:this.speedOnBtn.visible=!0,this.speedOffBtn.visible=!1,GameConfig.speedPlay=!0,SoundManager.getInstance().playEffect(SoundConst.SPEED_ON);break;case this.moneyBtn:openMoney()}},t.prototype.onRemove=function(){e.prototype.onRemove.call(this)},t.prototype.onResize=function(){var e=this,t=window.innerWidth/GameConfig.DES_WIDTH||0,n=window.innerHeight>GameConfig.J_HEIGHT?GameConfig.J_HEIGHT/GameConfig.DES_HEIGHT:window.innerHeight/GameConfig.DES_HEIGHT||0,i=t>n?n:t;window.innerWidth<769?(this.mainGroup.horizontalCenter=void 0,this.mainGroup.left=85,this.topGroup.horizontalCenter=this.bottomGroup.horizontalCenter=void 0,this.topGroup.left=this.bottomGroup.left=0,this.textGroup.horizontalCenter=void 0,this.textGroup.left=150,this.setBar.left=480,this.setBar.right=void 0):(this.mainGroup.horizontalCenter=0,this.mainGroup.left=void 0,this.topGroup.horizontalCenter=this.bottomGroup.horizontalCenter=0,this.topGroup.left=this.bottomGroup.left=void 0,this.textGroup.horizontalCenter=0,this.textGroup.left=void 0,this.setBar.left=void 0,this.setBar.right=0),window.innerWidth<800/window.devicePixelRatio||.48>=i?(this.mainGroup.scaleX=.48,this.mainGroup.scaleY=.48,window.innerWidth>768/window.devicePixelRatio?(this.mainGroup.horizontalCenter=0,this.mainGroup.left=void 0,this.topGroup.horizontalCenter=this.bottomGroup.horizontalCenter=0,this.topGroup.left=this.bottomGroup.left=void 0,this.textGroup.horizontalCenter=0,this.textGroup.left=void 0,this.setBar.left=void 0,this.setBar.right=0):(this.mainGroup.horizontalCenter=void 0,this.mainGroup.left=85,this.topGroup.horizontalCenter=this.bottomGroup.horizontalCenter=void 0,this.topGroup.left=this.bottomGroup.left=0,this.textGroup.horizontalCenter=void 0,this.textGroup.left=150,this.setBar.left=480,this.setBar.right=void 0)):(this.mainGroup.scaleX=i,this.mainGroup.scaleY=i,console.log("sss->",this.mainGroup.scaleX),this.mainGroup.horizontalCenter=0,this.mainGroup.left=void 0,this.topGroup.horizontalCenter=this.bottomGroup.horizontalCenter=0,this.topGroup.left=this.bottomGroup.left=void 0,this.textGroup.horizontalCenter=0,this.textGroup.left=void 0,this.setBar.left=void 0,this.setBar.right=0,1366==window.screen.width&&768==window.screen.height&&window.innerWidth>=945&&window.innerWidth<=955&&window.innerHeight>=642&&window.innerHeight<=652&&(this.mainGroup.scaleX=this.mainGroup.scaleY=.9*i),window.screen.width==1920/window.devicePixelRatio&&window.screen.height==1080/window.devicePixelRatio&&(window.innerWidth>=1180&&window.innerWidth<=1190&&window.innerHeight>=794&&window.innerHeight<=804&&(this.mainGroup.scaleX=this.mainGroup.scaleY=.9*i),window.innerWidth>=947&&window.innerWidth<=957&&window.innerHeight>=645&&window.innerHeight<=655&&(this.mainGroup.scaleX=this.mainGroup.scaleY=.9*i)));GameConfig.WIDTH/GameConfig.HEIGHT>GameConfig.MAX_WIDTH/GameConfig.DES_HEIGHT?GameConfig.MAX_WIDTH*i:GameConfig.WIDTH;if(this.topGroup.width=window.innerWidth<GameConfig.MAX_WIDTH?window.innerWidth:GameConfig.MAX_WIDTH,this.bottomGroup.width=window.innerWidth<GameConfig.MAX_WIDTH?window.innerWidth:GameConfig.MAX_WIDTH,window.innerHeight>GameConfig.J_HEIGHT){var o=GameConfig.DES_HEIGHT-GameConfig.J_HEIGHT,r=(window.innerHeight-GameConfig.J_HEIGHT)/o*o/2;this.topGroup.top=r,this.bottomGroup.bottom=r}else this.topGroup.top=0,this.bottomGroup.bottom=0;if(this.bg.scaleX=1,window.innerHeight>GameConfig.J_HEIGHT){var a=(GameConfig.J_HEIGHT-55)/GameConfig.J_HEIGHT;this.bg.scaleY=a}else{var s=(window.innerHeight-55)/GameConfig.J_HEIGHT;this.bg.scaleY=s}window.innerWidth<=768/window.devicePixelRatio&&(this.bottomGroup.width=768/window.devicePixelRatio,this.topGroup.width=768/window.devicePixelRatio),window.innerWidth<=768/window.devicePixelRatio&&(this.bottomGroup.width=768/window.devicePixelRatio,this.topGroup.width=768/window.devicePixelRatio),window.innerHeight<=500/window.devicePixelRatio?(this.topGroup.visible=this.bottomGroup.visible=!1,this.bg.scaleY=window.innerHeight/this.bg.height+.2):this.topGroup.visible=this.bottomGroup.visible=!0,egret.clearTimeout(this.clet),this.clet=egret.setTimeout(function(){e.topList.updataPosition(),e.bg.source=1215==window.innerWidth&&833==window.innerHeight?"BG_1x_png":"BG_1_png"},this,100),egret.updateAllScreens()},t.prototype.updataUI=function(){},t.prototype.onTab=function(e){switch(e.currentTarget){case this.stage:this.topList.hide(),this.setBar.closeall(),this.longTouch=!1;break;case this.topListGroup:e.stopPropagation(),e.stopImmediatePropagation();break;case this.setBar:e.stopPropagation(),e.stopImmediatePropagation();break;case this.topGroup:e.stopPropagation(),e.stopImmediatePropagation();break;case this.touchRect:this.stopBtn.visible&&this.stopBtn.enabled&&GameManager.getInstance().stopGame()}this.updataUI()},t.prototype.onFrame=function(){this.timeLabel.text=Utils.getTime1()},t.prototype.onFrame1=function(){-1==this.betState?(vo.GameData.betIndex>0&&(vo.GameData.betIndex-=1,SoundManager.getInstance().playEffect(SoundConst.SUB)),this.betSubBtn.enabled=vo.GameData.betIndex>0,this.betAddBtn.enabled=vo.GameData.betIndex<vo.GameData.betScoreArr.length-1,this.updataText(!1)):1==this.betState&&(vo.GameData.betIndex<vo.GameData.betScoreArr.length-1&&(vo.GameData.betIndex+=1,SoundManager.getInstance().playEffect(SoundConst.ADD)),this.betSubBtn.enabled=vo.GameData.betIndex>0,this.betAddBtn.enabled=vo.GameData.betIndex<vo.GameData.betScoreArr.length-1,this.updataText(!1)),-1==this.lineState?(vo.GameData.line>1&&(vo.GameData.line-=1,SoundManager.getInstance().playEffect(SoundConst.SUB)),this.lineSubBtn.enabled=vo.GameData.line>1,this.lineAddBtn.enabled=vo.GameData.line<9,this.updataText()):1==this.lineState&&(vo.GameData.line<9&&(vo.GameData.line+=1,SoundManager.getInstance().playEffect(SoundConst.ADD)),this.lineSubBtn.enabled=vo.GameData.line>1,this.lineAddBtn.enabled=vo.GameData.line<9,this.updataText())},t.prototype.showWin=function(e){var t=this;if(SoundManager.getInstance().playMusic(SoundConst.REWARD,1).then(function(e){GameManager.getInstance().rewardChannel=e}),this.gameScence.pent.clearTip(),this.gameScence.pent.cleaAllLine(),vo.GameData.autoPlayCount>0&&vo.GameData.autoPlayCount>0)for(var n=0;n<e.length;n++){var i=e[n].Data,o=e[n].Positions;
if(i){var r=i.Line;this.gameScence.pent.showTipLine(r),this.gameScence.pent.showLines(r)}else this.gameScence.pent.showkuang2(e[n].Positions)}else for(var n=0;n<e.length;n++){var i=e[n].Data,o=e[n].Positions;if(i){var r=i.Line;e.length>1&&(this.gameScence.pent.showTipLine(r),this.gameScence.pent.showLines(r))}for(var a=0;a<o.length;a++){var s=o[a];this.gameScence.showAnimation(s)}}var h=e.length>1?500:0;this.isCanPlay=!1,this.tt2=egret.setTimeout(function(){t.isCanPlay=!0},this,3e3),this.tt=egret.setTimeout(function(){if(!(GameConfig.speedPlay&&vo.GameData.autoPlayCount>0)){t.gameScence.pent.clearTip(),t.gameScence.pent.cleaAllLine();var n=e[t.winIndex];if(n.Data){t.gameScence.pent.showKuang(n.Data.Line,n.Positions);var i=t.gameScence.pent.getLineArrForKuang(n.Data.Line,n.Positions);t.gameScence.pent.showLine(n.Data.Line,i),t.gameScence.pent.showTipLine(n.Data.Line)}else t.gameScence.pent.showkuang2(n.Positions);t.winIndex++,t.winIndex>=e.length&&(t.winIndex=0),t.clert=egret.setInterval(function(){if(t.isPlay){t.gameScence.pent.clearTip(),t.gameScence.pent.cleaAllLine(),e.length>1&&t.isCanPlay&&SoundManager.getInstance().playEffect(SoundConst.SINGLEREWARD);var n=e[t.winIndex];if(n.Data){t.gameScence.pent.showKuang(n.Data.Line,n.Positions);var i=t.gameScence.pent.getLineArrForKuang(n.Data.Line,n.Positions);t.gameScence.pent.showLine(n.Data.Line,i),t.gameScence.pent.showTipLine(n.Data.Line)}else t.gameScence.pent.showkuang2(n.Positions);t.winIndex++,t.winIndex>=e.length&&(t.winIndex=0)}},t,800)}},this,h);var l=vo.GameData.resultData,c=l.Value.SpinResult.TotalBet,u=l.Value.SpinResult.TotalWin,p=l.Value.Dollar,g=u/c;g>=50?(this.setReward(p,!0,4),egret.clearTimeout(this.tt2)):g>=25?this.setReward(p,!0,3):g>=1.5?this.setReward(p,!0,2):this.setReward(p,!0,1)},t.prototype.hideWin=function(){egret.clearInterval(this.clert),egret.clearTimeout(this.tt),egret.clearTimeout(this.tt2),this.gameScence.pent.clearAll(),this.gameScence.hideAllAnimation(),this.winIndex=0,this.reward=0,this.hideFiveAnimation(),this.hideBigReward()},t.prototype.setReward=function(e,t,n){var i=this;void 0===t&&(t=!0),void 0===n&&(n=1),egret.Tween.removeTweens(this),egret.Tween.removeTweens(this.rewardGroup),this.rewardGroup.scaleX=1,this.rewardGroup.scaleY=1,t&&this.reward<e?1==n?egret.Tween.get(this).to({reward:e},2e3):2==n?(egret.Tween.get(this).to({reward:e},2e3),egret.Tween.get(this.rewardGroup).to({scaleX:1.2,scaleY:1.2},1e3).wait(2e3).to({scaleX:1,scaleY:1},1e3)):3==n?(egret.Tween.get(this).to({reward:e},3e3),egret.Tween.get(this.rewardGroup).to({scaleX:1.2,scaleY:1.2},1e3).wait(1e3).to({scaleX:1.2,scaleY:2,y:-300},1e3).call(function(){i.isPlay=!1,i.gameScence.pauseAllAniation()},this).wait(1500).call(function(){i.isPlay=!0,i.gameScence.resumeAllAnimation()},this).to({scaleX:1,scaleY:1},400).to({y:56},500)):(SoundManager.getInstance().playEffect(SoundConst.BIG_REWARD),egret.Tween.get(this).to({reward:e},5e3),egret.Tween.get(this.rewardGroup).to({scaleX:1.2,scaleY:1.2},1e3).wait(1e3).to({scaleX:1.2,scaleY:2,y:-300},1e3).wait(1e3).call(function(){i.showBigReward()},this).wait(5300).call(function(){i.hideBigReward(),i.isCanPlay=!0},this).to({scaleX:1,scaleY:1},400).to({y:56},500)):this.reward=e},Object.defineProperty(t.prototype,"reward",{get:function(){return this._rewardNum},set:function(e){this._rewardNum=e;var t=GameManager.numberToCommonStr(this._rewardNum);this.rewardLabel.text="x"+t},enumerable:!0,configurable:!0}),t.prototype.resetReward=function(e){var t=this;egret.Tween.removeTweens(this),egret.Tween.removeTweens(this.rewardGroup),this.reward=e,egret.Tween.get(this.rewardGroup).to({scaleX:1,scaleY:1,y:56},300),egret.Tween.get(this).wait(300).call(function(){t.reward=0})},t.prototype.showFiveAimation=function(e,t){var n=this;void 0===t&&(t=null),SoundManager.getInstance().playEffect(SoundConst.FIVE_SOUND),this.aGroup.visible=!0,this.bigRewardLabel.text="5个一样的",this.bigRewardLabel.size=80,this.bigRewardGroup.verticalCenter=0,this.bigRewardGroup.scaleX=.5,this.bigRewardGroup.scaleY=.5,e.Data?this.gameScence.pent.showKuang(e.Data.Line,e.Positions):this.gameScence.pent.showkuang2(e.Positions),egret.Tween.removeTweens(this.bigRewardGroup),egret.Tween.get(this.bigRewardGroup).to({scaleX:1.35,scaleY:1.35},800).to({scaleX:.5,scaleY:.5},800).to({scaleX:1.35,scaleY:1.35},800).to({scaleX:.5,scaleY:.5},800).to({scaleX:1.35,scaleY:1.35},800).call(function(){n.hideFiveAnimation(),t&&t()},this)},t.prototype.hideFiveAnimation=function(){egret.Tween.removeTweens(this.bigRewardGroup),this.aGroup.visible=!1,this.gameScence.pent.clearAll()},t.prototype.showBigReward=function(e){var t=this;void 0===e&&(e=null),this.aGroup.visible=!0,this.bigRewardLabel.text="大奖",this.bigRewardLabel.size=150,this.bigRewardGroup.scaleX=1,this.bigRewardGroup.scaleY=1,this.bigRewardGroup.verticalCenter=-150,egret.Tween.removeTweens(this.bigRewardGroup),egret.Tween.get(this.bigRewardGroup).to({scaleX:1.3,scaleY:1.3},550).to({scaleX:1,scaleY:1},550).to({scaleX:1.3,scaleY:1.3},550).to({scaleX:1,scaleY:1},550).to({scaleX:1.3,scaleY:1.3},550).to({scaleX:1,scaleY:1},550).to({scaleX:1.3,scaleY:1.3},550).to({scaleX:1,scaleY:1},550).to({scaleX:1.3,scaleY:1.3},550).to({scaleX:1,scaleY:1},550).to({scaleX:1.3,scaleY:1.3},550).to({scaleX:1,scaleY:1},550).call(function(){t.hideBigReward(),e&&e()},this),this.rewardMc||(this.rewardMc=game.MCUtils.getMc("reward"),this.mcGroup.addChild(this.rewardMc),this.rewardMc.x=this.aGroup.width/2,this.rewardMc.y=this.aGroup.height/2+30),this.rewardMc.visible=!0,this.rewardMc.gotoAndPlay("a0",-1)},t.prototype.hideBigReward=function(){egret.Tween.removeTweens(this.bigRewardGroup),this.rewardMc&&(this.rewardMc.visible=!1,this.rewardMc.stop()),this.aGroup.visible=!1},t}(core.BaseUI);__reflect(MainScenceUI.prototype,"MainScenceUI");var Reel=function(e){function t(){var t=e.call(this)||this;return t.isAction=!1,t.curReelData=["M1","M1","M2"],t.targetReelData=["M1","0","M2"],t.reelSpeed=100,t.curTime=0,t.index=0,t.aIndex=0,t.stopState=!1,t.skinName=ReelSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.ENTER_FRAME,this.onFrame,this)},t.prototype.showAnimation=function(e){var t=this.kGroup.getChildAt(e+1);t.goAnimation()},t.prototype.hideAnimation=function(e){var t=this.kGroup.getChildAt(e+1);t.hideAnimation()},t.prototype.resumeAllAnimation=function(){for(var e=0;e<this.kGroup.numChildren;e++){var t=this.kGroup.getChildAt(e);t.resumeAnimation()}},t.prototype.pauseAllAnimation=function(){for(var e=0;e<this.kGroup.numChildren;e++){var t=this.kGroup.getChildAt(e);t.stopAniamtion()}},t.prototype.clearAllAnimation=function(){for(var e=0;e<this.kGroup.numChildren;e++){var t=this.kGroup.getChildAt(e);t.hideAnimation()}},t.prototype.onFrame=function(){if(this.isAction)for(var e=0;e<this.kGroup.numChildren;e++){var n=this.kGroup.getChildAt(e);if(n.y+=this.reelSpeed,n.y>=this.height){var i=GameConfig.speedPlay?t.QUK_TIME:t.TIME,o=GameConfig.speedPlay?[200,350,500,650,800]:[0,400,730,930,1030];if(egret.getTimer()-this.curTime>i+o[this.index])return this.isAction=!1,this.overReel(),void console.log("-----------------3");n.y=this.kGroup.getChildAt(0).y-this.kGroup.getChildAt(0).height,n.value="M"+Math.ceil(9*Math.random()),n.setVir(!0),this.kGroup.setChildIndex(n,0)}}},t.prototype.overReel=function(){var e=this;egret.Tween.removeTweens(this),this.stopState||SoundManager.getInstance().playEffect(SoundConst.REELEND);for(var t=function(t){var i=n.kGroup.getChildAt(t);egret.Tween.removeTweens(i);var o=void 0;o=t*i.height-i.height,i.y=n.stopState?o:t*i.height-i.height+100,i.value=t>0&&4>t?n.curReelData[t-1]:"M"+Math.ceil(9*Math.random()),i.setVir(!1);var r=n.stopState?0:300;egret.Tween.get(i).to({y:o},r,egret.Ease.cubicOut).call(function(){4==e.index&&t==e.kGroup.numChildren-1&&core.NotifyManager.getInstance().sendNotify(core.NotifyConst.LOGIC_ROUNDOVER)},n)},n=this,i=0;i<this.kGroup.numChildren;i++)t(i)},t.prototype.initData=function(){for(var e=0;e<this.kGroup.numChildren;e++){var t=this.kGroup.getChildAt(e);t.value=e>0&&4>e?this.curReelData[e-1]:"M"+Math.ceil(9*Math.random())}},t.prototype.start=function(){for(var e=this,t=0;t<this.kGroup.numChildren;t++){var n=this.kGroup.getChildAt(t),i=n.y-50;egret.Tween.get(n).to({y:i},100).to({y:i+50},100)}this.curTime=egret.getTimer()+99999,egret.Tween.get(this).wait(200).call(function(){e.isAction=!0,e.stopState=!1},this)},t.prototype.stop=function(){this.isAction=!1,this.stopState=!0,this.overReel()},t.ShowNum=3,t.TIME=700,t.QUK_TIME=200,t.STOPTIME=200,t.QUK_STOPTIME=100,t}(eui.Component);__reflect(Reel.prototype,"Reel");var ReelItem=function(e){function t(){var t=e.call(this)||this;return t.isVir=!1,t.isA=!1,t.skinName=ReelItemSkin,t}return __extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,void 0!=this.value&&(this.icons.source=this._value+"_icon_png",this.icons.visible=!0,this.vIcon.visible=!1)},enumerable:!0,configurable:!0}),t.prototype.setVir=function(e){if(this.isVir=e,this.isVir){this.icons.visible=!1,this.vIcon.visible=!0;var t="blur"+Math.floor(12*Math.random())+"_png";this.vIcon.source=t}else this.icons.source=this._value+"_icon_png",this.icons.visible=!0,this.vIcon.visible=!1},t.prototype.goAnimation=function(){this.isA||(this.isA=!0,egret.Tween.removeTweens(this.icons),this.value=this._value,this.aIcon.visible=!0,egret.Tween.get(this.icons,{loop:!0}).to({scaleX:.8,scaleY:.8},600).to({scaleX:1,scaleY:1},600))},t.prototype.stopAniamtion=function(){egret.Tween.pauseTweens(this.icons)},t.prototype.resumeAnimation=function(){egret.Tween.resumeTweens(this.icons)},t.prototype.hideAnimation=function(){this.isA=!1,this.aIcon.visible=!1,egret.Tween.removeTweens(this.icons),this.icons.scaleX=1,this.icons.scaleY=1,this.value=this._value},t}(eui.Component);__reflect(ReelItem.prototype,"ReelItem");var SetBar=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.musicCheckBox.addEventListener(egret.Event.CHANGE,this.onChange,this),this.musicCheckBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCheck,this),core.TimerManager.instance.addTick(200,-1,this.onFrame,this),this.setBtn.addEventListener(egret.Event.CHANGE,this.onChange,this),this.checkList.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver2,this),this.volueSlider.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver1,this),this.volueSlider.addEventListener("MyHslider_STOP",this.onTouchStop,this),this.volueSlider.addEventListener(egret.Event.CHANGE,this.onVolueChange,this),this.checkList.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOut2,this),this.volueSlider.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOut1,this),this.musicCheckBox.selected=SoundManager.getInstance().getBgVolume()>0?!0:!1,this.checkList.checkBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.checkList.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.checkList.hisBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.checkList.rewardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this)},t.prototype.onTab=function(e){switch(e.currentTarget){case this.checkList.checkBtn:core.UIManager.openUI(core.UIConst.SetUI,core.LayerManager.Layer_Top),this.misShow=!1,this.checkisShow=!1;break;case this.checkList.helpBtn:this.misShow=!1,this.checkisShow=!1,core.UIManager.openUI(core.UIConst.HelpDesUI,core.LayerManager.Layer_Top);break;case this.checkList.hisBtn:openHistory(),this.misShow=!1,this.checkisShow=!1;break;case this.checkList.rewardBtn:core.UIManager.openUI(core.UIConst.HelpUI,core.LayerManager.Layer_Top),this.misShow=!1,this.checkisShow=!1}},t.prototype.closeall=function(){this.misShow=!1,this.checkisShow=!1},t.prototype.onChange=function(e){var t=this,n=core.UIManager.getUI(core.UIConst.MainScenceUI),i=e.currentTarget;i==this.musicCheckBox?"rollOver"==i.currentState||"rollOverAndSelected"==i.currentState||"down"==i.currentState||"downAndSelected"==i.currentState?(this.misShow=!0,this.volueSlider.setVolues(100*SoundManager.getInstance().getEffectVolume()),this.checkisShow=!1,egret.clearTimeout(this.mt),n.topList.hide()):this.mt=egret.setTimeout(function(){t.misShow=!1},this,1e3):i==this.setBtn&&(n.topList.hide(),"rollOver"==i.currentState?(this.checkisShow=!0,this.misShow=!1,egret.clearTimeout(this.ct)):this.ct=egret.setTimeout(function(){t.checkisShow=!1},this,1e3))},t.prototype.onTouchStop=function(){this.misShow=!1},t.prototype.onOver1=function(e){this.misShow=!0,this.checkisShow=!1,egret.clearTimeout(this.mt),this.volueSlider.setVolues(100*SoundManager.getInstance().getEffectVolume())},t.prototype.onOver2=function(e){egret.clearTimeout(this.ct),this.checkisShow=!0,this.misShow=!1},t.prototype.onOut1=function(e){var t=this;this.volueSlider.hitTestPoint(e.stageX,e.stageY)||(this.mt=egret.setTimeout(function(){t.misShow=!1},this,1e3))},t.prototype.onOut2=function(e){var t=this;this.checkList.hitTestPoint(e.stageX,e.stageY)||(this.ct=egret.setTimeout(function(){t.checkisShow=!1},this,1e3))},t.prototype.onFrame=function(){this.misShow?(this.volueSlider.y=0,this.volueSlider.enabled=!0,egret.Tween.removeTweens(this.volueSlider),egret.Tween.get(this.volueSlider).to({alpha:1},200)):0==this.misShow&&0==this.volueSlider.isPlaying&&(this.musicCheckBox.currentState="",this.volueSlider.enabled=!1,egret.Tween.removeTweens(this.volueSlider),egret.Tween.get(this.volueSlider).to({alpha:0},200)),this.checkisShow?(this.checkList.y=0,this.checkList.enabled=!0,egret.Tween.removeTweens(this.checkList),egret.Tween.get(this.checkList).to({alpha:1},200)):(this.setBtn.currentState="",this.checkList.enabled=!1,egret.Tween.removeTweens(this.checkList),egret.Tween.get(this.checkList).to({alpha:0},200)),this.musicCheckBox.updataImg()},t.prototype.onVolueChange=function(){var e=this.volueSlider.value/this.volueSlider.maximum;SoundManager.getInstance().setBgVolume(e),SoundManager.getInstance().setEffectVolume(e),this.musicCheckBox.valume=e},t.prototype.onCheck=function(){core.UIManager.getUI(core.UIConst.MainScenceUI);if(this.musicCheckBox.selected){this.musicCheckBox.valume=SoundManager.getInstance().lastVolume,SoundManager.getInstance().setBgVolume(SoundManager.getInstance().lastVolume),SoundManager.getInstance().setEffectVolume(SoundManager.getInstance().lastVolume);var e=SoundManager.getInstance().lastVolume*this.volueSlider.maximum;this.volueSlider.setVolues(e),SoundManager.getInstance().open()}else SoundManager.getInstance().saveVolue(),this.volueSlider.setVolues(0),SoundManager.getInstance().setBgVolume(0),SoundManager.getInstance().setEffectVolume(0),this.musicCheckBox.valume=this.volueSlider.value,SoundManager.getInstance().close()},t}(eui.Component);__reflect(SetBar.prototype,"SetBar");var ShowItem=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.tx=0,t.ty=0,t.skinName=ShowItemSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.anchorOffsetX=45,this.anchorOffsetY=45,this.tGroup.scaleX=.84,this.tGroup.scaleY=.84,this.nameLabel.alpha=0,this.tGroup.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.tGroup.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),mouse.setButtonMode(this,!0)},t.prototype.onBegin=function(e){this.tx=e.stageX,this.ty=e.stageY},t.prototype.onEnd=function(e){Math.abs(e.stageX-this.tx)<3&&Math.abs(e.stageY-this.ty)<3&&window.open("http://www.baidu.com","_blank","height=833, width=1065, top=0, left=0, toolbar=no, menubar=no, scrollbars=no,resizable=no,location=no, status=no")},t.prototype.setData=function(e){this.data=e,this.nameLabel.text=e.name},t.prototype.goIndex=function(e){void 0===e&&(e=0),this.startpos=e,egret.Tween.removeTweens(this);var t=this.startpos+this.index*(TopList.WIDTH+TopList.DISTANCE)+TopList.WIDTH/2;this.x=t},t.prototype.goIndexAimation=function(e){void 0===e&&(e=0),this.startpos=e,egret.Tween.removeTweens(this);var t=this.startpos+this.index*(TopList.WIDTH+TopList.DISTANCE)+TopList.WIDTH/2;egret.Tween.get(this).to({x:t},300)},t.prototype.goIndexStep=function(e){this.startpos+=e,egret.Tween.removeTweens(this);var t=this.startpos+this.index*(TopList.WIDTH+TopList.DISTANCE)+TopList.WIDTH/2;this.x=t},t.prototype.goAnimation=function(e){void 0===e&&(e=-1),egret.Tween.removeTweens(this);var t=this.startpos+this.index*(TopList.WIDTH+TopList.DISTANCE)+TopList.WIDTH/2,n=t+2*e*TopList.DISTANCE;egret.Tween.get(this).to({x:n},200)},t.prototype.goBack=function(){egret.Tween.removeTweens(this);var e=this.startpos+this.index*(TopList.WIDTH+TopList.DISTANCE)+TopList.WIDTH/2;egret.Tween.get(this).to({x:e},300)},t.prototype.onRollOver=function(){egret.Tween.removeTweens(this.tGroup),egret.Tween.removeTweens(this.nameLabel),egret.Tween.get(this.tGroup).to({scaleX:1,scaleY:1},300),egret.Tween.get(this.nameLabel).to({alpha:1},300),this.dispatchEventWith("rollchangeover",!1,this.index)},t.prototype.onRollOut=function(){egret.Tween.removeTweens(this.tGroup),egret.Tween.removeTweens(this.nameLabel),egret.Tween.get(this.tGroup).to({scaleX:.84,scaleY:.84},300),egret.Tween.get(this.nameLabel).to({alpha:0},300),this.dispatchEventWith("rollchangeout",!1,this.index)},t}(eui.Component);__reflect(ShowItem.prototype,"ShowItem");var TextButton=function(e){function t(){var t=e.call(this)||this;return t.isselected=!1,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),mouse.setButtonMode(t,!0),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this),this.label0.alpha=1,this.label1.alpha=0},t.prototype.onRemove=function(){this.onRollOut(),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this)},t.prototype.setSelected=function(e){this.isselected=e,this.label1.textColor=this.isselected?2598399:5424622,e?this.onRollOver():this.onRollOut()},t.prototype.onRollOver=function(){egret.Tween.removeTweens(this.label0),egret.Tween.removeTweens(this.label1),egret.Tween.get(this.label0).to({alpha:0},200),egret.Tween.get(this.label1).to({alpha:1},200)},t.prototype.onRollOut=function(){this.isselected||(egret.Tween.removeTweens(this.label0),egret.Tween.removeTweens(this.label1),egret.Tween.get(this.label0).to({alpha:1},200),egret.Tween.get(this.label1).to({alpha:0},200))},t}(eui.Button);__reflect(TextButton.prototype,"TextButton");var TopList=function(e){function t(){var t=e.call(this)||this;return t.isShow=!1,t.isCanMove=!1,t.moveState=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.leftBtn.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onLeftBtnRollOver,this),this.leftBtn.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onLeftBtnRollOut,this),this.rightBtn.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRightBtnRollOver,this),this.rightBtn.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRightBtnRollOut,this),core.TimerManager.instance.addTick(-20,-1,this.onFrame,this),mouse.setButtonMode(this.leftBtn,!0),mouse.setButtonMode(this.rightBtn,!0),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this)},t.prototype.onBegin=function(e){this.isCanMove&&(this.tx=e.stageX,this.ty=e.stageY)},t.prototype.onMove=function(e){if(this.isCanMove){var n=e.stageX-this.tx;this.tx=e.stageX,this.ty=e.stageY;for(var i=0;i<this.contentGroup.numChildren;i++){var o=this.contentGroup.getChildAt(i);o.goIndexStep(n)}this.startpox+=n,this.startpox>=40?this.leftBtn.visible=!1:this.leftBtn.visible=!0;var r=this.contentGroup.numChildren*t.WIDTH+(this.contentGroup.numChildren-1)*t.DISTANCE;this.startpox<=this.contentGroup.width-r-40?this.rightBtn.visible=!1:this.rightBtn.visible=!0}},t.prototype.onEnd=function(e){if(this.isCanMove){if(this.startpox>40){for(var n=0;n<this.contentGroup.numChildren;n++){var i=this.contentGroup.getChildAt(n);i.goIndexAimation(40)}this.startpox=40}var o=this.contentGroup.numChildren*t.WIDTH+(this.contentGroup.numChildren-1)*t.DISTANCE;if(this.startpox<this.contentGroup.width-o-40){for(var n=0;n<this.contentGroup.numChildren;n++){var i=this.contentGroup.getChildAt(n);i.goIndexAimation(this.contentGroup.width-o-40)}this.startpox=this.contentGroup.width-o-40}}},t.prototype.show=function(){this.isShow=!0,egret.Tween.get(this.parent).to({y:0,alpha:1},600)},t.prototype.hide=function(){this.isShow=!1,egret.Tween.get(this.parent).to({y:-154,alpha:0},600);var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.setSelected(-1)},t.prototype.setArr=function(e){var t=this;egret.Tween.get(this.contentGroup).to({alpha:0},200).call(function(){t.contentGroup.removeChildren();for(var n=0;n<e.length;n++){var i=new ShowItem;i.addEventListener("rollchangeover",t.onRollOver,t),i.addEventListener("rollchangeout",t.onRollOut,t),t.contentGroup.addChild(i),i.setData(e[n]),i.y=61.5,i.index=n}t.updataPosition(),egret.Tween.get(t.contentGroup).to({alpha:1},200)},this)},t.prototype.updataPosition=function(){var e,n=this.contentGroup.numChildren*t.WIDTH+(this.contentGroup.numChildren-1)*t.DISTANCE;n>=this.contentGroup.width?(e=40,this.leftBtn.visible=!1,this.rightBtn.visible=!0,this.isCanMove=!0):(e=this.contentGroup.width/2-n/2,this.leftBtn.visible=!1,this.rightBtn.visible=!1,this.isCanMove=!1),this.startpox=e;for(var i=0;i<this.contentGroup.numChildren;i++){var o=this.contentGroup.getChildAt(i);o.goIndex(e)}},t.prototype.onRollOver=function(e){egret.clearTimeout(this.cleart);for(var t=e.data,n=0;t>n;n++){var i=this.contentGroup.getChildAt(n);i.goAnimation(-1)}for(var n=t+1;n<this.contentGroup.numChildren;n++){var o=this.contentGroup.getChildAt(n);o.goAnimation(1)}var r=this.contentGroup.getChildAt(t);r.goBack()},t.prototype.onRollOut=function(e){var t=this;e.data;this.cleart=egret.setTimeout(function(){for(var e=0;e<t.contentGroup.numChildren;e++){var n=t.contentGroup.getChildAt(e);n.goBack()}},this,100)},t.prototype.onLeftBtnRollOver=function(){this.moveState=-1,this.leftBtn.source="left_hover_png"},t.prototype.onLeftBtnRollOut=function(){this.moveState=0,this.leftBtn.source="left_png"},t.prototype.onRightBtnRollOver=function(){this.moveState=1,this.rightBtn.source="left_hover_png"},t.prototype.onRightBtnRollOut=function(){this.moveState=0,this.rightBtn.source="left_png"},t.prototype.onFrame=function(){if(-1==this.moveState)if(this.startpox<=30){for(var e=0;e<this.contentGroup.numChildren;e++){var n=this.contentGroup.getChildAt(e);n.goIndexStep(10)}this.startpox+=10,this.rightBtn.visible=!0}else this.leftBtn.visible=!1;else if(1==this.moveState){var i=this.contentGroup.numChildren*t.WIDTH+(this.contentGroup.numChildren-1)*t.DISTANCE;if(this.startpox>=this.contentGroup.width-i+10-40){for(var e=0;e<this.contentGroup.numChildren;e++){var n=this.contentGroup.getChildAt(e);n.goIndexStep(-10)}this.startpox-=10,this.leftBtn.visible=!0}else this.rightBtn.visible=!1}},t.DISTANCE=9,t.WIDTH=76,t.HEIGHT=76,t}(eui.Component);__reflect(TopList.prototype,"TopList");var GameManager=function(e){function t(){var t=e.call(this)||this;return t.gameState=0,t.isStart=!0,t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){var e=this;GameController.getInstance().clearRedis(),GameConfig.gameModle=GameType.GameModule.trueModle,core.NotifyManager.getInstance().registerNotify(core.NotifyConst.NET_INIT,this.onNetgGmeInit,this),core.NotifyManager.getInstance().registerNotify(core.NotifyConst.NET_PLAY,this.onNetGamePlay,this),core.NotifyManager.getInstance().registerNotify(core.NotifyConst.LOGIC_ROUNDOVER,this.onLogicGameOver,this),core.NotifyManager.getInstance().registerNotify(core.NotifyConst.NET_TOUCHTOKEN,this.onNetTouchToken,this),sockets.SocketMananger.getInstance().connectServer(function(){e.initData(),Commond.sendInitGame()},this),window.addEventListener("message",function(e){if("closedesui"!=e.data&&"loadhide"!=e.data&&"loadshow"!=e.data){core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Tip);var t=core.UIManager.getUI(core.UIConst.StipsUI);t.showConfirBtn(e.data,function(){core.UIManager.closeUI(core.UIConst.StipsUI),0!=sockets.SocketMananger.getInstance().netState&&NetUI.getInstance().showNetting()})}})},t.prototype.initData=function(){vo.GameData.slotInfo=new vo.SlotInfo,vo.GameData.slotInfo.readData(null),vo.GameData.slotInfo.readPlayAction(null)},t.prototype.onNetgGmeInit=function(e){var t=e;this.initAlysInitialData(t),core.LoadManger.getInstance().loadGroup(core.UIConst.NomalLoadingUI,"main",function(){core.UIManager.openUI(core.UIConst.MainScenceUI)},this)},t.prototype.initAlysInitialData=function(e){vo.GameData.initData=JSON.parse(JSON.stringify(e)),vo.GameData.balance=parseFloat(e.Value.TokenInfo.Balance+""),vo.GameData.reelArr.length=0,vo.GameData.slotInfo.resultArr=e.Value.Geninit.Main.ReelSymbols,vo.GameData.initData=e,vo.GameData.payData=e.Value.Paytables.Main.PayData},t.prototype.onNetGamePlay=function(e){this.initAlaysPlayData(e);var n=core.UIManager.getUI(core.UIConst.MainScenceUI),i=vo.GameData.balance-vo.GameData.betScoreArr[vo.GameData.betIndex]*vo.GameData.line;n.balanceLabel.text="￥"+t.numberToCommonStr(i),n.stopBtn.enabled=!0,n.stopBtn.visible=!0,n.gameScence.canStop()},t.prototype.initAlaysPlayData=function(e){vo.GameData.resultData=JSON.parse(JSON.stringify(e))},t.prototype.onNetTouchToken=function(e){},t.prototype.onLogicGameOver=function(){var e=this;console.log("游戏结束"),this.gameState=GameType.GameState.STOP;var n=core.UIManager.getUI(core.UIConst.MainScenceUI);n.startBtn.visible=!0,n.stopBtn.visible=!1,n.stopBtn.enabled=!1,n.startBtn.enabled=!0,n.updataText(!1),vo.GameData.autoPlayCount<=0&&(n.updataBtn(),n.infoBtn.enabled=!0,n.autoItem.autoBtn.enabled=!0,n.speedOffBtn.enabled=!0,n.speedOnBtn.enabled=!0,n.topMask.visible=!1,n.bottomMask.visible=!1),vo.GameData.initData.Value.TokenInfo.Balance=vo.GameData.resultData.Value.Balance,vo.GameData.balance=vo.GameData.initData.Value.TokenInfo.Balance,n.balanceLabel.text="￥"+t.numberToCommonStr(vo.GameData.balance);var i=vo.GameData.resultData,o=i.Value.SpinResult.Main.WinResults,r=this.getFiveArr(o),a=i.Value.SpinResult.TotalBet,s=i.Value.SpinResult.TotalWin,h=s/a,l=(vo.GameData.autoPlayCount>0&&GameConfig.speedPlay,3e3);h>=50&&(l=9e3),0==r.length?o.length>0?(n.showWin(o),egret.setTimeout(function(){e.doNext()},this,l),egret.setTimeout(function(){e.isStart=!0},this,200)):egret.setTimeout(function(){e.isStart=!0,e.doNext()},this,200):n.showFiveAimation(r[0],function(){n.showWin(o),egret.setTimeout(function(){e.isStart=!0,e.doNext()},e,l)})},t.prototype.doNext=function(){var e=core.UIManager.getUI(core.UIConst.MainScenceUI);if(t.getInstance().gameState=GameType.GameState.STOP,e.updataUI(),vo.GameData.autoPlayCount<=0&&(e.updataBtn(),e.infoBtn.enabled=!0,e.autoItem.autoBtn.enabled=!0,e.speedOffBtn.enabled=!0,e.speedOnBtn.enabled=!0,e.topMask.visible=!1,e.bottomMask.visible=!1),vo.GameData.autoPlayCount>0)this.isStart&&(e.hideWin(),this.startGame());else if(e.autoItem.autoBtn.visible=!0,e.autoItem.autoStopGroup.visible=!1,e.autoItem.sMainGroup.visible=!0,GameConfig.autoPlay){vo.GameData.autoPlayCount=0,GameConfig.autoPlay=!1,core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top);var n=core.UIManager.getUI(core.UIConst.StipsUI);n.showAutoBtn(0,"自动游戏已停止。\n您想重复自动游戏吗？",function(){core.UIManager.closeUI(core.UIConst.StipsUI),e.autoItem.resetDo()},function(){core.UIManager.closeUI(core.UIConst.StipsUI)})}},t.prototype.noMoney=function(){core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top);var e=(core.UIManager.getUI(core.UIConst.MainScenceUI),core.UIManager.getUI(core.UIConst.StipsUI));e.showNotmoney(0,"余额不足，是否要存款?",function(){core.UIManager.closeUI(core.UIConst.StipsUI)},function(){core.UIManager.closeUI(core.UIConst.StipsUI)})},t.prototype.stopchannel=function(){this.rewardChannel&&this.rewardChannel.stop(),this.startChannel&&this.startChannel.stop()},t.prototype.startGame=function(){var e=this;if(this.isStart){var n=core.UIManager.getUI(core.UIConst.MainScenceUI);if(n.hideWin(),n.autoItem.hideItem(),this.stopchannel(),vo.GameData.balance<vo.GameData.betScoreArr[vo.GameData.betIndex]*vo.GameData.line)GameConfig.autoPlay=!1,vo.GameData.autoPlayCount=0,this.noMoney();else if(t.getInstance().gameState==GameType.GameState.STOP){t.getInstance().gameState=GameType.GameState.PLAYING,GameConfig.autoPlay&&(vo.GameData.autoPlayCount-=1,vo.GameData.autoPlayCount<0&&(vo.GameData.autoPlayCount=0),n.autoItem.autoCountLabel.text=vo.GameData.autoPlayCount+"");var i=vo.GameData.resultData,o=0;o=i?i.Value.Dollar:0,n.resetReward(o),Commond.sendPlay(),n.gameScence.startReel(),SoundManager.getInstance().playMusic(SoundConst.START,1).then(function(t){e.startChannel=t}),this.isStart=!1,n.startBtn.visible=!1,n.startBtn.enabled=!1,n.stopBtn.visible=!0,n.stopBtn.enabled=!1,n.infoBtn.enabled=!1,n.betSubBtn.enabled=n.betAddBtn.enabled=!1,n.lineSubBtn.enabled=n.lineAddBtn.enabled=!1,n.autoItem.autoBtn.enabled=!1,n.speedOffBtn.enabled=!1,n.speedOnBtn.enabled=!1,n.topMask.visible=!0,n.bottomMask.visible=!0}}},t.prototype.stopGame=function(){var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.gameScence.stopReel(),e.stopBtn.visible=!1,e.startBtn.visible=!0,SoundManager.getInstance().playEffect(SoundConst.STOP)},t.numberToCommonStr=function(e){for(var t=e+"",n=t.split("."),i=n[0],o="",r=0,a=i.length-1;a>=0;a--)o=i.substr(a,1)+o,r++,3==r&&a>0&&(o=","+o,r=0);return n.length>1?1==n[1].length?o+="."+n[1]+"0":o=o+"."+n[1].substr(0,2):o+=".00",o},t.numberToCommonStr1=function(e){for(var t=e+"",n=t.split("."),i=n[0],o="",r=0,a=i.length-1;a>=0;a--)o=i.substr(a,1)+o,r++,3==r&&a>0&&(o=","+o,r=0);return n.length>1&&(1==n[1].length?o+="."+n[1]+"0":o=o+"."+n[1].substr(0,2)),o},t.prototype.getMoneyIsFull=function(){return vo.GameData.balance>=vo.GameData.betScoreArr[vo.GameData.betIndex]?!0:!1},t.prototype.getFiveArr=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];5==i.Positions.length&&t.push(i)}return t},t}(egret.EventDispatcher);__reflect(GameManager.prototype,"GameManager");var ServerManager=function(e){function t(){var t=e.call(this)||this;return GameConfig.gameModle=GameType.GameModule.falseModle,t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.acpetCommond=function(e){var t;switch(e.Parameter.Action){case"Initial":t=JSON.parse(JSON.stringify(serverData.initData));break;case"Play":t=this.resetPlay(e)}GameConfig.gameModle==GameType.GameModule.falseModle?core.NotifyManager.getInstance().sendNotify(e.Parameter.Action,t):sockets.SocketMananger.getInstance().sendMessage(e)},t.prototype.resetPlay=function(e){var t=e.Parameter,n=JSON.parse(JSON.stringify(serverData.playData));n.ActionType=t.Type,n.ActionParameter=t,n.Value.Main.ReelResults=[{Idx:0,Pos:Math.floor(14*Math.random())},{Idx:1,Pos:Math.floor(14*Math.random())},{Idx:2,Pos:Math.floor(14*Math.random())}];for(var i=[[],[],[]],o=serverData.initData.Value.Symbolstripes.Main.Stripes,r=0;r<o.length;r++)for(var a=o[r].Symbols,s=n.Value.Main.ReelResults[r].Pos+1>a.length-1?0:n.Value.Main.ReelResults[r].Pos+1,h=0;h<Reel.ShowNum;h++)i[r].push(a[(s+h)%a.length]);var l=[];"M0"==i[0][1]&&"M0"==i[1][1]&&"M0"==i[2][1]?l.push({Type:"Line",Symbol:"M0",SymbolCount:3,Positions:[{X:0,Y:1},{X:1,Y:1},{X:2,Y:1}],Data:{Line:2,PayType:"RL"},Reward:{BetMultiplier:88},Bet:1,Win:88*t.Denom,Multipliers:[100,1]}):"M1"==i[0][1]&&"M1"==i[1][1]&&"M1"==i[2][1]?l.push({Type:"Line",Symbol:"M1",SymbolCount:3,Positions:[{X:0,Y:1},{X:1,Y:1},{X:2,Y:1}],Data:{Line:2,PayType:"RL"},Reward:{BetMultiplier:58},Bet:1,Win:58*t.Denom,Multipliers:[100,1]}):"M2"==i[0][1]&&"M2"==i[1][1]&&"M2"==i[2][1]?l.push({Type:"Line",Symbol:"M2",SymbolCount:3,Positions:[{X:0,Y:1},{X:1,Y:1},{X:2,Y:1}],Data:{Line:2,PayType:"RL"},Reward:{BetMultiplier:28},Bet:1,Win:28*t.Denom,Multipliers:[100,1]}):"BN"!=i[0][1]&&"BN"!=i[1][1]&&"BN"!=i[2][1]&&l.push({Type:"all",Symbol:"Random",SymbolCount:3,Positions:[{X:0,Y:1},{X:1,Y:1},{X:2,Y:1}],Data:{Line:2,PayType:"RL"},Reward:{BetMultiplier:8},Bet:1,Win:8*t.Denom,Multipliers:[100,1]}),n.Value.Main.WinResults=l,n.Value.Main.ReelSymbols=i;
for(var c=0,r=0;r<l.length;r++)c+=l[r].Win;return n.Value.Main.TotalWin=c,n.Value.Main.TotalWinDollar=c/GameConfig.bili,serverData.initData.Value.TokenInfo.Balance=serverData.initData.Value.TokenInfo.Balance+n.Value.Main.TotalWinDollar-t.Denom/GameConfig.bili,n.Value.Balance=serverData.initData.Value.TokenInfo.Balance,n},t.prototype.isallNum=function(e,t){for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},t.prototype.isAllW=function(e){for(var t=0;t<e.length;t++)for(var n=e[t],i=n[0],o=0;o<n.length;o++)if(i!=n[o])return!1;return!0},t}(egret.EventDispatcher);__reflect(ServerManager.prototype,"ServerManager");var serverData=function(){function e(){}return e.initData={Action:"Initial",ProcessTime:{Spend:0},ScreenData:{ScreenActions:[{Status:"Initial"}]},IsSuccess:!0,Marquees:"",Message:"",kick_rightnow:!1,Value:{MC_Reset_At:"2019-04-24 10:11:02",SpinConstraint:{Lines:[1,2,3,4,5],MinLineBet:1,MaxLineBet:1e3,MinDenom:1,MaxDenom:2147483647},FreeLine:[],JackpotPaytables:{1:279,2:558,3:837,4:1116},Symbolstripes:{Main:{Stripes:[{Symbols:["M2","BN","M2","BN","M0","BN","M1","BN","M2","BN","M1","BN","M2","BN","M2","BN"]},{Symbols:["M2","BN","M2","BN","M0","BN","M1","BN","M2","BN","M1","BN","M2","BN","M2","BN"]},{Symbols:["M2","BN","M2","BN","M0","BN","M1","BN","M2","BN","M1","BN","M2","BN","M2","BN"]}]}},Geninit:{Main:{ReelResults:[{Idx:0,Pos:0},{Idx:1,Pos:0},{Idx:2,Pos:0}],ReelSymbols:[["WW","WW","WW"],["WW","WW","WW"],["WW","WW","WW"]],StripesCode:"E0qVFEFC97AqoF0riEJANg",TotalBet:0,TotalWin:0,WinResults:[]}},Denoms:[500,1e3,2e3,5e3,1e4,2e4,5e4,1e5,2e5,25e4,5e5,1e6,2e6],Status:{CurrentAction:"Initial",CurrentActionType:"slot",GameLevel:"1",GameLevel_UpCount:"0"},Actions:null,LastRound:{LastRoundId:"3e9e115565226945178",LastRoundResult:{RoundId:"3e9e115565226945178",SubRoundId:0,SessionData:{Bet:10,Multiply:1},TotalBet:1e3,TotalWin:0,TotalBetDollar:.1,TotalWinDollar:0,Denom:10,ScreenData:[],Main:{MathVersion:"triple_monkey",TotalBet:1e3,TotalWin:0,TotalBetDollar:.1,TotalWinDollar:0,Denom:10,ReelSymbols:[["M1","M0","M0"],["M2","M4","M1"],["M2","M1","M2"]],WinResults:[]},Status:{CurrentAction:"Play",CurrentActionType:"slot",GameLevel:"1",GameLevel_UpCount:"0"},Actions:null}},TokenInfo:{Balance:10.2,Currency:"CNY",FrontEndDebug:1}}},e.playData={Action:"Play",ProcessTime:{Spend:0},ScreenData:{},IsSuccess:!0,Marquees:[],Message:"",kick_rightnow:!1,ActionType:"freeslot",ActionParameter:{Action:"Play",Type:"freeslot",Line:5,Bet:1,Denom:100,SessionData:{Bet:.05}},Value:{RoundId:"3e9e115565229947859",SubRoundId:0,SessionData:{Bet:.05},TotalBet:500,TotalWin:5e4,TotalBetDollar:.45,TotalWinDollar:.15,Denom:10,ScreenData:[],FreeLine:[],Main:{MathVersion:"triple_monkey",TotalBet:500,TotalWin:5e4,TotalBetDollar:.05,TotalWinDollar:5,Denom:10,ReelSymbols:[["M0","M0","M3"],["M1","M2","M3"],["M3","M2","M1"]],WinResults:[{Type:"Line",Symbol:"M2",SymbolCount:3,Positions:[{X:0,Y:1},{X:1,Y:1},{X:2,Y:1}],Data:{Line:2,PayType:"RL"},Bet:500,Win:5e4,Multipliers:[100,1]}],ReelResults:[{Idx:0,Pos:4},{Idx:1,Pos:16},{Idx:2,Pos:28}]},Status:{CurrentAction:"Play",CurrentActionType:"freeslot"},Actions:[],Balance:180583851.93}},e}();__reflect(serverData.prototype,"serverData");