function createBitmapByName(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t}function createBitmapFromSheet(e,t){void 0===t&&(t="gameRes");var n=RES.getRes(t),o=n.getTexture(e),i=new egret.Bitmap;return i.texture=o,i}function getTextureFromSheet(e,t){void 0===t&&(t="gameRes");var n=RES.getRes(t),o=n.getTexture(e);return o}var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}l((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(o){n=[6,o],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},core;!function(e){var t=function(){function e(e,t){this.callback=e,this.thisObj=t}return e}();e.Callback=t,__reflect(t.prototype,"core.Callback")}(core||(core={}));var core;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.EventDispatcher);e.BaseModel=t,__reflect(t.prototype,"core.BaseModel")}(core||(core={}));var BaseTips=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t}return __extends(t,e),t}(eui.Component);__reflect(BaseTips.prototype,"BaseTips");var core;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.eventPool=[],e.initSize(),e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdd,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemove,e),egret.MainContext.instance.stage.addEventListener(egret.StageOrientationEvent.ORIENTATION_CHANGE,e.onOChange,e),e}return __extends(n,t),n.prototype.onOChange=function(){},n.prototype.initSize=function(){this.top=0,this.left=0,this.bottom=0,this.right=0},n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.onAdd=function(){this.isShow=!0,this.initListener()},n.prototype.onRemove=function(){this.clearEvent(),e.NotifyManager.getInstance().removeRegister(this)},n.prototype.registerEvent=function(e,t,n,o){e.addEventListener(t,n,o),this.eventPool.push({target:e,type:t,callback:n,callbackobj:o})},n.prototype.clearEvent=function(){if(this.eventPool.length>0)for(var e=0;e<this.eventPool.length;e++){var t=this.eventPool[e].target,n=this.eventPool[e].type,o=this.eventPool[e].callback,i=this.eventPool[e].callbackobj;t.removeEventListener(n,o,i)}},n.prototype.initListener=function(){},n.prototype.addRegister=function(t,n,o){e.NotifyManager.getInstance().registerNotify(t,n,o)},n.prototype.removeRegister=function(t){e.NotifyManager.getInstance().removeRegister(t)},n.prototype.close=function(){this.isShow=!1,this.parent&&this.parent.removeChild(this)},n}(eui.Component);e.BaseUI=t,__reflect(t.prototype,"core.BaseUI");var n=function(){function e(){}return e}();e.EventObj=n,__reflect(n.prototype,"core.EventObj")}(core||(core={}));var MyCompoment=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAdd=function(){},t.prototype.onRemove=function(){},t}(eui.Component);__reflect(MyCompoment.prototype,"MyCompoment");var core;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setData=function(e){this.data=e,null==this.data?this.visible=!1:(this.alpha=1,this.visible=!0)},t}(eui.Component);e.ScrollItem=t,__reflect(t.prototype,"core.ScrollItem")}(core||(core={}));var SoundConst=function(){function e(){}return e.BUTTON="button_mp3",e.START="start_mp3",e.SPEED_START="start_mp3",e.HOUZI="houzi_mp3",e.REEL_START="reelstart_mp3",e.REEL_END="reelend_mp3",e.ALLWIN="allwin_mp3",e.BIG_REWARD="bigreward_mp3",e.BIG_REWARDSHOWS="bigrewardshows_mp3",e.FREE_SHOW="freeslot_show_mp3",e}();__reflect(SoundConst.prototype,"SoundConst");var TipsManager=function(e){function t(){var t=e.call(this)||this;return t.showY=800,t.isDebug=!0,t.tipsArr=[],core.FrameEventCenter.getInstance().addFrameEventListener(t.onEnterFrame,t),t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.showLog=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.isDebug&&console.log.apply(console,[e].concat(t))},t.prototype.showTips=function(e,t){var n=this;void 0===t&&(t=1);var o=function(){var o;switch(t){case 0:o=new NormalErrorTips;break;case 1:o=new NormalOkTips}if(o.textTips.text=e,n.tipsArr.push(o),o.x=GameConfig.WIDTH/2-o.width/2+80,n.tipsArr.length>1){var i=n.tipsArr[n.tipsArr.length-2];if(i.y<n.showY-i.height)o.y=n.showY;else if(i.y<GameConfig.HEIGHT-i.height-o.height)o.y=i.y+i.height;else{o.y=i.y+i.height;for(var r=0;r<n.tipsArr.length;r++)n.tipsArr[r].y-=o.height}}else 1==n.tipsArr.length&&(o.y=n.showY);core.LayerManager.getInstance().addUI(o,core.LayerManager.Layer_Tip)};o()},t.prototype.onEnterFrame=function(e){this.tipsArr.length>0&&this.tipsArr[0].alpha<=0&&(this.tipsArr[0].parent.removeChild(this.tipsArr[0]),this.tipsArr.shift());for(var t=0;t<this.tipsArr.length;t++)this.tipsArr[t].y-=4,this.tipsArr[t].alpha-=.004},t}(egret.EventDispatcher);__reflect(TipsManager.prototype,"TipsManager");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function o(o){t.call(n,o,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?o(i):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Dictionary=function(){function e(){this.m_keys=[],this.m_values=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.m_keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this.m_values.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this.m_keys.concat()},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.m_keys.indexOf(e)},e.prototype.add=function(e,t){var n=this.indexOf(e);n>=0?this.m_values[n]=t:(this.m_keys.push(e),this.m_values.push(t))},e.prototype.get=function(e){var t=this.indexOf(e);return t>=0?this.m_values[t]:null},e.prototype.remove=function(e){var t=this.indexOf(e);return t>=0?(this.m_keys.splice(t,1),this.m_values.splice(t,1)[0]):null},e.prototype.clear=function(){this.m_keys.length=0,this.m_values.length=0},e.prototype.getRandomData=function(){var e=Math.random()*this.keys.length<<0;return this.m_values[e]},e}();__reflect(Dictionary.prototype,"Dictionary");var core;!function(e){var t=function(){function e(e){this.data=e}return e}();e.Node=t,__reflect(t.prototype,"core.Node")}(core||(core={}));var core;!function(e){var t=function(){function t(t,n){if(void 0===n&&(n=!1),this.m_list=[],t)for(var o=0,i=t.length;i>o;o++){var r=new e.Node(t[o]);this.m_list.push(r)}for(var a=this.m_list,o=0,i=a.length;i>o;o++){var r=a[o];o+1==i?r.nextNode=n?a[0]:null:r.nextNode=a[o+1],0==o?r.preNode=n?a[i-1]:null:r.preNode=a[o-1]}}return t.prototype.getLen=function(){return this.m_list.length},t.prototype.getFirst=function(){return this.m_list[0]},t.prototype.getEnd=function(){return this.m_list[this.m_list.length-1]},t.prototype.getNode=function(e){return this.m_list[e]},t.prototype.clear=function(){this.m_list.length=0},t}();e.NodeList=t,__reflect(t.prototype,"core.NodeList")}(core||(core={}));var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){RES.getVirtualUrl=function(e){var t;return t=-1!=e.indexOf("tw_")?e.replace(/tw_/,GameConfig.LANG+"_"):-1!=e.indexOf("cn_")?e.replace(/cn_/,GameConfig.LANG+"_"):-1!=e.indexOf("en_")?e.replace(/en_/,GameConfig.LANG+"_"):e,t.replace(/CN|TW|EN/,GameConfig.LANG.toUpperCase())},egret.sys.screenAdapter=new MyScreenAdapter;var t=window.innerWidth/window.innerHeight-GameConfig.DES_WIDTH/GameConfig.DES_HEIGHT,n=window.innerWidth/window.innerHeight*GameConfig.DES_HEIGHT;t>0?n>GameConfig.MAX_WIDTH?egret.MainContext.instance.stage.setContentSize(GameConfig.MAX_WIDTH,GameConfig.DES_HEIGHT):egret.MainContext.instance.stage.setContentSize(n,GameConfig.DES_HEIGHT):egret.MainContext.instance.stage.setContentSize(GameConfig.DES_WIDTH,GameConfig.DES_HEIGHT)}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[4,platform.login()];case 2:return t.sent(),[4,platform.getUserInfo()];case 3:return e=t.sent(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e=new LoadingUI,[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return n.sent(),[3,5];case 4:return t=n.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var o=new eui.Theme("resource/default.thm.json",e.stage);o.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){GameModleManger.getInstance().init(this.stage),GameManager.getInstance().init(),window.onresize=function(){var e=window.innerWidth/window.innerHeight-GameConfig.DES_WIDTH/GameConfig.DES_HEIGHT,t=window.innerWidth/window.innerHeight*GameConfig.DES_HEIGHT;e>0?t>GameConfig.MAX_WIDTH?egret.MainContext.instance.stage.setContentSize(GameConfig.MAX_WIDTH,GameConfig.DES_HEIGHT):egret.MainContext.instance.stage.setContentSize(t,GameConfig.DES_HEIGHT):egret.MainContext.instance.stage.setContentSize(GameConfig.DES_WIDTH,GameConfig.DES_HEIGHT)}},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ComonModelManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(core.BaseModel);__reflect(ComonModelManager.prototype,"ComonModelManager");var core;!function(e){var t=function(){function e(){if(this._deltaTime=0,e._instance)throw new Error("DateTimer使用单例")}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.run=function(){this._deltaTime=0},Object.defineProperty(e,"deltatime",{get:function(){return e.instance._deltaTime},enumerable:!0,configurable:!0}),e.prototype.updateServerTime=function(e){this._deltaTime=egret.getTimer()-1e3*e},Object.defineProperty(e.prototype,"now",{get:function(){return Math.floor((egret.getTimer()-this._deltaTime)/1e3)},enumerable:!0,configurable:!0}),e}();e.DateTimer=t,__reflect(t.prototype,"core.DateTimer")}(core||(core={}));var core;!function(e){var t=function(){function e(){this.m_callbacks=[]}return e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},e.prototype.init=function(e){this.m_stage=e,this.m_stage?(this.m_preTick=Date.now(),this.m_stage.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)):egret.log("Stage为null不能开启帧循环监听")},e.prototype.onEnterFrame=function(e){var t=Date.now(),n=this.m_callbacks;if(n){for(var o=n.length;o>0;o--){var i=n[o-1];i.isValid||n.splice(o-1,1)}for(var o=0,r=n.length;r>o;o++){var i=n[o];i.isValid&&i.callback&&i.callback.call(i.thisObj,t-this.m_preTick)}}this.m_preTick=t},e.prototype.addFrameEventListener=function(e,t){if(e&&t){var o=new n(e,t);this.m_callbacks.push(o)}},e.prototype.removeFrameEventListener=function(e,t){var n=this.m_callbacks;if(n)for(var o=0,i=n.length;i>o;o++){var r=n[o];r.callback===e&&r.thisObj===t&&(r.isValid=!1)}},e}();e.FrameEventCenter=t,__reflect(t.prototype,"core.FrameEventCenter");var n=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.isValid=!0,o}return __extends(t,e),t.prototype.clone=function(){var e=new t(this.callback,this.thisObj);return e.index=this.index,e.isValid=this.isValid,e},t}(e.Callback);__reflect(n.prototype,"FrameCallBack")}(core||(core={}));var GameModleManger=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(e){KeyBoardManager.getInstance().init(),mouse.enable(e);var t=new eui.UILayer;e.addChild(t),core.LayerManager.getInstance().initLayer(t),core.FrameEventCenter.getInstance().init(e),core.DateTimer.instance.run(),this.moduleMap=new Dictionary,SoundManager.getInstance().loadLocalData(),GameConfig.CasinoGame=window.CasinoGame},t.prototype.getModle=function(e){if(void 0===e&&(e=core.ModleConst.COMMON_MODLE),!this.moduleMap[e]){var t=egret.getDefinitionByName(e);this.moduleMap[e]=new t}return this.moduleMap[e]},t}(egret.EventDispatcher);__reflect(GameModleManger.prototype,"GameModleManger");var KeyBoardManager=function(e){function t(){var t=e.call(this)||this;return t.curtime=egret.getTimer(),t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){this.kb=new KeyBoard,this.kb.addEventListener(KeyBoard.onkeyup,this.onkeyup,this)},t.prototype.onkeyup=function(e){if(this.kb.isContain(e.data,KeyBoard.SPACE)&&GameConfig.emptyPlay&&egret.getTimer()-this.curtime>400){var t=core.UIManager.getUI(core.UIConst.MainScenceUI);egret.getTimer()-this.curtime>400?(this.curtime=egret.getTimer(),GameManager.getInstance().gameState==GameType.GameState.STOP?t.playBtn.enabled&&"旋转"==t.playBtn.label&&!t.gameScence.group.visible&&(t.hideAllWin(),GameManager.getInstance().startGame()):t.playBtn.enabled&&"停止"==t.playBtn.label&&(t.gameScence.group.visible||egret.setTimeout(function(){GameManager.getInstance().stopGame()},this,100))):console.log("太快了太快了太快了")}},t}(egret.EventDispatcher);__reflect(KeyBoardManager.prototype,"KeyBoardManager");var core;!function(e){var t=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.initLayer=function(e){this.scenceLayer=new eui.UILayer,this.uiLayer=new eui.UILayer,this.topLayer=new eui.UILayer,this.tipLayer=new eui.UILayer,this.scenceLayer.touchThrough=!0,this.uiLayer.touchThrough=!0,this.topLayer.touchThrough=!0,this.tipLayer.touchThrough=!0,this.tipLayer.touchEnabled=!1,e.addChild(this.scenceLayer),e.addChild(this.uiLayer),e.addChild(this.topLayer),e.addChild(this.tipLayer)},t.prototype.addUI=function(e,n){void 0===n&&(n=1);switch(n){case t.Layer_Scence:this.scenceLayer.addChild(e);break;case t.Layer_UI:this.uiLayer.addChild(e);break;case t.Layer_Top:this.topLayer.addChild(e);break;case t.Layer_Tip:this.tipLayer.addChild(e)}},t.prototype.deleteUI=function(e,n){void 0===n&&(n=1);switch(n){case t.Layer_Scence:this.scenceLayer.removeChild(e);break;case t.Layer_UI:this.uiLayer.removeChild(e);break;case t.Layer_Top:this.topLayer.removeChild(e);break;case t.Layer_Tip:this.tipLayer.removeChild(e)}},t.prototype.getLayer=function(t){return t==e.LayerManager.Layer_Scence?this.scenceLayer:t==e.LayerManager.Layer_UI?this.uiLayer:t==e.LayerManager.Layer_Top?this.topLayer:t==e.LayerManager.Layer_Tip?this.tipLayer:void 0},t.Layer_Scence=0,t.Layer_UI=1,t.Layer_Top=2,t.Layer_Tip=3,t}();e.LayerManager=t,__reflect(t.prototype,"core.LayerManager")}(core||(core={}));var core;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.getInstance=function(){return this.instance||(this.instance=new n),this.instance},n.prototype.loadGroup=function(t,n,o,i){void 0===t&&(t=e.UIConst.NomalLoadingUI),RES.isGroupLoaded(n)?o.call(i):(e.UIManager.openUI(t,e.LayerManager.Layer_Top),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,function(n){var o=e.UIManager.getUI(t);o.setPross(n.itemsLoaded,n.itemsTotal),console.log(n.itemsLoaded+"/"+n.itemsTotal)},this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,function(r){if(r.groupName==n){o.call(i);e.UIManager.getUI(t);e.UIManager.closeUI(t)}},this),RES.loadGroup(n))},n}(egret.EventDispatcher);e.LoadManger=t,__reflect(t.prototype,"core.LoadManger")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.COMMON_MODLE="ComonModelManager",e}();e.ModleConst=t,__reflect(t.prototype,"core.ModleConst")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.HEART_CHECK="HEART_CHECK",e.RECONETING="RECONETING",e.RECONET_SUC="RECONET_SUC",e.WX_JSSDK_CONFIG="WX_JSSDK_CONFIG",e.LOGIC_XIAOCHU="LOGIC_XIAOCHU",e.LOGIC_DROP="LOGIC_DROP",e.LOGIC_DATACHANGE="LOGIC_DATACHANGE",e.LOGIC_BALANCE="LOGIC_BALANCE",e.LOGIC_ROUNDOVER="LOGIC_ROUNDOVER",e.LOGIC_ROUNDSTART="LOGIC_ROUNDSTART",e.NET_INIT="Initial",e.NET_PLAY="Play",e.NET_TOUCHTOKEN="TouchToken",e}();e.NotifyConst=t,__reflect(t.prototype,"core.NotifyConst")}(core||(core={}));var core;!function(e){var t=function(){function e(){this.notifyPool={}}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.registerNotify=function(e,t,n){this.notifyPool[e]||(this.notifyPool[e]=[]),this.notifyPool[e].push({callback:t,callbackobj:n})},e.prototype.sendNotify=function(e,t){void 0===t&&(t=null);var n=this.notifyPool[e];if(n&&n.length>0)for(var o=0;o<n.length;o++)n[o].callback.apply(n[o].callbackobj,[t])},e.prototype.removeRegister=function(e){for(var t in this.notifyPool){var n=this.notifyPool[t];if(n&&n.length>0){for(var o=0;o<n.length;o++)n[o].callbackobj==e&&n.splice(o--,1);0==n.length&&delete this.notifyPool[t]}}},e}();e.NotifyManager=t,__reflect(t.prototype,"core.NotifyManager")}(core||(core={}));var core;!function(e){var t=function(){function e(){if(e.s_instance)throw new Error("单例类不可实例化");egret.startTick(this.onTick,this),this.m_tickList=[]}return e.prototype.onTick=function(e){for(var t=this.m_tickList,n=t.length;n>0;n--){var o=t[n-1];o.isValid||t.splice(n-1,1)}for(var n=0,i=t.length;i>n;n++){var o=t[n];if(e-o.timestamp>o.delay){if(o.timestamp=e,o.count++,o.callback){var r=egret.getTimer();o.callback.call(o.thisObj,o.clone());var a=egret.getTimer();a-r>2&&egret.log("tick回调耗时:"+(a-r))}o.count==o.maxCount&&(o.isValid=!1)}}return!1},e.prototype.addTick=function(e,t,o,i){for(var r=[],a=4;a<arguments.length;a++)r[a-4]=arguments[a];var s=this.m_tickList;if(s)for(var l=0,c=s.length;c>l;l++){var u=s[l];if(u.callback==o&&u.thisObj==i&&u.delay==e&&u.maxCount==t)return void(u.isValid||(u.isValid=!0,u.delay=e,u.count=0,u.maxCount=0>=t?Number.MAX_VALUE:t,u.callback=o,u.thisObj=i,u.args=r,u.timestamp=egret.getTimer()))}else s=[],this.m_tickList=s;var h=new n;h.delay=e,h.count=0,h.maxCount=0>=t?Number.MAX_VALUE:t,h.callback=o,h.thisObj=i,h.args=r,h.timestamp=egret.getTimer(),h.isValid=!0,s.push(h)},e.prototype.removeTick=function(e,t){var n=this.m_tickList;if(n)for(var o=0,i=n.length;i>o;o++){var r=n[o];if(r.callback==e&&r.thisObj==t)return void(r.isValid=!1)}},e.prototype.removeTicks=function(e){var t=this.m_tickList;if(t)for(var n=0,o=t.length;o>n;n++){var i=t[n];i.thisObj==e&&(i.isValid=!1)}},e.prototype.removeAllTicks=function(){this.m_tickList.length=0},Object.defineProperty(e,"instance",{get:function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e}();e.TimerManager=t,__reflect(t.prototype,"core.TimerManager");var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.clone=function(){var e=new t;return e.delay=this.delay,e.count=this.count,e.maxCount=this.maxCount,e.callback=this.callback,e.thisObj=this.thisObj,e.args=this.args,e.isValid=this.isValid,e},t}(egret.HashObject);__reflect(n.prototype,"TickData")}(core||(core={}));var core;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.WEIXIN_DEBUG=!0,e.init(),e}return __extends(n,t),n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.init=function(){e.NotifyManager.getInstance().registerNotify(e.NotifyConst.WX_JSSDK_CONFIG,this.onNotifyJSSDK,this)},n.prototype.config=function(){if(Utils.isWeiXin()&&Utils.getURLQueryString("openid")){this.wx=window.wx;encodeURIComponent(window.location.href)}},n.prototype.onNotifyJSSDK=function(e){console.log("微信配置1",e);var t=this;this.wx.config({debug:e.data.debug,appId:e.data.appId,timestamp:e.data.timestamp,nonceStr:e.data.nonceStr,signature:e.data.signature,jsApiList:e.data.jsApiList}),this.wx.ready(function(){t.shareNomal(e.data.url)}),this.wx.error(function(e){})},n.prototype.shareNomal=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=""),this.shareURL=e,t="生态农场开始种植";window.wx},n}(egret.EventDispatcher);e.WeiXinManager=t,__reflect(t.prototype,"core.WeiXinManager")}(core||(core={}));var Commond=function(){function e(){}return e.sendHeartCheck=function(){},e.checkPlayer=function(){var t=e.initData();t.Parameter={Action:"Status",Type:"list_redis",PartnerId:t.PartnerId,McDebug:1},sockets.SocketMananger.getInstance().sendMessage(t)},e.sendInitGame=function(){var t=e.initData();t.Action="Initial",t.Parameter={Action:"Initial",Type:null,PartnerId:t.PartnerId,McDebug:1},sockets.SocketMananger.getInstance().sendMessage(t)},e.sendPlay=function(t){if(void 0===t&&(t=!1),console.log("间隔 === "+(egret.getTimer()-this.playtime)),!(egret.getTimer()-this.playtime<500)){this.playtime=egret.getTimer();var n=e.initData();n.Action="Play",n.Parameter={Action:"Play",Type:t?"freeslot":"slot",Line:5,Bet:1,Denom:1e4*vo.GameData.betScoreArr[vo.GameData.betIndex]/5,PlayerId:GameConfig.CasinoGame.PlayerId,SessionData:{Bet:1,Multiply:10},DebugMode:"None"},sockets.SocketMananger.getInstance().sendMessage(n)}},e.initData=function(){var e={};return e.Link_auth=GameConfig.CasinoGame.Link_auth,e.GameCode=GameConfig.CasinoGame.GameCode,e.Game_id=GameConfig.CasinoGame.Game_id,e.PlayerId=GameConfig.CasinoGame.PlayerId,e.Skin=GameConfig.CasinoGame.Skin,e.PartnerId=GameConfig.CasinoGame.PartnerId,e.UrlBase=GameConfig.CasinoGame.UrlBase,e.Token=GameConfig.CasinoGame.Token,e.IP=GameConfig.CasinoGame.IP,e.Language=GameConfig.CasinoGame.Language,e.GameCanvas=GameConfig.CasinoGame.GameCanvas,e.vtoken_interval=GameConfig.CasinoGame.vtoken_interval,e.guset=GameConfig.CasinoGame.guest,e.udf1=GameConfig.CasinoGame.udf1,e.udf2=GameConfig.CasinoGame.udf2,e.udf3=GameConfig.CasinoGame.udf3,e.udf4=GameConfig.CasinoGame.udf4,e.udf5=GameConfig.CasinoGame.udf5,e.NjsHost=GameConfig.CasinoGame.NjsHost,e.Denom=GameConfig.CasinoGame.Denom,e.crnex=GameConfig.CasinoGame.crnex,e.UrlRes=GameConfig.CasinoGame.UrlRes,e},e.index=0,e}();__reflect(Commond.prototype,"Commond");var GameController=function(){function e(){this.sequence=0,this.key="a95c530a7af5f492a74499e70578d150",this.serverAddress="http://54.95.43.201/80101/99"}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getSeq=function(){return this.sequence++,this.sequence},e.prototype.sendHttp=function(e,t,n,o){var i=new XMLHttpRequest;i.open(t,n,!0),i.setRequestHeader("Content-Type","application/json"),i.onload=function(e){switch(i.status){case 200:var t=JSON.parse(i.responseText);t.status>0&&TipsManager.getInstance().showTips(ErrorCode.codeArr[t.status]),void 0!=t.server_time&&core.DateTimer.instance.updateServerTime(t.server_time),TipsManager.getInstance().showLog("receive---",t),o.call(this,t)}},i.send(JSON.stringify(e)),TipsManager.getInstance().showLog("send---",JSON.stringify(e))},e.prototype.clearRedis=function(){},e}();__reflect(GameController.prototype,"GameController");var sockets;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.url=GameConfig.CasinoGame.UrlBase,t.netState=-1,t.reconetCount=0,t.reconetMaxCount=3,t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){this.heart=new n(this),this.sock.on("connect",this.onSocketOpen.bind(this)),this.sock.on("disconnect",this.onSocketClose.bind(this)),this.sock.on("connect_error",function(){core.UIManager.openUI(core.UIConst.NetCloseUI,core.LayerManager.Layer_Tip)}),this.sock.on("error",this.onSocketError.bind(this)),this.sock.on("ResponseResult",this.onReceiveMessage.bind(this))},t.prototype.connectServer=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.callFunction=e,this.callObj=t,this.sock=io.connect(this.url),this.init()},t.prototype.onSocketClose=function(){console.log("连接关闭"),this.netState=-1,core.UIManager.openUI(core.UIConst.NetCloseUI,core.LayerManager.Layer_Tip)},t.prototype.onSocketError=function(){console.log("连接异常"),this.netState=-1,core.UIManager.openUI(core.UIConst.NetCloseUI,core.LayerManager.Layer_Tip)},t.prototype.onSocketOpen=function(e){console.log(0==this.reconetCount?"init连接":"reconect连接",e),this.heart.reset(),this.netState=1,this.callFunction&&this.callObj&&0==this.reconetCount&&this.callFunction.call(this.callObj),this.reconetCount+=1},t.prototype.onReceiveMessage=function(e){var t=JSON.parse(e);console.log("返回obj",t),core.NotifyManager.getInstance().sendNotify(t.Value.Status.CurrentAction,t)},t.prototype.sendMessage=function(e){console.log(e),this.sock.emit("Action",JSON.stringify(e))},t.prototype.reconet=function(){var e=this;this.netState=0,this.connectServer(function(){e.netState=1,Commond.index=0,core.NotifyManager.getInstance().sendNotify(core.NotifyConst.RECONET_SUC)},this)},t}(egret.EventDispatcher);e.SocketMananger=t,__reflect(t.prototype,"sockets.SocketMananger");var n=function(){function e(e){this.timeout=GameConfig.CasinoGame.vtoken_interval,this.timeoutObj=null,this.serverTimeoutObj=null,this.manager=e}return e.prototype.reset=function(){egret.clearInterval(this.inter),this.start()},e.prototype.start=function(){this.inter=egret.setInterval(function(){Commond.sendHeartCheck()},this,1e3*this.timeout)},e}();__reflect(n.prototype,"HeartCheck")}(sockets||(sockets={}));var qr;!function(e){var t=function(){function t(t){this.mode=e.QRMode.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var n=0,o=this.data.length;o>n;n++){var i=[],r=this.data.charCodeAt(n);r>65536?(i[0]=240|(1835008&r)>>>18,i[1]=128|(258048&r)>>>12,i[2]=128|(4032&r)>>>6,i[3]=128|63&r):r>2048?(i[0]=224|(61440&r)>>>12,i[1]=128|(4032&r)>>>6,i[2]=128|63&r):r>128?(i[0]=192|(1984&r)>>>6,i[1]=128|63&r):i[0]=r,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return t.prototype.getLength=function(e){return this.parsedData.length},t.prototype.write=function(e){for(var t=0,n=this.parsedData.length;n>t;t++)e.put(this.parsedData[t],8)},t}();e.QR8bitByte=t,__reflect(t.prototype,"qr.QR8bitByte")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){this.buffer=[],this.length=0}return e.prototype.get=function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},e.prototype.put=function(e,t){for(var n=0;t>n;n++)this.putBit(1==(e>>>t-n-1&1))},e.prototype.getLengthInBits=function(){return this.length},e.prototype.putBit=function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++},e}();e.QRBitBuffer=t,__reflect(t.prototype,"qr.QRBitBuffer")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(){}return t.create=function(n,o,i,r,a,s){void 0===o&&(o=200),void 0===i&&(i=200),void 0===r&&(r=e.QRErrorCorrectLevel.M),void 0===a&&(a=4),void 0===s&&(s=0);var l={color:s,width:o,height:i,correctLevel:r,typeNumer:a},c=new e.QRCodeModel(l.typeNumer,l.correctLevel);return c.addData(n),c.make(),t.draw(c,l)},t.draw=function(e,t){var n=new egret.Sprite,t=t,o=e.getModuleCount(),i=t.width/o,r=t.height/o,a=10;n.graphics.moveTo(-a,-a),n.graphics.beginFill(16777215),n.graphics.drawRect(-a,-a,t.width+2*a,t.height+2*a),n.graphics.endFill();for(var s=0;o>s;s++)for(var l=0;o>l;l++){var c=e.isDark(s,l);c&&(n.graphics.moveTo(l*i,s*r),n.graphics.beginFill(t.color),n.graphics.drawRect(l*i,s*r,i,r),n.graphics.endFill())}return n},t}();e.QRCode=t,__reflect(t.prototype,"qr.QRCode")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(e,t){this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[],this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}return t.prototype.addData=function(t){var n=new e.QR8bitByte(t);this.dataList.push(n),this.dataCache=null},t.prototype.isDark=function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},t.prototype.getModuleCount=function(){return this.moduleCount},t.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},t.prototype.makeImpl=function(e,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[o][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},t.prototype.setupPositionProbePattern=function(e,t){for(var n=-1;7>=n;n++)if(!(-1>=e+n||this.moduleCount<=e+n))for(var o=-1;7>=o;o++)-1>=t+o||this.moduleCount<=t+o||(n>=0&&6>=n&&(0==o||6==o)||o>=0&&6>=o&&(0==n||6==n)||n>=2&&4>=n&&o>=2&&4>=o?this.modules[e+n][t+o]=!0:this.modules[e+n][t+o]=!1)},t.prototype.getBestMaskPattern=function(){for(var t=0,n=0,o=0;8>o;o++){this.makeImpl(!0,o);var i=e.QRUtil.getLostPoint(this);(0==o||t>i)&&(t=i,n=o)}return n},t.prototype.createMovieClip=function(e,t,n){var o=e.createEmptyMovieClip(t,n),i=1;this.make();for(var r=0;r<this.modules.length;r++)for(var a=r*i,s=0;s<this.modules[r].length;s++){var l=s*i,c=this.modules[r][s];c&&(o.beginFill(0,100),o.moveTo(l,a),o.lineTo(l+i,a),o.lineTo(l+i,a+i),o.lineTo(l,a+i),o.endFill())}return o},t.prototype.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);
for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},t.prototype.setupPositionAdjustPattern=function(){for(var t=e.QRUtil.getPatternPosition(this.typeNumber),n=0;n<t.length;n++)for(var o=0;o<t.length;o++){var i=t[n],r=t[o];if(null==this.modules[i][r])for(var a=-2;2>=a;a++)for(var s=-2;2>=s;s++)-2==a||2==a||-2==s||2==s||0==a&&0==s?this.modules[i+a][r+s]=!0:this.modules[i+a][r+s]=!1}},t.prototype.setupTypeNumber=function(t){for(var n=e.QRUtil.getBCHTypeNumber(this.typeNumber),o=0;18>o;o++){var i=!t&&1==(n>>o&1);this.modules[Math.floor(o/3)][o%3+this.moduleCount-8-3]=i}for(var o=0;18>o;o++){var i=!t&&1==(n>>o&1);this.modules[o%3+this.moduleCount-8-3][Math.floor(o/3)]=i}},t.prototype.setupTypeInfo=function(t,n){for(var o=this.errorCorrectLevel<<3|n,i=e.QRUtil.getBCHTypeInfo(o),r=0;15>r;r++){var a=!t&&1==(i>>r&1);6>r?this.modules[r][8]=a:8>r?this.modules[r+1][8]=a:this.modules[this.moduleCount-15+r][8]=a}for(var r=0;15>r;r++){var a=!t&&1==(i>>r&1);8>r?this.modules[8][this.moduleCount-r-1]=a:9>r?this.modules[8][15-r-1+1]=a:this.modules[8][15-r-1]=a}this.modules[this.moduleCount-8][8]=!t},t.prototype.mapData=function(t,n){for(var o=-1,i=this.moduleCount-1,r=7,a=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var l=0;2>l;l++)if(null==this.modules[i][s-l]){var c=!1;a<t.length&&(c=1==(t[a]>>>r&1));var u=e.QRUtil.getMask(n,i,s-l);u&&(c=!c),this.modules[i][s-l]=c,r--,-1==r&&(a++,r=7)}if(i+=o,0>i||this.moduleCount<=i){i-=o,o=-o;break}}},t.createData=function(n,o,i){for(var r=e.QRRSBlock.getRSBlocks(n,o),a=new e.QRBitBuffer,s=0;s<i.length;s++){var l=i[s];a.put(l.mode,4),a.put(l.getLength(),e.QRUtil.getLengthInBits(l.mode,n)),l.write(a)}for(var c=0,s=0;s<r.length;s++)c+=r[s].dataCount;if(a.getLengthInBits()>8*c)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*c+")");for(a.getLengthInBits()+4<=8*c&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=8*c)&&(a.put(t.PAD0,8),!(a.getLengthInBits()>=8*c));)a.put(t.PAD1,8);return t.createBytes(a,r)},t.createBytes=function(t,n){for(var o=0,i=0,r=0,a=new Array(n.length),s=new Array(n.length),l=0;l<n.length;l++){var c=n[l].dataCount,u=n[l].totalCount-c;i=Math.max(i,c),r=Math.max(r,u),a[l]=new Array(c);for(var h=0;h<a[l].length;h++)a[l][h]=255&t.buffer[h+o];o+=c;var g=e.QRUtil.getErrorCorrectPolynomial(u),p=new e.QRPolynomial(a[l],g.getLength()-1),f=p.mod(g);s[l]=new Array(g.getLength()-1);for(var h=0;h<s[l].length;h++){var d=h+f.getLength()-s[l].length;s[l][h]=d>=0?f.get(d):0}}for(var m=0,h=0;h<n.length;h++)m+=n[h].totalCount;for(var v=new Array(m),y=0,h=0;i>h;h++)for(var l=0;l<n.length;l++)h<a[l].length&&(v[y++]=a[l][h]);for(var h=0;r>h;h++)for(var l=0;l<n.length;l++)h<s[l].length&&(v[y++]=s[l][h]);return v},t.PAD0=236,t.PAD1=17,t}();e.QRCodeModel=t,__reflect(t.prototype,"qr.QRCodeModel")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){}return e.L=1,e.M=0,e.Q=3,e.H=2,e}();e.QRErrorCorrectLevel=t,__reflect(t.prototype,"qr.QRErrorCorrectLevel")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){}return e.PATTERN000=0,e.PATTERN001=1,e.PATTERN010=2,e.PATTERN011=3,e.PATTERN100=4,e.PATTERN101=5,e.PATTERN110=6,e.PATTERN111=7,e}();e.QRMaskPattern=t,__reflect(t.prototype,"qr.QRMaskPattern")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){}return e.glog=function(t){return e.isInit||e.init(),1>t&&console.log("错误:n="+t),e.LOG_TABLE[t]},e.gexp=function(t){for(e.isInit||e.init();0>t;)t+=255;for(;t>=256;)t-=255;return e.EXP_TABLE[t]},e.init=function(){e.isInit=!0;for(var t=0;8>t;t++)e.EXP_TABLE[t]=1<<t;for(var t=8;256>t;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(var t=0;255>t;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t},e.EXP_TABLE=new Array(256),e.LOG_TABLE=new Array(256),e}();e.QRMath=t,__reflect(t.prototype,"qr.QRMath")}(qr||(qr={}));var qr;!function(e){var t=function(){function e(){}return e.MODE_NUMBER=1,e.MODE_ALPHA_NUM=2,e.MODE_8BIT_BYTE=4,e.MODE_KANJI=8,e}();e.QRMode=t,__reflect(t.prototype,"qr.QRMode")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var o=0;o<e.length-n;o++)this.num[o]=e[o+n]}return t.prototype.get=function(e){return this.num[e]},t.prototype.getLength=function(){return this.num.length},t.prototype.multiply=function(n){for(var o=new Array(this.getLength()+n.getLength()-1),i=0;i<this.getLength();i++)for(var r=0;r<n.getLength();r++)o[i+r]^=e.QRMath.gexp(e.QRMath.glog(this.get(i))+e.QRMath.glog(n.get(r)));return new t(o,0)},t.prototype.mod=function(n){if(this.getLength()-n.getLength()<0)return this;for(var o=e.QRMath.glog(this.get(0))-e.QRMath.glog(n.get(0)),i=new Array(this.getLength()),r=0;r<this.getLength();r++)i[r]=this.get(r);for(var r=0;r<n.getLength();r++)i[r]^=e.QRMath.gexp(e.QRMath.glog(n.get(r))+o);return new t(i,0).mod(n)},t}();e.QRPolynomial=t,__reflect(t.prototype,"qr.QRPolynomial")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(e,t){this.totalCount=e,this.dataCount=t}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(e,n){var o=t.getRsBlockTable(e,n);if(void 0==o)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+n);for(var i=o.length/3,r=[],a=0;i>a;a++)for(var s=o[3*a+0],l=o[3*a+1],c=o[3*a+2],u=0;s>u;u++)r.push(new t(l,c));return r},t.getRsBlockTable=function(n,o){switch(o){case e.QRErrorCorrectLevel.L:return t.RS_BLOCK_TABLE[4*(n-1)+0];case e.QRErrorCorrectLevel.M:return t.RS_BLOCK_TABLE[4*(n-1)+1];case e.QRErrorCorrectLevel.Q:return t.RS_BLOCK_TABLE[4*(n-1)+2];case e.QRErrorCorrectLevel.H:return t.RS_BLOCK_TABLE[4*(n-1)+3];default:return}},t}();e.QRRSBlock=t,__reflect(t.prototype,"qr.QRRSBlock")}(qr||(qr={}));var qr;!function(e){var t=function(){function t(){}return t.getBCHTypeInfo=function(e){for(var n=e<<10;t.getBCHDigit(n)-t.getBCHDigit(t.G15)>=0;)n^=t.G15<<t.getBCHDigit(n)-t.getBCHDigit(t.G15);return(e<<10|n)^t.G15_MASK},t.getBCHTypeNumber=function(e){for(var n=e<<12;t.getBCHDigit(n)-t.getBCHDigit(t.G18)>=0;)n^=t.G18<<t.getBCHDigit(n)-t.getBCHDigit(t.G18);return e<<12|n},t.getBCHDigit=function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},t.getPatternPosition=function(e){return t.PATTERN_POSITION_TABLE[e-1]},t.getMask=function(t,n,o){switch(t){case e.QRMaskPattern.PATTERN000:return(n+o)%2==0;case e.QRMaskPattern.PATTERN001:return n%2==0;case e.QRMaskPattern.PATTERN010:return o%3==0;case e.QRMaskPattern.PATTERN011:return(n+o)%3==0;case e.QRMaskPattern.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2==0;case e.QRMaskPattern.PATTERN101:return n*o%2+n*o%3==0;case e.QRMaskPattern.PATTERN110:return(n*o%2+n*o%3)%2==0;case e.QRMaskPattern.PATTERN111:return(n*o%3+(n+o)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},t.getErrorCorrectPolynomial=function(t){for(var n=new e.QRPolynomial([1],0),o=0;t>o;o++)n=n.multiply(new e.QRPolynomial([1,e.QRMath.gexp(o)],0));return n},t.getLengthInBits=function(t,n){if(n>=1&&10>n)switch(t){case e.QRMode.MODE_NUMBER:return 10;case e.QRMode.MODE_ALPHA_NUM:return 9;case e.QRMode.MODE_8BIT_BYTE:return 8;case e.QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>n)switch(t){case e.QRMode.MODE_NUMBER:return 12;case e.QRMode.MODE_ALPHA_NUM:return 11;case e.QRMode.MODE_8BIT_BYTE:return 16;case e.QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>n))throw new Error("type:"+n);switch(t){case e.QRMode.MODE_NUMBER:return 14;case e.QRMode.MODE_ALPHA_NUM:return 13;case e.QRMode.MODE_8BIT_BYTE:return 16;case e.QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},t.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,o=0;t>o;o++)for(var i=0;t>i;i++){for(var r=0,a=e.isDark(o,i),s=-1;1>=s;s++)if(!(0>o+s||o+s>=t))for(var l=-1;1>=l;l++)0>i+l||i+l>=t||(0!=s||0!=l)&&a==e.isDark(o+s,i+l)&&r++;r>5&&(n+=3+r-5)}for(var o=0;t-1>o;o++)for(var i=0;t-1>i;i++){var c=0;e.isDark(o,i)&&c++,e.isDark(o+1,i)&&c++,e.isDark(o,i+1)&&c++,e.isDark(o+1,i+1)&&c++,(0==c||4==c)&&(n+=3)}for(var o=0;t>o;o++)for(var i=0;t-6>i;i++)e.isDark(o,i)&&!e.isDark(o,i+1)&&e.isDark(o,i+2)&&e.isDark(o,i+3)&&e.isDark(o,i+4)&&!e.isDark(o,i+5)&&e.isDark(o,i+6)&&(n+=40);for(var i=0;t>i;i++)for(var o=0;t-6>o;o++)e.isDark(o,i)&&!e.isDark(o+1,i)&&e.isDark(o+2,i)&&e.isDark(o+3,i)&&e.isDark(o+4,i)&&!e.isDark(o+5,i)&&e.isDark(o+6,i)&&(n+=40);for(var u=0,i=0;t>i;i++)for(var o=0;t>o;o++)e.isDark(o,i)&&u++;var h=Math.abs(100*u/t/t-50)/5;return n+=10*h},t.prototype.static_isSupportCanvas=function(){return"undefined"!=typeof CanvasRenderingContext2D},t._getTypeNumber=function(n,o){for(var i=1,r=t._getUTF8Length(n),a=0,s=t.QRCodeLimitLength.length;s>=a;a++){var l=0;switch(o){case e.QRErrorCorrectLevel.L:l=t.QRCodeLimitLength[a][0];break;case e.QRErrorCorrectLevel.M:l=t.QRCodeLimitLength[a][1];break;case e.QRErrorCorrectLevel.Q:l=t.QRCodeLimitLength[a][2];break;case e.QRErrorCorrectLevel.H:l=t.QRCodeLimitLength[a][3]}if(l>=r)break;i++}if(i>t.QRCodeLimitLength.length)throw new Error("Too long data");return i},t._getUTF8Length=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)},t.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],t.G15=1335,t.G18=7973,t.G15_MASK=21522,t.QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],t}();e.QRUtil=t,__reflect(t.prototype,"qr.QRUtil")}(qr||(qr={}));var core;!function(e){var t=function(){function e(){}return e.playBGMusic=function(){1==this.isBgSoundOn?playAudio("music_mp3"):stopAudio("music_mp3")},e.stopBgMusic=function(){stopAudio("music_mp3")},e.registerPageActive=function(){if(!this.haveRegistered){this.haveRegistered=!0;var e="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,t=e.replace(/hidden/i,"visibilitychange"),n=function(){!document[e]};document.addEventListener(t,n)}},e.isBgSoundOn=1,e.isEffectSoundOn=1,e.haveRegistered=!1,e}();e.MusicManager=t,__reflect(t.prototype,"core.MusicManager")}(core||(core={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var SoundManager=function(){function e(){this.bgOn=!0,this.effectOn=!0,this.bgVolume=1,this.effectVolume=1,this.dic=new Dictionary}return e.prototype.loadLocalData=function(){var e=egret.localStorage.getItem("bgOn"),t=egret.localStorage.getItem("effectOn");null!=e?this.bgOn=0==e?!1:!0:egret.localStorage.setItem("bgOn","1"),null!=t?this.effectOn=0==t?!1:!0:egret.localStorage.setItem("effectOn","1")},e.prototype.playEffect=function(e){var t=this;if(this.effectOn){var n,o=RES.getRes(e);if(o)n=o.play(0,1),n.once(egret.Event.SOUND_COMPLETE,function(e){n=null},this),n.volume=this.effectVolume;else{var i=function(e,o){n=e.play(0,1),n.once(egret.Event.SOUND_COMPLETE,function(e){n=null},t),n.volume=t.effectVolume};RES.getResAsync(e,i,this)}}},e.prototype.playBg=function(e){var t=this;this.currBg=e,this.bgOn&&this.playMusic(e).then(function(e){t.bgchanel&&(t.bgchanel.stop(),t.bgchanel=null),t.bgchanel=e,t.bgchanel.volume=t.bgVolume})},e.prototype.stopBg=function(){this.bgchanel&&this.bgchanel.stop()},e.prototype.setEffectOn=function(e){this.effectOn=e,egret.localStorage.setItem("effectOn",1==this.effectOn?"1":"0")},e.prototype.setBgOn=function(e){this.bgOn=e,egret.localStorage.setItem("bgOn",1==this.bgOn?"1":"0"),this.bgOn?this.playBg(this.currBg):this.stopBg()},e.prototype.setBgVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.bgVolume=e,this.bgchanel&&(this.bgchanel.volume=this.bgVolume)},e.prototype.getBgVolume=function(){return this.bgVolume},e.prototype.setEffectVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.effectVolume=e},e.prototype.getEffectVolume=function(){return this.effectVolume},e.getInstance=function(){return null==this.ins&&(this.ins=new e),this.ins},e.prototype.playMusic=function(e,t){var n=this;return void 0===e&&(e=""),void 0===t&&(t=-1),new Promise(function(o,i){var r,a=RES.getRes(e);if(a)r=a.play(e,t),r.volume=n.effectVolume,o(r);else{var s=function(a,s){null==a?(console.log(e+"->不存在的资源"),i()):(r=a.play(e,t),r.volume=n.effectVolume,o(r))};RES.getResAsync(e,s,n)}})},e.prototype.playMusic2=function(e,t,n){var o=this;return void 0===e&&(e=""),void 0===t&&(t=-1),void 0===n&&(n=.1),new Promise(function(i,r){if(o.effectOn){var a,s=RES.getRes(e);if(s)a=s.play(e,t),a.volume=n,i(a);else{var l=function(o,s){null==o?(console.log(e+"->不存在的资源"),r()):(a=o.play(e,t),a.volume=n,i(a))};RES.getResAsync(e,l,o)}}})},e}();__reflect(SoundManager.prototype,"SoundManager");var game;!function(e){var t=function(){function e(){}return e.getMc=function(e,t,n){function o(t){var n=RES.getRes(e+"_png"),o=RES.getRes(e+"_json"),i=new egret.MovieClipDataFactory(o,n),r=new egret.MovieClip(i.generateMovieClipData(t));return r.fac=i,r.touchEnabled=!1,r}var i=this;void 0===t&&(t=null),void 0===n&&(n="");var r=RES.getRes(e+"_png");if(r){var a=o(n);return t&&t(a),a}return RES.getResAsync(e+"_png",function(){RES.getResAsync(e+"_json",function(){t&&t(o(n))},i)},this),null},e.changeAction=function(e,t){var n=e.fac;e.movieClipData=n.generateMovieClipData(t)},e}();e.MCUtils=t,__reflect(t.prototype,"game.MCUtils")}(game||(game={}));var core;!function(e){var t=function(){function e(){}return e.addLongTouch=function(t,n,o,i){void 0===i&&(i=null),t.startLongouch=n,t.endLongTouch=o,t.thisObj=i,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.longTouchBegin,t)},e.longTouchBegin=function(t){egret.clearTimeout(e.timeout),e.isLong=!1;var n=t.currentTarget;e.curx=t.stageX,e.cury=t.stageY,egret.MainContext.instance.stage.once(egret.TouchEvent.TOUCH_END,e.longTouchEnd,this),e.timeout=egret.setTimeout(function(){e.isLong=!0,null==n.thisObj?n.startLongouch&&n.startLongouch(t):n.startLongouch&&n.startLongouch.call(n.thisObj,t)},this,350)},e.longTouchEnd=function(t){egret.clearTimeout(e.timeout);var n=this;1==e.isLong&&(e.isLong=!1,(n.thisObj=null)?n.endLongTouch&&n.endLongTouch(t):n.endLongTouch&&n.endLongTouch.call(n.thisObj,t))},e.deleteLongtouch=function(t){t.startLongouch=null,t.endLongTouch=null,t.thisObj=null,t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.longTouchBegin,t)},e.removeDisplayObject=function(e){e.parent&&e.parent.removeChild(e)},e.removeDisplayObjectForAni=function(t,n){var o=this;return void 0===n&&(n=500),new Promise(function(i,r){egret.Tween.get(t).to({alpha:0},n).call(function(){e.removeDisplayObject(t),i()},o)})},e.setAnchorMiddle=function(e,t){void 0===t&&(t=!1),egret.callLater(function(){e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,t&&(e.x=e.x+e.width/2,e.y=e.y+e.height/2)},this)},e.addButtonScaleEffects=function(t,n){if(void 0===n&&(n=!1),t)if(n)t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t);else if(egret.is(t,egret.getQualifiedClassName(eui.Button)))t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t);else for(var o=t.numChildren,i=0;o>i;i++){var r=t.getChildAt(i);e.addButtonScaleEffects(r)}},e.onButtonTouchBegan=function(e){var t=e.currentTarget;egret.Tween.get(t).to({scaleX:.9,scaleY:.9},50).to({scaleX:1,scaleY:1},50),SoundManager.getInstance().playEffect(SoundConst.BUTTON)},e.isLong=!1,e}();e.MyUIUtils=t,__reflect(t.prototype,"core.MyUIUtils")}(core||(core={}));var RegUtils;!function(e){function t(e){var t=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return t.test(e)?!0:!1}function n(e){if(r(e))return!1;var t=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return t.test(e)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}function o(e){var t=/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return t.test(e)?!0:!1}function i(e){var t=/^[0][1-9]{2,3}-[0-9]{5,10}$/,n=/^[1-9]{1}[0-9]{5,8}$/;return e.length>9?t.test(e)?!0:!1:n.test(e)?!0:!1}function r(e){if(""==e)return!0;var t="^[ ]+$",n=new RegExp(t);return n.test(e)}function a(e){var t=/^[-]{0,1}[0-9]{1,}$/;return t.test(e)}function s(e){var t="^[0-9]+$",n=new RegExp(t);return-1!=e.search(n)?!0:!1}function l(e){var t="^[0-9]+[.][0-9]{0,3}$",n=new RegExp(t);return n.test(e)?!0:!1}function c(e){if(r(e))return!1;var t=/^[\u4E00-\u9FA5]{2,4}$/;return t.test(e)}function u(e){var t=/^[\u4E00-\u9FA5]/;return t.test(e)}function h(e,t){var n=" ",o=-1;if(0==t||1==t){for(;" "==n;)++o,n=e.substr(o,1);e=e.substring(o)}if(0==t||2==t){for(n=" ",o=e.length;" "==n;)--o,n=e.substr(o,1);e=e.substring(0,o+1)}return e}function g(e){var t=/^[a-z0-9]+$/;return t.test(e)}function p(e){var t=/^[a-z]+$/;return t.test(e)}function f(e){var t=/^[0-9]+$/;return t.test(e)}function d(e){var t=/^[0-9]+(.[0-9]{1})?$/,n=/^[0-9]*$/;return t.test(e)||n.test(e)}e.checkEmail=t,e.isIP=n,e.checkMobile=o,e.checkPhone=i,e.isNull=r,e.isInteger=a,e.isNumber=s,e.isMoney=l,e.isRealName=c,e.checkIsChinese=u,e.cTrim=h,e.isAccount=g,e.isAccountaz=p,e.isAccount09=f,e.isOneNumber=d}(RegUtils||(RegUtils={}));var Utils=function(){function e(){}return e.rang=function(e,t){return Math.round(Math.random()*(t-e)+e)},e.setAnchorCenter=function(e){e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2},e.distance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.lineIntersectSide=function(e,t,n,o){var i=(n.y-e.y)*(e.x-t.x)-(n.x-e.x)*(e.y-t.y),r=(o.y-e.y)*(e.x-t.x)-(o.x-e.x)*(e.y-t.y);return i*r>0?!1:!0},e.sideIntersectSide=function(t,n,o,i){return e.lineIntersectSide(t,n,o,i)&&e.lineIntersectSide(o,i,t,n)?!0:!1},e.getAngleBySide=function(e,t){return Math.atan(e/t)*(180/Math.PI)},e.setRichText=function(e,t){if(e)if(t){var n=new egret.HtmlTextParser;e.textFlow=n.parse(t)}else e.text=t},e.hitTest=function(e,t){if(null!=e.getBounds&&null!=t.getBounds){var n=e.getBounds(),o=t.getBounds();return n.x=e.x,n.y=e.y,o.x=t.x,o.y=t.y,n.intersects(o)}},e.checkLength=function(e){var t=new egret.ByteArray;return t.writeUTF(e),t.length},e.pointAmongAngle=function(e,t,n,o){var i=n-e,r=o-t,a=0;return 0==i&&0==r?0:(i>=0&&r>=0?a=180*Math.atan(r/i)/Math.PI:0>=i&&r>=0?a=180*Math.atan(Math.abs(i)/r)/Math.PI+90:0>=i&&0>=r?a=180*Math.atan(Math.abs(r)/Math.abs(i))/Math.PI+180:i>=0&&0>=r&&(a=180*Math.atan(i/Math.abs(r))/Math.PI+270),a)},e.arrToArr2=function(e,t){var n=[];if(e)for(var o=void 0,i=0,r=e.length;r>i;i++)i%t===0&&(o=[],n.push(o)),o.push(e[i]);return n},e.getUrlPara=function(e){for(var t=location.search.replace(/^\?/,"").split("&"),n={},o=0,i=t.length;i>o;o++){var r=t[o].split("=");n[r[0]]=r[1]}return e?n[e]||"":n},e.limit=function(e,t,n){return t>e?t:e>t?n:e},e.limit1=function(e,t,n){return Math.max(t,Math.min(n,e))},e.showTimeFormat=function(e){e=Math.floor(e/1e3);var t=Math.floor(e/86400);e%=86400;var n=Math.floor(e/3600);e%=3600;var o=Math.floor(e/60);e%=60;var i=Math.floor(e);return 0>=t&&0>=n&&0>=o?i+"秒":0>=t&&0>=n?o+"分"+(i>9?i:"0"+i)+"秒":0>=t?n+"时"+(o>0?o:"0"+o)+"分"+(i>9?i:"0"+i)+"秒":t+"天"+(n>0?n:"0"+n)+"时"+(o>0?o:"0"+o)+"分"+(i>9?i:"0"+i)+"秒"},e.getBigNumberShow=function(e){return 1e4>e?e+"":(e/=1e3,e.toFixed(1)+"K")},e.isElinArr=function(e,t){return t.indexOf(e)>-1},e.isArrCrossing=function(t,n){for(var o=0;o<t.length;o++)if(e.isElinArr(t[o],n))return!0;return!1},e.getURLQueryString=function(e){if(egret.Capabilities.runtimeType==egret.RuntimeType.WEB){var t=decodeURIComponent(window.location.href);t=t.replace(/&quot/g,'"');var n;return t.indexOf("#?")>0?(t=t.replace("#?","&"),n=t.match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"))):n=window.location.search.substr(1).match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)")),n?n[2]:null}},e.getMaxStr=function(e){return e.length<=5?e:e.substr(0,5)+"..."},e.removeArrayItem=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},e.mtaChainSdk=function(e){var t=window.MtaH5;if(t&&t.clickStat){var n={};n[e.toLocaleLowerCase()]="true",t.clickStat("yemianshendu",n)}},e.isCollsionRect2=function(e,t,n,o,i,r,a,s){return e>=i&&e>=i+a||i>=e&&i>=e+n||t>=r&&t>=r+s||r>=t&&r>=t+o?!1:!0},e.rect1CollsionRect2=function(t,n){return e.isCollsionRect2(t.x,t.y,t.width,t.height,n.x,n.y,n.width,n.height)},e.BigNumTostring=function(t){var n=t.toString();return t>=e.MAXK&&t<e.MAXM?n=(t/1e3).toFixed(2)+"K":t>=1e6&&(n=(t/e.MAXM).toFixed(2)+"M"),n.toString()},e.BigNumTostring1=function(t){var n=t.toString();if(t>=e.MAXK1&&t<e.MAXM){n=t/1e3+"";var o=n.split(".")[0],i=n.split(".")[1];n=o+"."+(i?i.substr(0,2):"00")+"k"}else if(t>=1e6){n=t/e.MAXM+"";var o=n.split(".")[0],i=n.split(".")[1];n=o+"."+(i?i.substr(0,2):"00")+"M"}return n+""},e.getOrientationType=function(){return 180===window.orientation||0===window.orientation?0:90===window.orientation||-90===window.orientation?1:void 0},e.ArrConvert=function(e,t){for(var n=e.length%t==0?e.length/t:e.length/t+1,o=new Array,i=0;n>i;i++){for(var r=i*t,a=new Array,s=0;t>s&&r<e.length;)a.push(e[r++]),s++;o.push(a)}return o},e.timerOver=function(e,t){var n=e.replace(/-/g,"/"),o=t.replace(/-/g,"/"),i=Date.parse(n),r=Date.parse(o),a=i-r,s=Math.floor(a/864e5),l=a%864e5,c=Math.floor(l/36e5),u=l%36e5,h=Math.floor(u/6e4),g=u%6e4,p=Math.round(g/1e3),f=s+"天"+c+"时"+h+"分"+p;return f},e.playTweenAnimation=function(e,t){if(t)for(var n in e.items)e.items[n].props={loop:!0};e.play()},e.PlayBgSound=function(e,t){var n=RES.getRes(e);return n.play(0,t),n},e.isWeiXin=function(){var e=window.navigator.userAgent.toLowerCase(),t=""+e.match(/MicroMessenger/i);return"null"==t?!1:"micromessenger"==t?!0:void 0},e.getRandom=function(t,n){n=n||1,t=t||0,e.seed=(9301*e.seed+49297)%233280;var o=e.seed/233280;return t+o*(n-t)},e.MAXK=1e5,e.MAXM=1e6,e.MAXK1=1e3,e.seed=5,e}();__reflect(Utils.prototype,"Utils");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var core;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.rect=new eui.Rect,e.rect.alpha=0,e.rect.width=GameConfig.WIDTH,e.rect.height=GameConfig.HEIGHT,e}return __extends(n,t),n.prototype.show=function(){var t=e.LayerManager.getInstance().getLayer(e.LayerManager.Layer_Top);t.addChild(this.rect)},n.prototype.hide=function(){if(this.parent&&this.parent.removeChild(this),this.rect.parent){var t=e.LayerManager.getInstance().getLayer(e.LayerManager.Layer_Top);t.removeChild(this.rect)}},n}(eui.Component);e.BaseTops=t,__reflect(t.prototype,"core.BaseTops")}(core||(core={}));var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,o){function i(e){t.call(o,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(o))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(o,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(o,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var l=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(o,generateJSON.paths[e])},this):RES.getResByUrl(l,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(o,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(o,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var CheckBanner=function(e){function t(){var t=e.call(this)||this;return t.betArr=[],t.btnArr=[],t.leftIndex=0,t.curIndex=0,t.skinName=CheckBanerSkin,t}return __extends(t,e),t.prototype.onAdd=function(){e.prototype.onAdd.call(this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSubIndex,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddIndex,this)},t.prototype.onRemoved=function(){e.prototype.onRemove.call(this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSubIndex,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddIndex,this)},t.prototype.initArr=function(e,t){if(this.betArr=e,this.bGroup||(this.bGroup=new eui.RadioButtonGroup,this.bGroup.addEventListener(egret.Event.CHANGE,this.onChange,this)),0==this.btnArr.length)for(var n=0;10>n;n++){var o=this["btn"+n];o&&(this.btnArr.push(o),o.group=this.bGroup,o.value=n)}this.setIndex(t)},t.prototype.onChange=function(){var e=this.bGroup.selectedValue;this.curIndex=e,this.updata(),this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},t.prototype.setIndex=function(e){this.curIndex=2,this.leftIndex=e-2,this.updata(),this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},t.prototype.getIndex=function(){return this.curIndex+this.leftIndex},t.prototype.btnIndex=function(e){var t=e.currentTarget.name.substr(3);console.log("index == "+t);for(var n=0;5>n;n++)n==parseInt(t)?this.btnArr[n].selected=!0:this.btnArr[n].selected=!1},t.prototype.onSubIndex=function(){this.curIndex>0?this.curIndex--:this.leftIndex>0&&this.leftIndex--,this.updata(),this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},t.prototype.onAddIndex=function(){this.curIndex<this.btnArr.length-1?this.curIndex++:this.leftIndex<this.betArr.length-this.btnArr.length&&this.leftIndex++,this.updata(),this.dispatchEvent(new egret.Event(egret.Event.CHANGE))},t.prototype.updata=function(){0==this.leftIndex&&0==this.curIndex?this.leftBtn.enabled=!1:this.leftBtn.enabled=!0,this.leftIndex==this.betArr.length-this.btnArr.length?this.rightBtn.enabled=!1:this.rightBtn.enabled=!0,this.btnArr[this.curIndex].selected=!0;for(var e=0;e<this.btnArr.length;e++)this.btnArr[e].label=this.betArr[this.leftIndex+e].toFixed(2)},t.prototype.setTouchEnable=function(e){this.leftBtn.enabled=this.rightBtn.enabled=e;for(var t=0;t<this.btnArr.length;t++)this.btnArr[t].enabled=e},t.prototype.setEnable=function(e){for(var t=0;5>t;t++)this.btnArr[t].enabled=e;this.leftBtn.enabled=e,this.rightBtn.enabled=e},t}(MyCompoment);__reflect(CheckBanner.prototype,"CheckBanner");var MosueCheckBox=function(e){function t(){var t=e.call(this)||this;return mouse.setButtonMode(t,!0),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(mouse.MouseEvent.ROLL_OVER,this.onRollOver,this),this.addEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRollOut,this),egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onRemove=function(){this.onRollOut(),this.removeEventListener(mouse.MouseEvent.ROLL_OVER,this.onRollOver,this),this.removeEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRollOut,this),egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)
},t.prototype.onRollOver=function(){0!=this.enabled&&(this.selected?this.currentState="rollOverAndSelected":this.currentState="rollOver")},t.prototype.onRollOut=function(){this.currentState=""},t.prototype.onClick=function(){SoundManager.getInstance().playEffect(SoundConst.BUTTON)},t}(eui.CheckBox);__reflect(MosueCheckBox.prototype,"MosueCheckBox");var MosueRadioButton=function(e){function t(){var t=e.call(this)||this;return mouse.setButtonMode(t,!0),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRollOver,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRollOut,this),this.stage.addEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onRemove=function(){this.onRollOut(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRollOver,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRollOut,this),this.stage.removeEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onRollOver=function(){0!=this.enabled&&(this.selected?this.currentState="rollOverAndSelected":this.currentState="rollOver")},t.prototype.onRollOut=function(){this.currentState=""},t.prototype.onClick=function(){SoundManager.getInstance().playEffect(SoundConst.BUTTON)},t}(eui.RadioButton);__reflect(MosueRadioButton.prototype,"MosueRadioButton");var MouseButton=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),mouse.setButtonMode(t,!0),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onRollOver,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRollOut,this),egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onRemove=function(){this.onRollOut(),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onRollOver,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onRollOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRollOut,this),egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this)},t.prototype.onRollOver=function(){0!=this.enabled&&(this.currentState="rollOver")},t.prototype.onRollOut=function(){this.currentState=""},t.prototype.onClick=function(){SoundManager.getInstance().playEffect(SoundConst.BUTTON)},t}(eui.Button);__reflect(MouseButton.prototype,"MouseButton");var MouseButton2=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this),this.iconDisplay=new eui.Image,this.iconDisplay.visible=!1,this.addChild(this.iconDisplay)},t.prototype.onRemove=function(){this.onRollOut(),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onRollOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onRollOut,this),egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.ROLL_OUT,this.onRollOut,this)},t.prototype.onRollOver=function(){0!=this.enabled&&this.rollover&&(this.currentState="rollOver",this.rollover.call(this.callobj,this))},t.prototype.onRollOut=function(){this.currentState="",this.rollout&&this.rollout.call(this.callobj,this)},t.prototype.setF=function(e,t,n){this.rollover=e,this.rollout=t,this.callobj=n},t.prototype.setEnable=function(e){var t=this;this.enabled=e,this.iconDisplay.visible=!e;var n=this.name.charAt(2);e?(egret.Tween.removeTweens(this),this.icon="line"+n+"_icon_png"):egret.Tween.get(this,{loop:!0}).wait(300).call(function(){t.icon="line"+n+"_aicon_png"},this).wait(500).call(function(){t.icon="line"+n+"_icon_png"},this).wait(500).call(function(){t.icon="line"+n+"_aicon_png"},this)},t}(eui.Button);__reflect(MouseButton2.prototype,"MouseButton2");var GameConfig=function(){function e(){}return e.loadLocalData=function(){},Object.defineProperty(e,"WIDTH",{get:function(){return egret.MainContext.instance.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HEIGHT",{get:function(){return egret.MainContext.instance.stage.stageHeight},enumerable:!0,configurable:!0}),e.bili=1e4,e.autoChangeBet=!0,e.autoPlay=!1,e.freeNum=0,e.isData=!1,e.speedPlay=!1,e.emptyPlay=!1,e.someWin=!1,e.freeWin=!0,e.singleWinMaxCount=400,e.singleWinCurCount=0,e.moneyAddMax=4e3,e.moneyAddCur=0,e.moneySubMax=4e3,e.moneySubCur=0,e.key_money=0,e.MAX_WIDTH=1650,e.DES_WIDTH=1200,e.DES_HEIGHT=912,e.ITEM_W=64,e.ITEM_H=64,e.DISTANCE=5,e.LANG="cn",e.USER_ID="18996802289",e.NICK_NAME="大西瓜",e.ACOUNT=5001,e.biliArr=[1,10,20,30,40,50,60,70,80,90,100],e.autoPlayArr=[10,20,50,75,100],e.langObj={1:{cn:"不知道干什么",tw:"不知道幹什麼",en:"nothing to do"},2:{cn:"背景音乐",tw:"背景音樂",en:"bg music"},3:{cn:"背景音效",tw:"背景音效",en:"effect music"},4:{cn:"历史下注记录",tw:"歷史下注記錄",en:"history"},5:{cn:"规则",tw:"規則",en:"rule"},6:{cn:"离开",tw:"離開",en:"leave"},7:{cn:"网络断线，请重新开始游戏或检查连线状态!",tw:"網絡斷線，請重新開始遊戲或檢查連線狀態！",en:"Network disconnection, please restart the game or check the connection status!"},8:{cn:"继续加油",tw:"繼續加油",en:"go on"},9:{cn:"不要气馁，好运气快来了",tw:"不要氣餒，好運氣快來了",en:"Don't be discouraged. Good luck is coming"},10:{cn:"好样的",tw:"好樣的",en:"Good job"}},e.CasinoGame={Game_id:"T5080501001",GameCode:".",Skin:"normal",Link_auth:"a3adba9f9b56ccb2ea9faff460248c8d",UrlBase:"ws://172.104.44.114:8086",PartnerId:"t50",PlayerId:"user-035",Token:"DF87AE8CEC65ED753B2F9CCAC0AA3857",IP:":",Language:"chs",GameCanvas:"game_block",vtoken_interval:10,Denom:"32767",guest:"0",crnex:"",udf1:"",udf2:":",udf3:"",udf4:"",udf5:"",UrlRes:":",NjsHost:"172.104.44.114"},e}();__reflect(GameConfig.prototype,"GameConfig");var MyHslider=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){var e=this;this.tsbar.visible=!1,this.addEventListener(egret.Event.CHANGE,function(){e.tsbar.width=e.value/e.maximum*293,e.tsbar.visible=!0,console.log("this.value ==== "+e.value)},this),this.testBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){console.log("鼠标===="+(t.stageX-81-81-304)),e.thumb.x=t.stageX-81-81-304},this)},t.prototype.updata=function(){this.tsbar.width=this.value/this.maximum*293},t}(eui.HSlider);__reflect(MyHslider.prototype,"MyHslider");var core;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName=NomalLoadingUISkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.yuan.play(0)},t.prototype.setPross=function(e,t){var n=e/t;this.bar.x=310*-(1-n)},t}(e.BaseUI);e.NomalLoadingUI=t,__reflect(t.prototype,"core.NomalLoadingUI")}(core||(core={}));var NormalErrorTips=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(BaseTips);__reflect(NormalErrorTips.prototype,"NormalErrorTips");var NormalOkTips=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t.skinName=NormalOkTipsSkin,t}return __extends(t,e),t}(BaseTips);__reflect(NormalOkTips.prototype,"NormalOkTips");var STogleButton=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdd,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(){SoundManager.getInstance().playEffect(SoundConst.BUTTON)},t}(eui.ToggleButton);__reflect(STogleButton.prototype,"STogleButton");var core;!function(e){var t=function(){function e(){}return e.NomalLoadingUI="core.NomalLoadingUI",e.LoginUI="LoginUI",e.MainScenceUI="MainScenceUI",e.GameScence="GameScence",e.NetUI="NetUI",e.NetCloseUI="NetCloseUI",e.SetUI="SetUI",e.AutoPlayUI="AutoPlayUI",e.StipsUI="StipsUI",e.SpeedTipsUI="SpeedTipsUI",e}();e.UIConst=t,__reflect(t.prototype,"core.UIConst")}(core||(core={}));var core;!function(e){var t=function(){function t(){}return t.openUI=function(n,o,i){void 0===o&&(o=e.LayerManager.Layer_UI),void 0===i&&(i=0),o==e.LayerManager.Layer_UI&&this.checkLastUI();var r;if(this.pool[n])r=this.pool[n],t.showUI(r,o,i);else{var a=egret.getDefinitionByName(n);r=new a,r.layer=o,this.pool[n]=r,t.showUI(r,o,i),e.LayerManager.getInstance().addUI(r,o)}},t.checkLastUI=function(){for(var t in this.pool){var n=this.pool[t];n.layer==e.LayerManager.Layer_UI&&n.isShow&&n.close()}},t.isUIOpen=function(e){return this.pool[e]?this.pool[e].isShow:!1},t.getUI=function(e){return this.pool[e]?t.pool[e]:null},t.closeUI=function(e){this.pool[e]&&this.pool[e].close()},t.showUI=function(t,n,o){void 0===o&&(o=0),e.LayerManager.getInstance().addUI(t,n),t.validateNow(),t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;var i=GameConfig.WIDTH/2,r=GameConfig.HEIGHT/2;switch(t.x=i,t.y=r,o){case 0:t.scaleX=1,t.scaleY=1;break;case 1:egret.Tween.get(t).to({scaleX:1,scaleY:1},500);break;case 2:}t.x=0,t.y=0},t.pool={},t}();e.UIManager=t,__reflect(t.prototype,"core.UIManager")}(core||(core={}));var core;!function(e){var t=function(e){function t(t,n){var o=e.call(this)||this;return o.index=0,o.LEN=0,o.isTouch=!1,o.isplaying=!1,o.initView(t,n),o}return __extends(t,e),t.prototype.initView=function(e,t){this.container=e,this.itemArr=[];for(var n=0;3>n;n++){var o=new t;this.itemArr.push(o),this.container.addChild(o)}this.container.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this)},t.prototype.setData=function(e){this.dataArr=e,this.setIndex(0),this.startPlay()},t.prototype.setIndex=function(e){var t=this;this.isplaying=!0,egret.Tween.get(this.container).wait(400).call(function(){t.isplaying=!1},this),(0>e||e>=this.dataArr.length)&&(this.index=0),this.index=e;for(var n=0;n<this.itemArr.length;n++){this.itemArr[n].y=this.container.height/2-this.itemArr[n].height/2;var o=(n-1)*this.container.width+(this.container.width/2-this.itemArr[n].width/2),i=this.itemArr[n],r=i.x;Math.abs(r-o)>this.container.width?i.x=o:(i.alpha=.4,egret.Tween.get(i).to({x:o},400,egret.Ease.cubicOut),egret.Tween.get(i).to({alpha:1},400));var a=n+this.index-1>this.dataArr.length-1?0:n+this.index-1;n+this.index-1>this.dataArr.length-1?a=0:n+this.index-1<0&&(a=this.dataArr.length-1),i.setData(this.dataArr[a])}},t.prototype.onBegin=function(e){this.isplaying||(this.isTouch=!0,this.cX=e.stageX,this.cY=e.stageY,this.tX=this.cX,this.tY=this.cY,this.stopPlay())},t.prototype.onMove=function(e){if(this.isTouch){var t=e.stageX-this.tX;if(this.tX-this.cX>this.container.width/2)return;for(var n=0;n<this.itemArr.length;n++){var o=this.itemArr[n];o.alpha=.5,o.x+=t}this.tX+=t}},t.prototype.onEnd=function(e){if(this.isTouch){this.startPlay(),this.isTouch=!1;var t=e.stageX;if(t-this.cX>300){this.subIndex();var n=this.itemArr[0],o=this.itemArr[1],i=this.itemArr[2];this.itemArr=[i,n,o]}else if(t-this.cX<-300){this.addIndex();var n=this.itemArr[0],o=this.itemArr[1],i=this.itemArr[2];this.itemArr=[o,i,n]}this.setIndex(this.index),this.dispatchEventWith(egret.Event.CHANGE)}},t.prototype.addIndex=function(){this.index<this.dataArr.length-1?this.index+=1:this.index=0},t.prototype.subIndex=function(){this.index>0?this.index-=1:this.index=this.dataArr.length-1},t.prototype.startPlay=function(){var e=this;void 0==this.t&&(this.t=egret.setInterval(function(){e.subIndex();var t=e.itemArr[0],n=e.itemArr[1],o=e.itemArr[2];e.itemArr=[o,t,n],e.setIndex(e.index),e.dispatchEventWith(egret.Event.CHANGE)},this,7e3))},t.prototype.stopPlay=function(){void 0!=this.t&&(egret.clearInterval(this.t),this.t=void 0)},t.prototype.setIndex2=function(e){var t=this;if(this.index!=e){if(this.stopPlay(),this.index>e){this.subIndex();var n=this.itemArr[0],o=this.itemArr[1],i=this.itemArr[2];this.itemArr=[i,n,o]}else{this.addIndex();var n=this.itemArr[0],o=this.itemArr[1],i=this.itemArr[2];this.itemArr=[o,i,n]}this.setIndex(this.index),this.dispatchEventWith(egret.Event.CHANGE),egret.setTimeout(function(){t.startPlay()},this,500)}},t}(egret.EventDispatcher);e.MyScorll=t,__reflect(t.prototype,"core.MyScorll")}(core||(core={}));var MyScreenAdapter=function(){function e(){}return e.prototype.calculateStageSize=function(e,t,n,o,i){var r=t,a=n,s=o,l=i,c=t/s||0,u=n/l||0;switch(e){case egret.StageScaleMode.EXACT_FIT:break;case egret.StageScaleMode.FIXED_HEIGHT:s=Math.round(t/u);break;case egret.StageScaleMode.FIXED_WIDTH:l=Math.round(n/c);break;case egret.StageScaleMode.NO_BORDER:c>u?a=Math.round(l*c):r=Math.round(s*u);break;case egret.StageScaleMode.SHOW_ALL:c>u?r=Math.round(s*u):window.innerWidth/window.innerHeight>GameConfig.DES_WIDTH/GameConfig.DES_HEIGHT?r=Math.round(s*u):a=Math.round(l*c);break;case egret.StageScaleMode.FIXED_NARROW:c>u?s=Math.round(t/u):l=Math.round(n/c);break;case egret.StageScaleMode.FIXED_WIDE:c>u?l=Math.round(n/c):s=Math.round(t/u);break;default:s=t,l=n}return egret.Capabilities.runtimeType!=egret.RuntimeType.WXGAME&&(s%2!=0&&(s+=1),l%2!=0&&(l+=1),r%2!=0&&(r+=1),a%2!=0&&(a+=1)),{stageWidth:s,stageHeight:l,displayWidth:r,displayHeight:a}},e}();__reflect(MyScreenAdapter.prototype,"MyScreenAdapter",["egret.sys.IScreenAdapter"]);var ErrorCode=function(){function e(){}return e.codeArr={9000:"短信发送时间间隔太短"},e}();__reflect(ErrorCode.prototype,"ErrorCode");var vo;!function(e){var t=function(){function e(){}return e.balance=549.88,e.autoPlayCount=0,e.allFreeCount=0,e.payData={M0:{3:50},M1:{3:40},M2:{3:30},M3:{3:10},M4:{3:10}},e.betScoreArr=[1,2,3,4,5,10,15,20,25,30,35,40,45,50,75,100,150,200,250,300,350,400,450,500,600,700,800,900,1e3],e.betIndex=4,e.lineArr={1:[1,1,1],2:[0,0,0],3:[2,2,2],4:[0,1,2],5:[2,1,0]},e.lineNum=5,e.reelArr=[["M4","M2","M3","M4","M0","M3","M2","M3","M4","M1","M1","M2","M4","M1"],["M4","M1","M3","M1","M1","M2","M0","M4","M1","M2","M3","M4","M4","M2"],["M4","M2","M2","M3","M1","M0","M3","M2","M0","M2","M3","M1","M4","M3"]],e.rellInitArr=[{Idx:0,Pos:0},{Idx:1,Pos:0},{Idx:2,Pos:0}],e}();e.GameData=t,__reflect(t.prototype,"vo.GameData");var n=function(){function e(){}return e.prototype.readData=function(e){},e}();e.BaseInfo=n,__reflect(n.prototype,"vo.BaseInfo");var o=function(e){function t(){var t=e.call(this)||this;return t.resultArr=[{Idx:0,Pos:11},{Idx:1,Pos:11},{Idx:2,Pos:11}],t.indexArr=[],t.allwin=0,t}return __extends(t,e),t.prototype.readData=function(e){},t.prototype.readPlayAction=function(e){},t}(n);e.SlotInfo=o,__reflect(o.prototype,"vo.SlotInfo")}(vo||(vo={}));var GameType;!function(e){var t=function(){function e(){}return e}();e.ItemType=t,__reflect(t.prototype,"GameType.ItemType");var n=function(){function e(){}return e.trueModle=0,e.falseModle=1,e}();e.GameModule=n,__reflect(n.prototype,"GameType.GameModule");var o=function(){function e(){}return e.PLAYING=1,e.STOP=0,e}();e.GameState=o,__reflect(o.prototype,"GameType.GameState");var i=function(){function e(){}return e.CN="cn",e.TW="tw",e.EN="en",e}();e.LangType=i,__reflect(i.prototype,"GameType.LangType");var r=function(){function e(){}return e.NOMAL_REWARD=1,e.NO_REWARD=0,e.BIG_REWARD=2,e.FREE_REWARD=3,e.BIG_AND_FREE=4,e}();e.RewardType=r,__reflect(r.prototype,"GameType.RewardType")}(GameType||(GameType={}));var AutoPlayUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=AutoPlayUISkin,t}return __extends(t,e),t.prototype.onAdd=function(){if(e.prototype.onAdd.call(this),this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.okBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.btn0,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.btn1,egret.TouchEvent.TOUCH_TAP,this.onTab,this),!this.bGroup){this.bGroup=new eui.RadioButtonGroup,this.bGroup.addEventListener(egret.Event.CHANGE,this.onChange,this);for(var t=0;5>t;t++){var n=this["rb"+t];n.value=GameConfig.autoPlayArr[t],n.group=this.bGroup,2==t&&(n.selected=!0,this.bGroup.selectedValue=n.value)}this.slider0.addEventListener(egret.Event.CHANGE,this.onSliderChange,this),this.slider0.id=0,this.numLabel0.text=this.slider0.value.toFixed(2)+"",this.slider1.addEventListener(egret.Event.CHANGE,this.onSliderChange,this),this.slider1.id=1,this.numLabel1.text=this.slider1.value.toFixed(2)+"",this.slider2.addEventListener(egret.Event.CHANGE,this.onSliderChange,this),this.slider2.id=2,this.numLabel2.text=this.slider2.value.toFixed(2)+""}this.slider0.maximum=GameConfig.singleWinMaxCount,this.slider0.updata(),this.slider1.maximum=GameConfig.moneyAddMax,this.slider1.updata(),this.slider2.maximum=GameConfig.moneySubMax,this.slider2.updata(),this.btn1.selected=GameConfig.freeWin,this.clearValue()},t.prototype.clearValue=function(){this.slider0.value=0,this.slider1.value=0,this.slider2.value=0,this.slider0.updata(),this.slider1.updata(),this.slider2.updata(),this.numLabel0.text=this.slider0.value.toFixed(2)+"",this.numLabel1.text=this.slider1.value.toFixed(2)+"",this.numLabel2.text=this.slider2.value.toFixed(2)+""},t.prototype.onChange=function(e){var t=this.bGroup.selectedValue;GameConfig.autoPlayArr[t]},t.prototype.onSliderChange=function(e){this.slider0.snapInterval=20*vo.GameData.betScoreArr[vo.GameData.betIndex],this.slider1.snapInterval=200*vo.GameData.betScoreArr[vo.GameData.betIndex],this.slider2.snapInterval=200*vo.GameData.betScoreArr[vo.GameData.betIndex];var t=e.currentTarget,n=t.id;this["numLabel"+n].text=t.value.toFixed(2)+""},t.prototype.onTab=function(e){switch(e.currentTarget){case this.closeBtn:GameManager.getInstance().resume(),core.UIManager.closeUI(core.UIConst.AutoPlayUI);break;case this.okBtn:this.readData(),GameManager.getInstance().autoStartGame(),core.UIManager.closeUI(core.UIConst.AutoPlayUI);break;case this.btn0:GameConfig.someWin=this.btn0.selected;break;case this.btn1:GameConfig.freeWin=this.btn1.selected}},t.prototype.readData=function(){GameConfig.singleWinCurCount=this.slider0.value,GameConfig.moneyAddCur=this.slider1.value,GameConfig.moneySubCur=this.slider2.value,vo.GameData.autoPlayCount=this.bGroup.selectedValue,GameConfig.someWin=this.btn0.selected,GameConfig.freeWin=this.btn1.selected},t}(core.BaseUI);__reflect(AutoPlayUI.prototype,"AutoPlayUI");var LoginUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=LoginSkin,t}return __extends(t,e),t.prototype.onAdd=function(){e.prototype.onAdd.call(this),this.registerEvent(this,egret.TouchEvent.TOUCH_TAP,this.onGo,this)},t.prototype.onGo=function(){core.UIManager.openUI(core.UIConst.MainScenceUI)},t}(core.BaseUI);__reflect(LoginUI.prototype,"LoginUI");var NetCloseUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=netcloseSkin,t}return __extends(t,e),t.prototype.onAdd=function(){e.prototype.onAdd.call(this),this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this)},t.prototype.onTab=function(){window.close()},t}(core.BaseUI);__reflect(NetCloseUI.prototype,"NetCloseUI");var NetUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=NetSkin,t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.childrenCreated=function(){},t.prototype.showNetting=function(){var e=this,t=core.LayerManager.getInstance().getLayer(core.LayerManager.Layer_Tip);t.addChild(this),this.netingIcon.rotation=0,egret.Tween.get(this.netingIcon,{loop:!0}).to({rotation:-12e3},6e4).call(function(){e.netingIcon.rotation=0})},t.prototype.hideNetting=function(){egret.Tween.removeTweens(this.netingIcon),this.parent&&this.parent.removeChild(this)},t}(core.BaseUI);__reflect(NetUI.prototype,"NetUI");var SetUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=SetSkin,t}return __extends(t,e),t.prototype.onAdd=function(){e.prototype.onAdd.call(this),this.registerEvent(this.autoBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.emptyketBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.speedBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.musicBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.exitBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this,egret.Event.ENTER_FRAME,this.onEnter,this),this.updata()},t.prototype.onEnter=function(){console.log("ENTER_FRAMEENTER_FRAMEENTER_FRAME");var e=GameConfig.WIDTH/GameConfig.HEIGHT-GameConfig.DES_WIDTH/GameConfig.DES_HEIGHT;this.setGroup.scaleX=1+e/1.5,this.setGroup.scaleY=1+e/1.5},t.prototype.updata=function(){this.autoBtn.selected=GameConfig.autoChangeBet,this.speedBtn.selected=GameConfig.speedPlay,this.musicBtn.selected=SoundManager.getInstance().effectOn,this.emptyketBtn.selected=GameConfig.emptyPlay},t.prototype.onTab=function(e){switch(e.currentTarget){case this.musicBtn:this.updataSound();break;case this.autoBtn:GameConfig.autoChangeBet=this.autoBtn.selected;break;case this.speedBtn:this.updataSpeedTime();break;case this.emptyketBtn:this.updataEmpty();break;case this.exitBtn:core.UIManager.closeUI(core.UIConst.SetUI),GameManager.getInstance().resume()}},t.prototype.updataSpeedTime=function(){GameConfig.speedPlay=this.speedBtn.selected;var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.shanBtn.selected=GameConfig.speedPlay},t.prototype.updataSound=function(){SoundManager.getInstance().setBgOn(this.musicBtn.selected),SoundManager.getInstance().setEffectOn(this.musicBtn.selected);var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.musicBtn.selected=this.musicBtn.selected,this.musicBtn.selected||GameManager.getInstance().stopMusic()},t.prototype.updataEmpty=function(){GameConfig.emptyPlay=this.emptyketBtn.selected},t}(core.BaseUI);__reflect(SetUI.prototype,"SetUI");var SpeedTipsUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=SpeedTipsSkin,t}return __extends(t,e),t.prototype.onAdd=function(){var t=this;e.prototype.onAdd.call(this),this.registerEvent(this.nono,egret.TouchEvent.TOUCH_TAP,function(){t.callfun&&t.callfun(),core.UIManager.closeUI(core.UIConst.SpeedTipsUI),GameManager.getInstance().resume()},this),this.registerEvent(this.yesyes,egret.TouchEvent.TOUCH_TAP,function(){t.callfun&&t.callfun(),GameConfig.speedPlay=!0;var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.shanBtn.selected=GameConfig.speedPlay,core.UIManager.closeUI(core.UIConst.SpeedTipsUI),GameManager.getInstance().resume()},this)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this)},t.prototype.shows=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=null),this.titleLabel.text=e,this.desLabel.text=t,this.callfun=n},t}(core.BaseUI);__reflect(SpeedTipsUI.prototype,"SpeedTipsUI");var StipsUI=function(e){function t(){var t=e.call(this)||this;return t.skinName=StipSkin,t}return __extends(t,e),t.prototype.onAdd=function(){var t=this;e.prototype.onAdd.call(this),this.registerEvent(this.okBtn,egret.TouchEvent.TOUCH_TAP,function(){t.callfun&&t.callfun(),core.UIManager.closeUI(core.UIConst.StipsUI)},this)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this)},t.prototype.shows=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=null),this.titleLabel.text=e,this.desLabel.text=t,this.callfun=n},t}(core.BaseUI);__reflect(StipsUI.prototype,"StipsUI");var GameScence=function(e){function t(){var t=e.call(this)||this;return t.reelArr=[],t.isinit=!1,t.mouseBtnIndex=9,t.kaiguan=!0,t.skinName=GameScenceSkin,mouse.setButtonMode(t,!0),t}return __extends(t,e),t.prototype.init=function(){if(!this.isinit){for(var e=0;3>e;e++){var t=this["reel"+e];this.reelArr.push(this["reel"+e]),t.reelArr=vo.GameData.reelArr[e],t.index=e,t.init()}for(var e=1;e<=vo.GameData.lineNum;e++)this["rm"+e].name="rm"+e,this["lm"+e].name="lm"+e,this["rm"+e].addEventListener(mouse.MouseEvent.MOUSE_OVER,this.test1,this),this["lm"+e].addEventListener(mouse.MouseEvent.MOUSE_OVER,this.test1,this),this["rm"+e].addEventListener(mouse.MouseEvent.MOUSE_OUT,this.test3,this),this["lm"+e].addEventListener(mouse.MouseEvent.MOUSE_OUT,this.test3,this);this.allGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeAll,this),this.isinit=!0}},t.prototype.closeAll=function(){var e=this;console.log("关闭最后结算"),this.allGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeAll,this);var t=core.UIManager.getUI(core.UIConst.MainScenceUI);vo.GameData.balance=vo.GameData.resultData.Value.Balance,t.setMoney(vo.GameData.balance),egret.Tween.removeTweens(this.group);var n=vo.GameData.slotInfo.allwin;t.hideAllWin1(),t.hideHouzi(),egret.Tween.get(this.group).to({scaleX:1.1,scaleY:1.1},100,egret.Ease.backOut).to({scaleX:0,scaleY:0},300,egret.Ease.backIn).call(function(){e.allGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,e.closeAll,e),GameManager.getInstance().showTips("免费旋转中赢得CNY "+n+".00"),e.maskRect.visible=e.group.visible=!1,GameConfig.autoPlay&&0==GameManager.getInstance().getFreeCount()&&GameManager.getInstance().autoStartGame()}),GameManager.getInstance().enterPlayingState1(),t.setBG(!1)},t.prototype.reset=function(){for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e],n=vo.GameData.slotInfo.resultArr[e].Pos+1>=vo.GameData.reelArr[e].length?0:vo.GameData.slotInfo.resultArr[e].Pos+1;t.setCurIndex(n,!1)}this.clearAll()},t.prototype.startReel=function(){SoundManager.getInstance().playEffect(SoundConst.REEL_START);for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e];t.start()}},t.prototype.startData=function(){for(var e=core.UIManager.getUI(core.UIConst.MainScenceUI),t=0;t<e.gameScence.reelArr.length;t++){var n=e.gameScence.reelArr[t],o=vo.GameData.slotInfo.resultArr[t].Pos+1>=vo.GameData.reelArr[t].length?0:vo.GameData.slotInfo.resultArr[t].Pos+1;n.goIndex(o)}vo.GameData.slotInfo.resultArr=[],GameConfig.isData=!0},t.prototype.stopReel=function(){for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e];t.curTime+=5e3}},t.prototype.pausme=function(){for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e];t.pausme()}},t.prototype.resume=function(){for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e];t.resume()}},t.prototype.onRollOver=function(e){var t=e,n=t.name.charAt(2),o=core.UIManager.getUI(core.UIConst.MainScenceUI);this.mouseBtnIndex=n,GameManager.getInstance().gameState==GameType.GameState.PLAYING||GameConfig.autoPlay||0!=GameManager.getInstance().getFreeCount()||0==o.indexLine||(this["line"+n].visible=!0,this.btn=t)},t.prototype.onRollOut=function(e){var t=e,n=t.name.charAt(2);this.mouseBtnIndex=9,this["line"+n].visible=!1,this.btn=t},t.prototype.clearAll=function(){this.kaiguan=!1;for(var e=1;e<=vo.GameData.lineNum;e++)if(e!=this.mouseBtnIndex){var t=this["line"+e];egret.Tween.removeTweens(t),t.visible=!1}egret.Tween.removeTweens(this.scoreGroup),this.scoreGroup.scaleX=0,this.scoreGroup.scaleY=0;for(var e=1;e<=vo.GameData.lineNum;e++)this["rm"+e].setEnable(!0),this["lm"+e].setEnable(!0)},t.prototype.showLineWin=function(e,t,n,o){var i=this;this.kaiguan=!0,e||this.setAn();for(var r=vo.GameData.lineArr[""+t.Data.Line],a=0;a<r.length;a++)this.reelArr[a].setliangAndActForIndex(r[a],e);var s=this["line"+t.Data.Line];egret.Tween.removeTweens(s),egret.Tween.removeTweens(this.scoreGroup),this.scoreGroup.visible=!0,this.scoreGroup.scaleX=0,this.scoreGroup.scaleY=0;var l=this["rm"+t.Data.Line],c=this["lm"+t.Data.Line];c.setEnable(!1),l.setEnable(!1);var u=l.y/2+c.y/2+80;2==t.Data.Line?u-=40:3==t.Data.Line&&(u+=20);var h=l.x/2+c.x/2;this.scoreGroup.y=u,this.scoreGroup.x=h+70;var g=t.Reward.BetMultiplier*vo.GameData.betScoreArr[vo.GameData.betIndex]*1e4/5,p=g/GameConfig.bili;this.scoreLabel.text="cny "+p.toFixed(2),GameManager.getInstance().showTips("线"+t.Data.Line+"赢得CNY "+p.toFixed(2)),egret.Tween.get(this.scoreGroup).to({scaleX:1,scaleY:1},300,egret.Ease.backOut).wait(1200).to({scaleX:0,scaleY:0},300),egret.Tween.get(s).to({visible:!0},300).to({visible:!1},300).to({visible:!0},300).to({visible:!1},300).to({visible:!0},300).to({visible:!1},300).call(function(){n&&o&&i.kaiguan&&n.call(o)},this)},t.prototype.showAllLineWin=function(e){for(var t=0;t<e.length;t++){var n=this["line"+e[t].Data.Line];egret.Tween.removeTweens(n),n.visible=!0}},t.prototype.setItem=function(){for(var e=0;e<this.reelArr.length;e++)this.reelArr[e].setItem()},t.prototype.setAn=function(){for(var e=0;e<this.reelArr.length;e++)this.reelArr[e].setAn()},t.prototype.showFreeSlot=function(e){void 0===e&&(e=null),this.allGroup.visible=this.rewardScoreGroup.visible=!1,this.maskRect.visible=this.freeslotGroup.visible=!0,this.maskRect.alpha=1,this.group.alpha=1,this.group.visible=!0,this.group.scaleX=0,this.group.scaleY=0,egret.Tween.get(this.group).to({scaleX:1,scaleY:1},500,egret.Ease.backOut).call(function(){e&&e()})},t.prototype.showRewardGroup=function(e,t,n){var o=this;void 0===n&&(n=null),this.group.visible=!0,this.maskRect.alpha=1,this.group.alpha=1,this.maskRect.visible=this.rewardScoreGroup.visible=!0,this.allGroup.visible=this.freeslotGroup.visible=!1,this.numLabel.visible=!1,this.ewaiLabel.visible=!1,this.group.scaleX=0,this.group.scaleY=0,this.numLabel.text="cny "+(t/GameConfig.bili).toFixed(2),egret.Tween.get(this.group).to({scaleX:1,scaleY:1},500,egret.Ease.backOut).call(function(){o.image0.visible=!0,o.image0.scaleX=o.image0.scaleY=0,o.image1.visible=!0,o.image1.scaleX=o.image1.scaleY=0,o.image2.visible=!0,o.image2.scaleX=o.image2.scaleY=0,egret.Tween.get(o.image0).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:0,scaleY:0},200),egret.Tween.get(o.image2).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:0,scaleY:0},200),egret.Tween.get(o.image1).to({scaleX:1,scaleY:1},400).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:1,scaleY:1},400).to({scaleX:1.5,scaleY:1.5},400).to({scaleX:0,scaleY:0},200).call(function(){egret.Tween.removeTweens(o.image1),egret.Tween.removeTweens(o.image2),egret.Tween.removeTweens(o.image0),o.image1.visible=!1,o.image2.visible=!1,o.image0.visible=!1,o.numLabel.scaleX=1,o.numLabel.scaleY=1,o.numLabel.visible=!0,SoundManager.getInstance().playEffect(SoundConst.BIG_REWARDSHOWS),e.SymbolCount>=3&&(o.ewaiLabel.visible=!0),egret.Tween.get(o.numLabel).to({scaleX:1.2,scaleY:1.2},500,egret.Ease.bounceOut).wait(300).call(function(){n&&o.hideGroup(n,2)
},o)},o)})},t.prototype.showAllWinNumGroup=function(e,t){var n=this;this.maskRect.alpha=1,this.group.alpha=1,this.maskRect.visible=this.group.visible=!0,this.allGroup.visible=!0,this.allnumLabel.text=""+e.toFixed(2),this.rewardScoreGroup.visible=this.freeslotGroup.visible=!1;var o=core.UIManager.getUI(core.UIConst.MainScenceUI);vo.GameData.balance=vo.GameData.resultData.Value.Balance,o.setMoney(vo.GameData.balance);var i=vo.GameData.slotInfo.allwin;o.hideAllWin1(),o.hideHouzi(),egret.Tween.get(this.group).to({scaleX:1,scaleY:1},500,egret.Ease.backOut).wait(5e3).to({scaleX:0,scaleY:0},500,egret.Ease.backIn).call(function(){t&&t(),GameManager.getInstance().showTips("免费旋转中赢得CNY "+i.toFixed(2)),n.maskRect.visible=n.group.visible=!1,GameConfig.autoPlay&&0==GameManager.getInstance().getFreeCount()&&GameManager.getInstance().autoStartGame()},this)},t.prototype.hideGroup=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=1),1==t?(this.maskRect.visible=!1,egret.Tween.get(this.group).to({scaleX:0,scaleY:0},500,egret.Ease.backIn).call(function(){n.group.visible=!1,e&&e()})):2==t&&(egret.Tween.get(this.group).to({alpha:0},500,egret.Ease.backIn).call(function(){n.group.visible=!1,e&&e()}),egret.Tween.get(this.maskRect).to({alpha:0},500).call(function(){n.maskRect.visible=!1},this))},t.prototype.test2=function(){this.onRollOver(this.peifuBtn)},t.prototype.test3=function(e){this.onRollOut(e.currentTarget),this.removeEventListener(egret.Event.ENTER_FRAME,this.test2,this)},t.prototype.test1=function(e){var t=e.currentTarget.hitTestPoint(e.stageX,e.stageY);this.peifuBtn=e.currentTarget,t&&this.addEventListener(egret.Event.ENTER_FRAME,this.test2,this)},t.prototype.showMaozi=function(e,t){var n=this,o=e.Positions,i=vo.GameData.resultData.Value.Main.TotalWin;this.hideMaozi(),this.setAn();for(var r=[[],[],[]],a=0;a<o.length;a++){var s=o[a];r[s.X].push(s)}for(var a=0;a<r.length;a++)if(r[a].length>0){var l=this.reelArr[a];l.showMaozi(r[a])}if(r[1].length>0&&i/GameConfig.bili>0){this.scoreGroup.visible=!0;var c=r[1][0].X,u=r[1][0].Y;this.scoreLabel.text="cny "+i/GameConfig.bili+".00",this.scoreGroup.y=150+150*u,this.scoreGroup.x=230+300*c,this.scoreGroup.scaleX=0,this.scoreGroup.scaleY=0,egret.Tween.get(this.scoreGroup).to({scaleX:1,scaleY:1},500,egret.Ease.backOut).wait(800).to({scaleX:0,scaleY:0},500).call(function(){n.scoreGroup.visible=!1},this)}else if(r[0].length>0&&i/GameConfig.bili>0){this.scoreGroup.visible=!0;var c=r[0][0].X,u=r[0][0].Y;this.scoreLabel.text="cny "+i/GameConfig.bili+".00",this.scoreGroup.y=150+150*u,this.scoreGroup.x=230+300*c,this.scoreGroup.scaleX=0,this.scoreGroup.scaleY=0,egret.Tween.get(this.scoreGroup).to({scaleX:1,scaleY:1},500,egret.Ease.backOut).wait(800).to({scaleX:0,scaleY:0},500).call(function(){n.scoreGroup.visible=!1},this)}else if(i/GameConfig.bili>0){this.scoreGroup.visible=!0;var c=r[2][0].X,u=r[2][0].Y;this.scoreLabel.text="cny "+i/GameConfig.bili+".00",this.scoreGroup.y=150+150*u,this.scoreGroup.x=230+300*c,this.scoreGroup.scaleX=0,this.scoreGroup.scaleY=0,egret.Tween.get(this.scoreGroup).to({scaleX:1,scaleY:1},500,egret.Ease.backOut).wait(800).to({scaleX:0,scaleY:0},500).call(function(){n.scoreGroup.visible=!1},this)}},t.prototype.hideMaozi=function(){for(var e=0;e<this.reelArr.length;e++){var t=this.reelArr[e];t.hideMaozi()}},t}(eui.Component);__reflect(GameScence.prototype,"GameScence");var MainScenceUI=function(e){function t(){var t=e.call(this)||this;return t.indexNum=0,t.indexNum1=0,t.curt=0,t.ruleIsShow=!1,t._bet=0,t._money=0,t._allmoney=0,t.isShowWin=!0,t.skinName=MainScenceUISkin,t}return __extends(t,e),t.prototype.onAdd=function(){var t=this;e.prototype.onAdd.call(this),this.gameScence.init(),this.gameScence.reset(),this.baner.initArr(vo.GameData.betScoreArr,vo.GameData.betIndex),this.registerEvent(this.baner,egret.Event.CHANGE,this.onChange,this),this.registerEvent(this.ruleBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.autoBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.playBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.setBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.historyBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.musicBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.shanBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.qusBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.registerEvent(this.exitBtn,egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.gameScence.dianji.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.hands,this),this.gameScence.dianji.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAni,this),"0"!=egret.localStorage.getItem("isShowlogin")?this.showlogin():this.showMain(),this.showOrHideAutoPlay(GameConfig.autoPlay),GameManager.getInstance().getFreeCount()>0?(this.setBG(!0,!1),egret.setTimeout(function(){t.showMain()},this,900)):this.setBG(!1,!1),this.starMC||(this.starMC=game.MCUtils.getMc("star"),this.strGroup.addChild(this.starMC),this.starMC.visible=!1),this.showAllAnimation(),this.showStar(),this.initfighter(),this.initfighter1(),this.refreshCount()},t.prototype.addListeber=function(){console.log("游戏开始添加滚动界面监听"),this.gameScence.dianji.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.hands,this),this.gameScence.dianji.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAni,this)},t.prototype.initfighter=function(){if(!this.glowFilter){var e=649458,t=.1,n=40,o=40,i=10,r=1,a=!1,s=!1;this.glowFilter=new egret.GlowFilter(e,t,n,o,i,r,a,s)}this.showlabel.filters=[this.glowFilter]},t.prototype.initfighter1=function(){if(!this.glowFilter1){var e=16711680,t=.1,n=11,o=11,i=5,r=3,a=!1,s=!1;this.glowFilter1=new egret.GlowFilter(e,t,n,o,i,r,a,s)}this.moneyLabel.filters=[this.glowFilter1],this.betNumLabel.filters=[this.glowFilter1],this.allNumLabel.filters=[this.glowFilter1]},t.prototype.onRemove=function(){e.prototype.onRemove.call(this)},t.prototype.onChange=function(e){vo.GameData.betIndex=this.baner.getIndex(),this.updataNum(),this.refreshCount()},t.prototype.refreshCount=function(){var e=vo.GameData.betScoreArr[vo.GameData.betIndex];GameConfig.singleWinMaxCount=2e3*e,GameConfig.moneyAddMax=2e4*e,GameConfig.moneySubMax=2e4*e},t.prototype.updataUI=function(){this.autoPlayNumLabel.text=vo.GameData.autoPlayCount+"",this.updataNum(),this.musicBtn.selected=SoundManager.getInstance().effectOn,this.shanBtn.selected=GameConfig.speedPlay},t.prototype.updataNum=function(){var e=vo.GameData.betScoreArr[this.baner.getIndex()];e>this.bet?egret.Tween.get(this).to({bet:e},500):this.bet=e,this.betbanaceLabel.text="投注: CNY "+e.toFixed(2),this.allwin<vo.GameData.slotInfo.allwin?egret.Tween.get(this).to({allwin:vo.GameData.slotInfo.allwin},500):this.allwin=vo.GameData.slotInfo.allwin,this.balance<vo.GameData.balance?egret.Tween.get(this).to({balance:vo.GameData.balance},500):this.balance=vo.GameData.balance},t.prototype.stopAni=function(){var e=this;this.gameScence.dianji.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAni,this),this.gameScence.dianji.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.hands,this),GameManager.getInstance().gameState==GameType.GameState.PLAYING&&(SoundManager.getInstance().playEffect(SoundConst.BUTTON),this.shan.visible=!0,this.shan0.visible=!0,this.shan1.visible=!0,egret.setTimeout(function(){console.log("点击界面停止旋转"),e.shan.visible=!1,e.shan0.visible=!1,e.shan1.visible=!1,e.indexNum1++,GameConfig.speedPlay||3!=e.indexNum1||(e.isSpeed(),GameManager.getInstance().pausume()),e.playBtn.enabled&&GameManager.getInstance().stopGame()},this,200))},t.prototype.hands=function(){GameManager.getInstance().gameState!=GameType.GameState.STOP?mouse.setButtonMode(this.gameScence.dianji,!0):mouse.setButtonMode(this.gameScence.dianji,!1)},t.prototype.onTab=function(e){var t=this;switch(e.currentTarget){case this.playBtn:egret.getTimer()-this.curt>400?(this.curt=egret.getTimer(),GameManager.getInstance().gameState==GameType.GameState.STOP?(this.hideAllWin(),GameManager.getInstance().startGame()):GameManager.getInstance().gameState==GameType.GameState.PLAYING&&(console.log("stopZZZZZZ"),this.gameScence.group.visible||egret.setTimeout(function(){GameManager.getInstance().stopGame(),GameManager.getInstance().enterPlayingState()},this,200))):(this.indexNum++,GameManager.getInstance().gameState==GameType.GameState.PLAYING&&(console.log("stopKKKKK"),this.gameScence.group.visible||egret.setTimeout(function(){GameManager.getInstance().stopGame(),GameManager.getInstance().enterPlayingState(),t.gameScence.dianji.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.stopAni,t)},this,200)),GameConfig.speedPlay||3!=this.indexNum||(this.isSpeed(),GameManager.getInstance().pausume()));break;case this.autoBtn:GameConfig.autoPlay?GameManager.getInstance().autoStopGame():(GameManager.getInstance().pausume(),core.UIManager.openUI(core.UIConst.AutoPlayUI,core.LayerManager.Layer_Top));break;case this.ruleBtn:this.ruleIsShow=!this.ruleIsShow,this.setRule();break;case this.musicBtn:SoundManager.getInstance().setBgOn(this.musicBtn.selected),SoundManager.getInstance().setEffectOn(this.musicBtn.selected),this.musicBtn.selected||GameManager.getInstance().stopMusic();break;case this.setBtn:core.UIManager.openUI(core.UIConst.SetUI,core.LayerManager.Layer_Top),GameManager.getInstance().pausume();break;case this.historyBtn:openHistory();break;case this.shanBtn:GameConfig.speedPlay=this.shanBtn.selected;break;case this.qusBtn:openDes();break;case this.exitBtn:SoundManager.getInstance().playEffect(SoundConst.BUTTON),egret.setTimeout(function(){window.close()},this,200)}},t.prototype.isSpeed=function(){core.UIManager.openUI(core.UIConst.SpeedTipsUI,core.LayerManager.Layer_Top);var e=core.UIManager.getUI(core.UIConst.SpeedTipsUI);e.shows("快速进行","您似乎喜欢较快的游戏节奏。是否启用“快速游戏”模式？\n您可以随时在设置菜单中禁用它。")},t.prototype.setRule=function(){this.ruleGroup.visible=this.ruleIsShow,this.showGroup.visible=this.gameScence.visible=!this.ruleIsShow},Object.defineProperty(t.prototype,"bet",{get:function(){return this._bet},set:function(e){this._bet=e,this.betNumLabel.text="cny "+this._bet.toFixed(2),(12==this.betNumLabel.text.length||13==this.betNumLabel.text.length)&&(this.betNumLabel.scaleX=.9),this.betNumLabel.text.length<12&&(this.betNumLabel.scaleX=1),14==this.betNumLabel.text.length&&(this.betNumLabel.scaleX=.8),this.betNumLabel.text.length>14&&this.betNumLabel.text.length<=15&&(this.betNumLabel.scaleX=.7),this.betNumLabel.text.length>15&&(this.betNumLabel.scaleX=.5)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"balance",{get:function(){return this._money},set:function(e){this._money=e,this.moneyLabel.text="cny "+this._money.toFixed(2),(12==this.moneyLabel.text.length||13==this.moneyLabel.text.length)&&(this.moneyLabel.scaleX=.9),this.moneyLabel.text.length<12&&(this.moneyLabel.scaleX=1),14==this.moneyLabel.text.length&&(this.moneyLabel.scaleX=.8),this.moneyLabel.text.length>14&&this.moneyLabel.text.length<=15&&(this.moneyLabel.scaleX=.7),this.moneyLabel.text.length>15&&(this.moneyLabel.scaleX=.5),this.bananceLabel.text="余额: CNY "+this._money.toFixed(2)},enumerable:!0,configurable:!0}),t.prototype.subScalX=function(e){},Object.defineProperty(t.prototype,"allwin",{get:function(){return this._allmoney},set:function(e){this._allmoney=e,this.allNumLabel.text="cny "+this._allmoney.toFixed(2),(12==this.allNumLabel.text.length||13==this.allNumLabel.text.length)&&(this.allNumLabel.scaleX=.9),this.allNumLabel.text.length<12&&(this.allNumLabel.scaleX=1),14==this.allNumLabel.text.length&&(this.allNumLabel.scaleX=.8),this.allNumLabel.text.length>14&&this.allNumLabel.text.length<=15&&(this.allNumLabel.scaleX=.7),this.allNumLabel.text.length>15&&(this.allNumLabel.scaleX=.5)},enumerable:!0,configurable:!0}),t.prototype.showOrHideAutoPlay=function(e){this.playBtn.visible=!e,this.autoPlayGroup.visible=e,egret.Tween.removeTweens(this.autoPlayTitleLabel),e&&(this.autoPlayTitleLabel.alpha=1,egret.Tween.get(this.autoPlayTitleLabel,{loop:!0}).to({alpha:.3},600).to({alpha:1},600).to({alpha:.3},600))},t.prototype.showAllWin=function(e,t,n,o){var i=this;if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),0==e.length)return void(t&&n&&t.call(n));var r=0;this.isShowWin=!0;var a=!1,s=0;this.indexLine=0;var l,c=250,u=function(){i.gameScence.clearAll(),i.isShowWin&&(0==s?(i.gameScence.showAllLineWin(e),1==e.length?(l=!0,c=80):(l=!1,c=250),GameManager.getInstance().showTips("恭喜您!"),i.winTime=egret.setTimeout(function(){0==r&&SoundManager.getInstance().playEffect(e[s].Symbol+"_mp3"),i.gameScence.clearAll(),0==r&&(vo.GameData.slotInfo.allwin+=e[s].Reward.BetMultiplier*vo.GameData.betScoreArr[vo.GameData.betIndex]*1e4/5/GameConfig.bili,i.setAllWin(vo.GameData.slotInfo.allwin)),i.gameScence.showLineWin(l,e[s],function(){s++,1==e.length&&i.indexLine++,2==e.length&&egret.setTimeout(function(){i.indexLine++},i,1700),3==e.length&&egret.setTimeout(function(){i.indexLine++},i,3700),4==e.length&&egret.setTimeout(function(){i.indexLine++},i,5700),5==e.length&&egret.setTimeout(function(){i.indexLine++},i,9700),s>=e.length&&(s=0,r=1,!a&&t&&n&&(a=!0,t.call(n))),u(),1==s&&o&&o()},i)},i,c)):(0==r&&(vo.GameData.slotInfo.allwin+=e[s].Reward.BetMultiplier*vo.GameData.betScoreArr[vo.GameData.betIndex]*1e4/5/GameConfig.bili,i.setAllWin(vo.GameData.slotInfo.allwin)),0==r&&SoundManager.getInstance().playEffect(e[s].Symbol+"_mp3"),i.gameScence.showLineWin(l,e[s],function(){s++,s>=e.length&&(s=0,r=1,!a&&t&&n&&(a=!0,t.call(n))),u()},i)))};u()},t.prototype.hideAllWin1=function(){egret.clearTimeout(this.winTime),this.gameScence.clearAll(),this.gameScence.setItem(),this.isShowWin=!1},t.prototype.hideAllWin=function(){egret.clearTimeout(this.winTime),this.gameScence.clearAll(),this.gameScence.setItem(),this.isShowWin=!1,0==GameManager.getInstance().getFreeCount()&&vo.GameData.resultData&&(vo.GameData.balance=vo.GameData.resultData.Value.Balance,this.setMoney(vo.GameData.balance))},t.prototype.showHouzi=function(e,t,n){void 0===n&&(n=!1),SoundManager.getInstance().playEffect(SoundConst.HOUZI),this.gameScence.showMaozi(e,n),this.houziTimeout=egret.setTimeout(function(){t&&t()},this,3e3)},t.prototype.hideHouzi=function(){egret.clearTimeout(this.houziTimeout),this.gameScence.hideMaozi()},t.prototype.setAllWin=function(e){e>this.allwin?egret.Tween.get(this).to({allwin:e},500):this.allwin=e,this.rewardLabel.text="奖金: CNY "+e.toFixed(2)},t.prototype.setMoney=function(e){e>this.balance?egret.Tween.get(this).to({balance:e},500):this.balance=e},t.prototype.setBG=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!0),this.qbg0.source=e?"logo_texture1_level1_01-04_png":"logo_texture1_level1_01-03_png",this.qbg1.source=e?"logo_texture1_level1_01-02_png":"logo_texture1_level1_01_png",this.showbg.source=e?"menu2_png":"menu1_png",e){if(!t)return this.bg0.alpha=0,void(this.bg1.alpha=1);egret.Tween.get(this.bg0).to({alpha:0},1e3),egret.Tween.get(this.bg1).to({alpha:1},1e3)}else{if(!t)return this.bg0.alpha=1,void(this.bg1.alpha=0);egret.Tween.get(this.bg0).to({alpha:1},1e3),egret.Tween.get(this.bg1).to({alpha:0},1e3)}},t.prototype.showAllAnimation=function(){var e=this,t=Math.floor(6*Math.random());this.showTitleAnimation(4,function(){4!=t&&e.showQustionAnimatuion(),e.showTitleAnimation(t,function(){e.showAllAnimation()})})},t.prototype.showTitleAnimation=function(e,t){var n,o=this,i=11,r=-1,a=0,s=0,l=0,c=0,u=0,h=0,g=0,p=0;switch(e){case 0:n=egret.setInterval(function(){o["img"+i].visible=-1==r?!1:!0,i+=r,0==i&&(r=1),12==i&&(egret.clearInterval(n),t&&t())},this,60);break;case 1:i=0,r=1,this.setAllZ(!1),n=egret.setInterval(function(){o.setZ(i,!0),i+=r,12==i&&(egret.clearInterval(n),o.setAllZ(!0),t&&t())},this,60);break;case 2:l=5,c=6,a=-1,s=1,n=egret.setInterval(function(){o["img"+l].visible=-1==a?!1:!0,o["img"+c].visible=1==s?!1:!0,l+=a,c+=s,0>l&&(l=0,a=1),c>11&&(c=11,s=-1),5==l&&(egret.clearInterval(n),o.setAllZ(!0),t&&t())},this,60);break;case 3:l=0,c=2,u=4,h=6,g=8,p=10,i=0,r=1,n=egret.setInterval(function(){var e=[l,c,u,h,g,p];o.setArrZ(!0,e),l+=r,c+=r,u+=r,h+=r,g+=r,p+=r,i+=r,l>11&&(l=0),c>11&&(c=0),u>11&&(u=0),h>11&&(h=0),g>11&&(g=0),p>11&&(p=0),i>=12&&(egret.clearInterval(n),o.setAllZ(!0),t&&t())},this,120);break;case 4:this.setAllZ(!0),n=egret.setTimeout(function(){egret.clearTimeout(n),t&&t()},this,3e3);break;case 5:l=0,c=11,a=1,s=-1,n=egret.setInterval(function(){var e=[l,c];o.setArrZ(!1,e),l+=a,c+=s,l>11&&(egret.clearInterval(n),o.showShanZ(function(){t&&t()}))},this,60)}},t.prototype.showQustionAnimatuion=function(){egret.Tween.removeTweens(this.qimg0),egret.Tween.removeTweens(this.qimg1),this.qimg0.alpha=this.qimg1.alpha=1,egret.Tween.get(this.qimg0).to({alpha:0},50).wait(300).to({alpha:1},50).wait(300).to({alpha:0},50).wait(300).to({alpha:1},50),egret.Tween.get(this.qimg1).to({alpha:0},50).wait(300).to({alpha:1},50).wait(300).to({alpha:0},50).wait(300).to({alpha:1},50)},t.prototype.setZ=function(e,t){for(var n=0;12>n;n++)n==e?this["img"+n].visible=t:this["img"+n].visible=!t},t.prototype.setAllZ=function(e){for(var t=0;12>t;t++)this["img"+t].visible=e},t.prototype.setArrZ=function(e,t){for(var n=0;12>n;n++){this["img"+n].visible=!e;for(var o=0;o<t.length;o++)n==t[o]&&(this["img"+n].visible=e)}},t.prototype.showShanZ=function(e){var t,n=this,o=0;this.setAllZ(!0),t=egret.setInterval(function(){var i=o%2==0?!1:!0;n.setAllZ(i),o++,o>4&&(egret.clearInterval(t),n.setAllZ(!0),e&&e())},this,300)},t.prototype.showStar=function(){var e=this;this.starMC.visible=!0;var t=Math.random(),n=Math.random(),o=t>.5?300+300*Math.random():300-300*Math.random(),i=n>.5?60+50*Math.random():50-60*Math.random();7>o&&(o=7),o>700&&(o=700),i>88&&(i=88),13>i&&(i=13),o>=372&&448>=o&&(o=415),i>=10&&88>=i&&(i=52),this.starMC.x=o,this.starMC.y=i,this.starMC.gotoAndPlay("star"),this.starMC.once(egret.MovieClipEvent.COMPLETE,function(){e.showStar()},this)},t.prototype.hideStar=function(){this.starMC.stop(),this.starMC.visible=!1},t.prototype.showlogin=function(){this.preview.visible=this.logoImg.visible=!0,this.mbg0.visible=this.mgroup0.visible=this.mgroup1.visible=!1},t.prototype.showMain=function(){var e=this;this.preview.visible=this.logoImg.visible=!1,this.mbg0.visible=this.mgroup0.visible=this.mgroup1.visible=!0,GameConfig.emptyPlay=!0,egret.setTimeout(function(){e.updataUI(),e.showTitleAnimation(3,null),GameManager.getInstance().getFreeCount()>0&&GameManager.getInstance().startGame()},this,500)},t}(core.BaseUI);__reflect(MainScenceUI.prototype,"MainScenceUI");var PreviewCompoment=function(e){function t(){var t=e.call(this)||this;return t.skinName=PreviewSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.cGroup.mask=this.masks,this.lightImg.mask=this.btnMask,this.lightImg.alpha=.9;var n=this.lightImg.x;this.lightImg.x=n-this.btnMask.width,egret.Tween.get(this.lightImg).to({x:n+this.btnMask.width+this.btnMask.width-250},750),egret.setInterval(function(){t.lightImg.x=n-t.btnMask.width,egret.Tween.get(t.lightImg).to({x:n+t.btnMask.width+t.btnMask.width+250},750)},this,1400),this.scroll=new core.MyScorll(this.cGroup,ScoreItem1),this.scroll.setData([0,1]),this.scroll.addEventListener(egret.Event.CHANGE,this.onChange,this),this.upDataIndex(),this.selectedBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.nextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.r0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this),this.r1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTab,this)},t.prototype.onChange=function(){this.upDataIndex()},t.prototype.upDataIndex=function(){0==this.scroll.index?this.r0.selected=!0:this.r1.selected=!0},t.prototype.onTab=function(e){switch(e.currentTarget){case this.selectedBtn:egret.localStorage.setItem("isShowlogin",this.selectedBtn.selected?"0":"1");break;case this.nextBtn:var t=core.UIManager.getUI(core.UIConst.MainScenceUI);t.showMain();break;case this.r0:this.scroll.setIndex2(0);break;case this.r1:this.scroll.setIndex2(1)}},t}(eui.Component);__reflect(PreviewCompoment.prototype,"PreviewCompoment");var Reel=function(e){function t(){var t=e.call(this)||this;return t.curReelIndex=0,t.targetIndex=0,t.reelArr=[],t.reelSpeed=40,t.index=0,t.JIAN_MIN_TIME=16.6,t.JIAN_MAX_TIME=33.3,t.skinName=ReelSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.init=function(){this.reelArr=vo.GameData.reelArr[this.index],this.containerGroup.removeChildren();for(var e=0;e<=t.ShowNum+1;e++){var n=new ReelItem;n.width=this.containerGroup.width,n.height=this.containerGroup.height/t.ShowNum,this.containerGroup.addChild(n),n.y=n.height*e}this.timer=new egret.Timer(this.JIAN_MAX_TIME,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.updata,this)},t.prototype.setItem=function(){for(var e=0;e<this.containerGroup.numChildren;e++){var t=this.containerGroup.getChildAt(e);t.setItem(!1)}},t.prototype.setAn=function(){for(var e=0;e<this.containerGroup.numChildren;e++){var t=this.containerGroup.getChildAt(e);t.setAn()}},t.prototype.setliangAndActForIndex=function(e,t){var n=this.containerGroup.getChildAt(e);n.setliang(t)},t.prototype.setCurIndex=function(e,t){if(void 0===t&&(t=!0),this.index>=this.reelArr.length)return void console.log("索引设置超出边界");this.targetIndex=this.curReelIndex=e;for(var n=0;n<this.containerGroup.numChildren;n++){var o=this.containerGroup.getChildAt(n);if(o.isMohu=!1,egret.Tween.removeTweens(o),4>n){var i=this.curReelIndex+n<this.reelArr.length?this.curReelIndex+n:(this.curReelIndex+n)%this.reelArr.length;o.value=this.reelArr[i];var r=o.height*n;o.y=t?r-300:r,t&&(egret.Tween.get(o).to({y:r},300,egret.Ease.backOut),SoundManager.getInstance().playMusic2(SoundConst.REEL_END,1,.5))}else if(n==this.containerGroup.numChildren-1){o.value=this.reelArr[this.curReelIndex-1<0?this.reelArr.length-1:this.curReelIndex-1],o.y=-o.height;var r=-o.height;o.y=t?r-300:r,t&&egret.Tween.get(o).to({y:r},300,egret.Ease.backOut)}o.setItem(!1)}},t.prototype.start=function(){this.timeoutInter=null,this.timer.delay=this.JIAN_MAX_TIME,this.curTime=0,egret.Tween.removeTweens(this),this.timer.start()},t.prototype.goIndex=function(e){return e>=this.reelArr.length?void console.log("索引设置超出边界"):void(this.targetIndex=e)},t.prototype.pausme=function(){this.timer.stop(),null!=this.timeoutInter&&egret.clearTimeout(this.timeoutInter)},t.prototype.resume=function(){this.timer.start(),null!=this.timeoutInter&&2==this.index&&(this.timeoutInter=egret.setTimeout(function(){core.NotifyManager.getInstance().sendNotify(core.NotifyConst.LOGIC_ROUNDOVER)},this,300))},Object.defineProperty(t.prototype,"speed",{get:function(){return this.reelSpeed},set:function(e){this.reelSpeed=e},enumerable:!0,configurable:!0}),t.prototype.updata=function(){var e=this;this.curTime+=this.timer.delay,this.timer.delay>this.JIAN_MIN_TIME?this.timer.delay-=2:this.timer.delay=this.JIAN_MIN_TIME;for(var n=0;n<this.containerGroup.numChildren;n++){var o=this.containerGroup.getChildAt(n);if(o.y+=this.reelSpeed,o.y>=this.containerGroup.height){var i=GameConfig.speedPlay?t.SPEEDTIME:t.TIME,r=GameConfig.speedPlay?t.SPEED_STOPTIME:t.STOPTIME;if(GameConfig.isData||(r=99999),this.curTime>=i+this.index*r){this.curReelIndex=this.targetIndex,this.timer.stop(),this.setCurIndex(this.curReelIndex);var a=GameConfig.speedPlay?400:550;return 2==this.index?void(this.timeoutInter=egret.setTimeout(function(){core.NotifyManager.getInstance().sendNotify(core.NotifyConst.LOGIC_ROUNDOVER),e.timeoutInter=null},this,a)):void 0}o.y=-2*o.height+this.reelSpeed+o.y-this.containerGroup.height,o.isMohu=!0,this.curReelIndex=this.curReelIndex-1<0?this.reelArr.length-1:this.curReelIndex-1,o.value=this.reelArr[this.curReelIndex],o.setItem(!1)}}},t.prototype.showMaozi=function(e){for(var t=0;t<this.kuangGroup.numChildren;t++)this.containerGroup.getChildAt(t).setAn(),this.kuangGroup.getChildAt(t).visible=!1;for(var t=0;t<e.length;t++){var n=this.containerGroup.getChildAt(e[t].Y);n.showMaozi(),this.kuangGroup.getChildAt(e[t].Y).visible=!0}this.kuangGroup.visible=!0},t.prototype.hideMaozi=function(){for(var e=0;e<this.containerGroup.numChildren;e++){var t=this.containerGroup.getChildAt(e);t.hideMaozi()}this.kuangGroup.visible=!1},t.ShowNum=3,t.TIME=1500,t.SPEEDTIME=800,t.STOPTIME=300,t.SPEED_STOPTIME=150,t}(eui.Component);__reflect(Reel.prototype,"Reel");var ReelItem=function(e){function t(){var t=e.call(this)||this;return t.isMohu=!1,t.speed=3,t.aspeed=6,t.skinName=ReelItemSkin,t.initFiter(),t}return __extends(t,e),t.prototype.showMaozi=function(){this.maoziMC||(this.maoziMC=game.MCUtils.getMc("maozi")),this.addChild(this.maoziMC),this.maoziMC.x=this.width/2,this.maoziMC.y=this.height/2,this.maoziMC.scaleX=1.4,this.maoziMC.scaleY=1.4,this.maoziMC.gotoAndPlay("action0",-1),this.icon.visible=!1},t.prototype.hideMaozi=function(){this.maoziMC&&this.maoziMC.parent&&(this.maoziMC.parent.removeChild(this.maoziMC),this.maoziMC.stop()),this.icon.visible=!0,this.setItem(!1)},t.prototype.setItem=function(e){void 0===e&&(e=!1),this.icon.source=this.isMohu?"bicon_"+this.value+"_2_png":"bicon_"+this.value+"_0_png",e||this.stopAction()},t.prototype.setAn=function(){this.stopAction();var e=this.colorFlilter.matrix;e=[1,0,0,0,-60,0,1,0,0,-60,0,0,1,0,-60,0,0,0,1,0],this.colorFlilter.matrix=e,this.icon.filters=[this.colorFlilter]},t.prototype.setliang=function(e){this.setItem(e),this.goAction()},t.prototype.goAction=function(){var e=this;void 0!=this.inter&&egret.clearInterval(this.inter),-1==this.value.indexOf("CC")&&(egret.Tween.removeTweens(this.icon),this.inter=egret.setInterval(function(){e.glowFilter.blurX+=e.speed,e.glowFilter.blurY+=e.speed,(e.glowFilter.blurX>50||e.glowFilter.blurX<0)&&(e.speed=-e.speed);var t=e.colorFlilter.matrix;t[4]+=e.aspeed,t[9]+=e.aspeed,t[14]+=e.aspeed,(t[4]>50||t[4]<0)&&(e.aspeed=-e.aspeed),e.colorFlilter.matrix=t,e.icon.filters=[e.glowFilter,e.colorFlilter]},this,20))},t.prototype.stopAction=function(){-1==this.value.indexOf("CC")&&(egret.clearInterval(this.inter),this.icon.filters=[]);var e=this.colorFlilter.matrix;e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.colorFlilter.matrix=e},t.prototype.initFiter=function(){if(!this.glowFilter){var e=16777215,t=.1,n=0,o=0,i=30,r=3,a=!1,s=!1;this.glowFilter=new egret.GlowFilter(e,t,n,o,i,r,a,s)}var l=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this.colorFlilter||(this.colorFlilter=new egret.ColorMatrixFilter(l))},t}(eui.Component);__reflect(ReelItem.prototype,"ReelItem");var ScoreItem1=function(e){function t(){var t=e.call(this)||this;return t.skinName=ScrollItem1Skin,t}return __extends(t,e),t.prototype.setData=function(t){e.prototype.setData.call(this,t),this.icons.source="feature_"+t+"_png"},t}(core.ScrollItem);__reflect(ScoreItem1.prototype,"ScoreItem1");var GameManager=function(e){function t(){var t=e.call(this)||this;return t.gameState=0,t.curtime=egret.getTimer(),t}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){var e=this;GameController.getInstance().clearRedis(),GameConfig.gameModle=GameType.GameModule.falseModle,core.NotifyManager.getInstance().registerNotify(core.NotifyConst.NET_INIT,this.onNetgGmeInit,this),core.NotifyManager.getInstance().registerNotify(core.NotifyConst.NET_PLAY,this.onNetGamePlay,this),core.NotifyManager.getInstance().registerNotify(core.NotifyConst.LOGIC_ROUNDOVER,this.onLogicGameOver,this),core.NotifyManager.getInstance().registerNotify(core.NotifyConst.LOGIC_ROUNDSTART,this.onLogicGameStart,this),core.NotifyManager.getInstance().registerNotify(core.NotifyConst.NET_TOUCHTOKEN,this.onNetTouchToken,this),sockets.SocketMananger.getInstance().connectServer(function(){e.initData(),Commond.sendInitGame()},this)},t.prototype.initData=function(){vo.GameData.slotInfo=new vo.SlotInfo,vo.GameData.slotInfo.readData(null),vo.GameData.slotInfo.readPlayAction(null)},t.prototype.onNetgGmeInit=function(e){var t=e;core.LoadManger.getInstance().loadGroup(core.UIConst.NomalLoadingUI,"main",function(){core.UIManager.openUI(core.UIConst.MainScenceUI)},this),this.initAlysInitialData(t)},t.prototype.initAlysInitialData=function(e){vo.GameData.balance=parseFloat(e.Value.TokenInfo.Balance+""),vo.GameData.reelArr.length=0;for(var t=e.Value.SpinConstraint.Main.Stripes,n=0;n<t.length;n++)vo.GameData.reelArr.push(t[n].Symbols);null!=e.Value.Actions&&(vo.GameData.allFreeCount=e.Value.Actions.Count,GameConfig.freeNum=e.Value.Actions.Remain),vo.GameData.slotInfo.resultArr=[],vo.GameData.slotInfo.resultArr=e.Value.Geninit.Main.ReelResults,vo.GameData.initData=e,GameConfig.isData=!0},t.prototype.onNetGamePlay=function(e){this.initAlaysPlayData(e);var n=core.UIManager.getUI(core.UIConst.MainScenceUI);if(n.ruleIsShow=!1,n.setRule(),"freeslot"==vo.GameData.resultData.ActionType){console.log("次数111111 === "+vo.GameData.allFreeCount),console.log("次数333333 === "+t.getInstance().getFreeCount());var o=vo.GameData.allFreeCount-this.getFreeCount()>0?vo.GameData.allFreeCount-this.getFreeCount():vo.GameData.allFreeCount;vo.GameData.allFreeCount!=this.getFreeCount()&&this.showTips("免费旋转第"+(o+1)+"次，共"+vo.GameData.allFreeCount+"次")}else vo.GameData.slotInfo.allwin=0,n.setAllWin(vo.GameData.slotInfo.allwin),this.showTips("祝您好运!")},t.prototype.initAlaysPlayData=function(e){var t=core.UIManager.getUI(core.UIConst.MainScenceUI);vo.GameData.slotInfo.resultArr=[],vo.GameData.slotInfo.resultArr=e.Value.Main.ReelResults,vo.GameData.initData.Value.Actions=e.Value.Actions,vo.GameData.resultData=e,t.gameScence.startData()},t.prototype.onNetTouchToken=function(e){},t.prototype.onLogicGameOver=function(){var e=this;if(console.log("---------"+egret.getTimer()),GameConfig.isData=!1,vo.GameData.resultData){t.getInstance().gameState=GameType.GameState.STOP,null!=vo.GameData.resultData.Value.Actions?(vo.GameData.allFreeCount=vo.GameData.resultData.Value.Actions.Count,GameConfig.freeNum=vo.GameData.resultData.Value.Actions.Remaining):(GameConfig.freeNum=0,vo.GameData.allFreeCount=0),this.showTips("");var n=core.UIManager.getUI(core.UIConst.MainScenceUI);0==this.getFreeCount()&&"freeslot"==vo.GameData.resultData.ActionType&&n.setBG(!1),n.playBtn.label="旋转",n.playBtn.enabled=!1;var o=vo.GameData.resultData,i=o.Value.Main.WinResults,r=!1,a=!1,s=!1,l=!1;if(i.length>0){this.stopMusic();for(var c=0;c<i.length;c++)"Bonus"==i[c].Type&&("slot"==vo.GameData.resultData.ActionType?r=!0:l=!0),"Line"==i[c].Type&&(a=!0),"BonusWin"==i[c].Type&&"freeslot"==vo.GameData.resultData.ActionType&&(s=!0);if(r)return void this.getFreeSlot();if(l)return void this.getFreeSlotAndReward();if(s)return void this.getbigReward();if(a)return void this.getNomalReward()}else{var u;GameConfig.autoPlay?(console.log("AA"),u=500):(console.log("BB"),u=600),0==this.getFreeCount()?(console.log("CC"),u=600):(console.log("DD"),u=500),GameConfig.autoPlay||0==this.getFreeCount()||(console.log("EE"),u=500),egret.setTimeout(function(){console.log("XXXXXX"),e.doNext(),e.isCanStop()&&e.stopMusic()},this,u)}}},t.prototype.getFreeSlotAndReward=function(){for(var e=this,t=core.UIManager.getUI(core.UIConst.MainScenceUI),n=vo.GameData.resultData,o=n.Value.Main.WinResults,i=n.Value.Main.TotalWin,r=0,a=0,s=[],l=0;l<o.length;l++)(o[l].Type="Bonus")&&(s=o[l]);for(var c=0;c<o.length;c++)"Line"==o[c].Type&&a++;var u=function(){var n=i/GameConfig.bili;r=1800*a,console.log("INDEX === "+a),0!=a&&e.getNomalReward1(),egret.setTimeout(function(){for(var i=0;i<o.length;i++)e.showTips(o[i].SymbolCount+"个分散图案赢得CNY "+n.toFixed(2));vo.GameData.slotInfo.allwin=n,t.setAllWin(vo.GameData.slotInfo.allwin),console.log("QQQQQQQ");for(var i=0;i<o.length;i++)t.showHouzi(o[i],e.doNext.bind(e),!0)},e,r)};t.gameScence.showRewardGroup(s,i,u.bind(this)),SoundManager.getInstance().playEffect(SoundConst.BIG_REWARD)},t.prototype.getFreeSlot=function(){for(var e=this,t=core.UIManager.getUI(core.UIConst.MainScenceUI),n=vo.GameData.resultData,o=n.Value.Main.WinResults,i=0,r=0,a=0;a<o.length;a++)"Line"==o[a].Type&&r++;
for(var s=function(){SoundManager.getInstance().playEffect(SoundConst.FREE_SHOW),e.showTips("获得10次免费旋转"),e.enterPlayingState(),i=1800*r,0!=r&&e.getNomalReward1(),egret.setTimeout(function(){t.gameScence.showFreeSlot(function(){t.hideHouzi(),egret.setTimeout(function(){"freeslot"!=vo.GameData.resultData.ActionType&&e.showTips("免费旋转第1次，共10次")},e,1e3),e.doNext()})},e,i)},l=0;l<o.length;l++)"Bonus"==o[l].Type&&t.showHouzi(o[l],s.bind(this))},t.prototype.getbigReward=function(){for(var e=this,t=core.UIManager.getUI(core.UIConst.MainScenceUI),n=vo.GameData.resultData,o=n.Value.Main.WinResults,i=0,r=0,a=n.Value.Main.TotalWin,s=[],l=0;l<o.length;l++)(o[l].Type="Bonus")&&(s=o[l]);for(var c=0;c<o.length;c++)"Line"==o[c].Type&&r++;var u=function(){var n=a/GameConfig.bili;i=1800*r,0!=r&&e.getNomalReward1(),egret.setTimeout(function(){for(var i=0;i<o.length;i++)"BonusWin"==o[i].Type&&e.showTips(o[i].SymbolCount+"个分散图案赢得CNY "+n.toFixed(2));vo.GameData.slotInfo.allwin=n,t.setAllWin(vo.GameData.slotInfo.allwin),t.gameScence.clearAll();for(var i=0;i<o.length;i++)"BonusWin"==o[i].Type&&t.showHouzi(o[i],e.doNext.bind(e),!0)},e,i)};t.gameScence.showRewardGroup(s,a,u.bind(this)),SoundManager.getInstance().playEffect(SoundConst.BIG_REWARD)},t.prototype.getNomalReward=function(){for(var e=this,n=core.UIManager.getUI(core.UIConst.MainScenceUI),o=vo.GameData.resultData,i=o.Value.Main.WinResults,r=[],a=0;a<i.length;a++)"Line"==i[a].Type&&r.push(i[a]);n.showAllWin(r,function(){0==t.getInstance().getFreeCount()&&(vo.GameData.balance=vo.GameData.resultData.Value.Balance,n.setMoney(vo.GameData.balance)),t.getInstance().gameState=GameType.GameState.STOP,e.doNext()},this,function(){t.getInstance().gameState=GameType.GameState.STOP,e.enterCanStart()})},t.prototype.getNomalReward1=function(){for(var e=core.UIManager.getUI(core.UIConst.MainScenceUI),n=vo.GameData.resultData,o=n.Value.Main.WinResults,i=[],r=0;r<o.length;r++)"Line"==o[r].Type&&i.push(o[r]);e.showAllWin(i,function(){0==t.getInstance().getFreeCount()&&(vo.GameData.balance=vo.GameData.resultData.Value.Balance,e.setMoney(vo.GameData.balance)),t.getInstance().gameState=GameType.GameState.STOP},this,function(){})},t.prototype.doNext=function(){var e=this,n=core.UIManager.getUI(core.UIConst.MainScenceUI);t.getInstance().getFreeCount()>0&&n.setBG(!0),0==this.getFreeCount()&&"freeslot"==vo.GameData.resultData.ActionType?(SoundManager.getInstance().playEffect(SoundConst.ALLWIN),n.gameScence.showAllWinNumGroup(vo.GameData.slotInfo.allwin,function(){n.setBG(!1),vo.GameData.slotInfo.allwin=0,n.setAllWin(vo.GameData.slotInfo.allwin),n.setMoney(vo.GameData.resultData.Value.Balance),t.getInstance().gameState=GameType.GameState.STOP,e.enterCanStart(),console.log("2222 == "+e.isCanStop()),e.isCanStop()?e.autoStopGame():(n.updataUI(),e.startGame())})):(t.getInstance().gameState=GameType.GameState.STOP,this.enterCanStart(),console.log("3333 === "+this.isCanStop()),this.isCanStop()?this.autoStopGame():egret.setTimeout(function(){n.updataUI(),e.startGame()},this,500))},t.prototype.onLogicGameStart=function(){t.getInstance().gameState=GameType.GameState.PLAYING;var e=core.UIManager.getUI(core.UIConst.MainScenceUI);egret.setTimeout(function(){t.getInstance().enterCanStopState()},this,100),e.addListeber(),e.hideAllWin1(),e.hideHouzi()},t.prototype.stopMusic=function(){this.chanel&&(this.chanel.stop(),this.chanel=null)},t.prototype.startGame=function(){var e=this,n=core.UIManager.getUI(core.UIConst.MainScenceUI);if(n.gameScence.hideGroup(),vo.GameData.resultData&&0==this.getFreeCount()&&(vo.GameData.balance=vo.GameData.resultData.Value.Balance),this.getFreeCount()>0)Commond.sendPlay(!0);else{GameConfig.autoPlay&&t.getInstance().gameState==GameType.GameState.STOP&&(vo.GameData.autoPlayCount-=1),vo.GameData.autoPlayCount<=0&&this.autoStopGame();var o=vo.GameData.betScoreArr[vo.GameData.betIndex];if(console.log("donext4"),o<=vo.GameData.balance)console.log("donext2"),Commond.sendPlay(!1),vo.GameData.balance-=o;else{if(!GameConfig.autoChangeBet)return egret.setTimeout(function(){e.autoStopGame(),e.enterCanStart()},this,500),void this.noMoney();console.log("donext3");var i=this.getMaxBet();i>0?(n.baner.setIndex(i),Commond.sendPlay(!1),vo.GameData.betIndex=i,vo.GameData.balance-=vo.GameData.betScoreArr[vo.GameData.betIndex]):(egret.setTimeout(function(){e.autoStopGame(),e.enterCanStart()},this,500),this.noMoney())}}n.updataUI(),t.getInstance().gameState==GameType.GameState.STOP&&(core.NotifyManager.getInstance().sendNotify(core.NotifyConst.LOGIC_ROUNDSTART),n.gameScence.startReel(),SoundManager.getInstance().effectOn&&null==this.chanel&&egret.getTimer()-this.curtime>400&&(this.curtime=egret.getTimer(),SoundManager.getInstance().playMusic(SoundConst.START,-1).then(function(t){e.chanel=t})))},t.prototype.noMoney=function(){core.UIManager.openUI(core.UIConst.StipsUI,core.LayerManager.Layer_Top);var e=core.UIManager.getUI(core.UIConst.StipsUI);e.shows("没有可用资金","金额不足，无法以当前注额投注，请减少注额或增加余额。")},t.prototype.stopGame=function(){var e=core.UIManager.getUI(core.UIConst.MainScenceUI);GameConfig.isData&&e.gameScence.stopReel()},t.prototype.autoStartGame=function(){t.getInstance().setAutoPlay(!0),GameConfig.key_money=vo.GameData.balance,this.gameState!=GameType.GameState.STOP?t.getInstance().resume():t.getInstance().startGame();var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.autoBtn.label="停止",e.showOrHideAutoPlay(!0),e.updataUI()},t.prototype.autoStopGame=function(){t.getInstance().setAutoPlay(!1);var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.autoBtn.label="自动游戏",e.showOrHideAutoPlay(!1)},t.prototype.pausume=function(){if(this.gameState==GameType.GameState.PLAYING){var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.gameScence.pausme()}},t.prototype.resume=function(){if(this.gameState==GameType.GameState.PLAYING){var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.gameScence.resume()}},t.prototype.showTips=function(e){var t=core.UIManager.getUI(core.UIConst.MainScenceUI);t.showlabel.text=e},t.prototype.setAutoPlay=function(e){GameConfig.autoPlay=e},t.prototype.isCanStop=function(){if(!GameConfig.autoPlay&&"slot"==vo.GameData.resultData.ActionType)return!0;if(!GameConfig.autoPlay&&0==this.getFreeCount())return!0;if(!GameConfig.autoPlay&&this.getRewardType()==GameType.RewardType.FREE_REWARD)return!0;if(GameConfig.autoPlay&&GameConfig.freeWin&&this.getRewardType()==GameType.RewardType.FREE_REWARD)return!0;if(GameConfig.autoPlay&&vo.GameData.autoPlayCount<=0)return!0;var e=vo.GameData.resultData.Value.Balance>vo.GameData.balance?vo.GameData.resultData.Value.Balance-vo.GameData.balance:0,t=vo.GameData.resultData.Value.Balance<vo.GameData.balance?vo.GameData.balance-vo.GameData.resultData.Value.Balance:0;return GameConfig.autoPlay&&e>=GameConfig.moneyAddCur&&GameConfig.moneyAddCur>0&&"slot"==vo.GameData.resultData.ActionType?!0:GameConfig.autoPlay&&t>=GameConfig.moneySubCur&&GameConfig.moneySubCur>0&&"slot"==vo.GameData.resultData.ActionType?!0:GameConfig.autoPlay&&vo.GameData.resultData.Value.Main.TotalWinDollar>=GameConfig.singleWinCurCount&&GameConfig.singleWinCurCount>0&&"slot"==vo.GameData.resultData.ActionType?!0:GameConfig.autoPlay&&vo.GameData.resultData.Value.Main.TotalWinDollar>0&&GameConfig.someWin&&"slot"==vo.GameData.resultData.ActionType?!0:!1},t.prototype.getRewardType=function(){var e=vo.GameData.resultData,t=e.Value.Main.WinResults,n=!1,o=!1,i=!1,r=!1;if(t.length>0){for(var a=0;a<t.length;a++)"Bonus"==t[a].Type&&("slot"==vo.GameData.resultData.ActionType?n=!0:r=!0),"Line"==t[a].Type&&(o=!0),"BonusWin"==t[a].Type&&"freeslot"==vo.GameData.resultData.ActionType&&(i=!0);if(n)return GameType.RewardType.FREE_REWARD;if(r)return GameType.RewardType.BIG_AND_FREE;if(i&&"freeslot"==vo.GameData.resultData.ActionType)return GameType.RewardType.BIG_REWARD;if(o)return GameType.RewardType.NOMAL_REWARD}return GameType.RewardType.NO_REWARD},t.prototype.getFreeCount=function(){var e=0;return GameConfig.freeNum>0&&(e=GameConfig.freeNum),e},t.prototype.getAllFreeCount=function(){var e=0;return e=vo.GameData.allFreeCount},t.prototype.getMaxBet=function(){for(var e=vo.GameData.betScoreArr.length-1;e>=0;e--)if(vo.GameData.betScoreArr[e]<=vo.GameData.balance)return e;return-1},t.prototype.enterPlayingState=function(){var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.baner.setEnable(!1),e.setBtn.enabled=!1,e.playBtn.enabled=!1,e.playBtn.label="旋转"},t.prototype.enterPlayingState1=function(){var e=core.UIManager.getUI(core.UIConst.MainScenceUI);GameConfig.autoPlay?e.baner.setEnable(!1):GameConfig.autoPlay||e.baner.setEnable(!0),GameConfig.autoPlay||0==this.getFreeCount()||e.baner.setEnable(!1),e.setBtn.enabled=!0,e.playBtn.enabled=!0,e.playBtn.label="旋转"},t.prototype.enterCanStopState=function(){var e=core.UIManager.getUI(core.UIConst.MainScenceUI);e.baner.setEnable(!1),e.setBtn.enabled=!1,e.playBtn.enabled=!0,e.playBtn.label="停止"},t.prototype.enterCanStart=function(){var e=core.UIManager.getUI(core.UIConst.MainScenceUI);GameConfig.autoPlay?e.baner.setEnable(!1):GameConfig.autoPlay||e.baner.setEnable(!0),GameConfig.autoPlay||0==this.getFreeCount()||e.baner.setEnable(!1),e.setBtn.enabled=!0,e.playBtn.enabled=!0,e.playBtn.label="旋转"},t.numberToCommonStr=function(e){for(var t=e+"",n=t.split("."),o=n[0],i="",r=0,a=o.length-1;a>=0;a--)i=o.substr(a,1)+i,r++,3==r&&a>0&&(i=","+i,r=0);return n.length>1?i=i+"."+n[1]:i+=".00",i},t}(egret.EventDispatcher);__reflect(GameManager.prototype,"GameManager");